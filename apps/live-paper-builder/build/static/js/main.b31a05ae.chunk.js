(this["webpackJsonplive-paper-builder"]=this["webpackJsonplive-paper-builder"]||[]).push([[0],{495:function(e,t,n){},531:function(e,t,n){},545:function(e,t,n){},654:function(e,t){},656:function(e,t){},665:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n(0),o=n.n(i),s=n(23),r=n.n(s),l=(n(495),n(442)),c=n.n(l)()({url:"https://iam.ebrains.eu/auth",realm:"hbp",clientId:"live-paper-builder-tool"}),d="team email profile";function h(e){console.log("DOM content is loaded, initialising Keycloak client..."),c.init({flow:"implicit"}).success((function(){return function(e){console.log("Keycloak client is initialised, verifying authentication...");var t=c.authenticated,n=!c.authenticated,a=null==window.opener,i=window!==window.parent,o=window===window.parent&&a,s=i&&a,r=null!=window.opener,l=function(e,t){return window.opener.postMessage(e,t)},h=function(e){return window.addEventListener("message",e)},u="clb.authenticated",b=window.location.origin,j=function(e){return window.open(e)},f=function(){return new URL(window.location)},x=function(){return window.close()},m=function(e){return c.login({scope:e})};if(o){if(console.log("This is a standalone app..."),n)return console.log("...which is not authenticated, starting login..."),m(d);if(t)return console.log("...which is authenticated, starting business logic..."),e(c)}if(s){if(console.log("This is a framed app..."),n)return console.log("...which is not authenticated, delegating to new tab..."),h(p),j(f());if(t)return console.log("...which is authenticated, starting business logic..."),e(c)}if(r){if(console.log("This is a delegate tab..."),n)return console.log("...which is not authenticated, starting login..."),m(d);if(t)return console.log("...which is authenticated, warn parent and close..."),l(u,b),x()}}(e)})).error(console.log)}function p(e){console.log("Message receveived, verifying it...");var t,n=e.data,a=e.origin,i=window.location.origin;if("clb.authenticated"===n&&a===i)return t=d,c.login({scope:t})}var u=n(22),b=o.a.createContext(),j=function(e){var t=o.a.useState({}),n=Object(u.a)(t,2),i=n[0],s=n[1];return Object(a.jsx)(b.Provider,{value:{auth:[i,s]},children:e.children})},f=b,x=n(13),m=n(10),g=n(7),O=n(14),v=n(18),y=n(126),_=n(26),C=n.n(_),k=n(15),w=n(4),F=n(683),S=n(681),I=n(254),D=n(141),P=n(5),T=n(692),E=n(67),R=n(152),A=n(68),L=n.n(A),M=n(240),B=n(39),N=n(9),W=n(234),U=n(191),G=n(694),H=n(476),z=n.n(H),K=n(477),V=n.n(K),q=n(479),J=n.n(q),$=n(478),Y=n.n($),X=n(480),Z=n.n(X),Q=n(33),ee=n(281),te=n(443),ne=n(445),ae=n.n(ne),ie=n(235),oe=n.n(ie),se=n(42),re=n.n(se),le=n(395),ce=n(151),de=n.n(ce),he=n(236),pe=n.n(he),ue=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(){return Object(x.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"handleAdd",value:function(){var e=this.props.items;e.push({firstname:"",lastname:"",affiliation:""}),this.props.onChangeValue(e)}},{key:"handleItemChanged",value:function(e,t){var n=this.props.items;n[e][t.target.name]=t.target.value,this.props.onChangeValue(n)}},{key:"handleItemMoveDown",value:function(e){if(console.log("Move down item with index: "+e),e<this.props.items.length){var t=this.props.items;t=de()(t,e,e+1),this.props.onChangeValue(t)}}},{key:"handleItemMoveUp",value:function(e){if(console.log("Move up item with index: "+e),e>0){var t=this.props.items;t=de()(t,e,e-1),this.props.onChangeValue(t)}}},{key:"handleItemDeleted",value:function(e){var t=this.props.items;t.splice(e,1),this.props.onChangeValue(t)}},{key:"renderRows",value:function(){var e=this,t=this.props.items;return this.props.items.map((function(n,i){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"25%",padding:"5px 10px"},children:Object(a.jsx)("input",{name:"firstname",type:"text",value:n.firstname,onChange:e.handleItemChanged.bind(e,i)})}),Object(a.jsx)("td",{style:{width:"25%",padding:"5px 10px"},children:Object(a.jsx)("input",{name:"lastname",type:"text",value:n.lastname,onChange:e.handleItemChanged.bind(e,i)})}),Object(a.jsx)("td",{style:{padding:"5px 10px"},children:Object(a.jsx)("input",{name:"affiliation",type:"text",value:n.affiliation,onChange:e.handleItemChanged.bind(e,i)})}),Object(a.jsx)("td",{style:{width:"100px",padding:"5px 0px 5px 10 px"},children:Object(a.jsxs)("div",{children:[Object(a.jsx)(le.a,{title:"Move down",children:Object(a.jsx)(R.a,{color:"primary",size:"small","aria-label":"move down",component:"span",style:{paddingRight:"5px"},onClick:e.handleItemMoveDown.bind(e,i),children:Object(a.jsx)(re.a,{stroke:"#000000",strokeWidth:1,style:{transform:"rotate(90deg)",color:i===t.length-1?"#A1887F":"#000000"},fontSize:"small"})})}),Object(a.jsx)(le.a,{title:"Move up",children:Object(a.jsx)(R.a,{color:"primary",size:"small","aria-label":"move up",component:"span",style:{paddingRight:"5px"},onClick:e.handleItemMoveUp.bind(e,i),children:Object(a.jsx)(re.a,{stroke:"#000000",strokeWidth:1,style:{transform:"rotate(270deg)",color:0===i?"#A1887F":"#000000"},fontSize:"small"})})}),Object(a.jsx)(le.a,{title:"Delete",children:Object(a.jsx)(R.a,{color:"secondary",size:"small","aria-label":"delete",component:"span",onClick:e.handleItemDeleted.bind(e,i),children:Object(a.jsx)(oe.a,{fontSize:"small"})})})]})})]},"item-"+i)}))}},{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsxs)("table",{children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{padding:"5px 10px"},children:"First Name"}),Object(a.jsx)("th",{style:{padding:"5px 10px"},children:"Last Name"}),Object(a.jsx)("th",{style:{padding:"5px 10px"},children:"Affiliation"}),Object(a.jsx)("th",{style:{padding:"5px 0px 5px 10 px"}})]})}),Object(a.jsx)("tbody",{children:this.renderRows()})]}),Object(a.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",paddingTop:"10px"},children:Object(a.jsx)(y.a,{variant:"contained",color:"primary",onClick:this.handleAdd.bind(this),style:{width:"110px"},startIcon:Object(a.jsx)(pe.a,{}),children:"Add"})}),Object(a.jsx)("hr",{})]})}}]),n}(o.a.Component),be=n(70),je=n(483),fe=n(674),xe=n(396),me=n(308),ge=n(307),Oe=n(691),ve=n(316),ye=Object(be.a)((function(e){return{formControl:{minWidth:"92.5%",maxWidth:"97.5%"},noLabel:{marginTop:e.spacing(3)}}})),_e={PaperProps:{style:{maxHeight:224,width:250}}};function Ce(e){var t=ye(),n="select-"+e.label.replace(" ","-"),i=n+"-label",o=e.name.replace(" ","_");return Object(a.jsx)("div",{children:Object(a.jsxs)(ge.a,{className:t.formControl,disabled:e.disabled||!1,children:[Object(a.jsx)(fe.a,{id:i,children:e.label}),Object(a.jsx)(ve.a,{labelId:i,id:n,value:e.value?e.value:"",name:o,onChange:e.handleChange,input:Object(a.jsx)(je.a,{}),MenuProps:_e,children:e.itemNames.map((function(e){return Object(a.jsx)(xe.a,{value:e,children:Object(a.jsx)(Oe.a,{primary:e})},e)}))}),Object(a.jsx)(me.a,{children:e.helperText})]})})}var ke=n(65),we=(n(531),["3d_rotation","ac_unit","access_alarm","access_alarms","access_time","accessibility","accessible","account_balance","account_balance_wallet","account_box","account_circle","adb","add","add_a_photo","add_alarm","add_alert","add_box","add_circle","add_circle_outline","add_location","add_shopping_cart","add_to_photos","add_to_queue","adjust","airline_seat_flat","airline_seat_flat_angled","airline_seat_individual_suite","airline_seat_legroom_extra","airline_seat_legroom_normal","airline_seat_legroom_reduced","airline_seat_recline_extra","airline_seat_recline_normal","airplanemode_active","airplanemode_inactive","airplay","airport_shuttle","alarm","alarm_add","alarm_off","alarm_on","album","all_inclusive","all_out","android","announcement","apps","archive","arrow_back","arrow_downward","arrow_drop_down","arrow_drop_down_circle","arrow_drop_up","arrow_forward","arrow_upward","art_track","aspect_ratio","assessment","assignment","assignment_ind","assignment_late","assignment_return","assignment_returned","assignment_turned_in","assistant","assistant_photo","attach_file","attach_money","attachment","audiotrack","autorenew","av_timer","backspace","backup","battery_alert","battery_charging_full","battery_full","battery_std","battery_unknown","beach_access","beenhere","block","bluetooth","bluetooth_audio","bluetooth_connected","bluetooth_disabled","bluetooth_searching","blur_circular","blur_linear","blur_off","blur_on","book","bookmark","bookmark_border","border_all","border_bottom","border_clear","border_color","border_horizontal","border_inner","border_left","border_outer","border_right","border_style","border_top","border_vertical","branding_watermark","brightness_1","brightness_2","brightness_3","brightness_4","brightness_5","brightness_6","brightness_7","brightness_auto","brightness_high","brightness_low","brightness_medium","broken_image","brush","bubble_chart","bug_report","build","burst_mode","business","business_center","cached","cake","call","call_end","call_made","call_merge","call_missed","call_missed_outgoing","call_received","call_split","call_to_action","camera","camera_alt","camera_enhance","camera_front","camera_rear","camera_roll","cancel","card_giftcard","card_membership","card_travel","casino","cast","cast_connected","center_focus_strong","center_focus_weak","change_history","chat","chat_bubble","chat_bubble_outline","check","check_box","check_box_outline_blank","check_circle","chevron_left","chevron_right","child_care","child_friendly","chrome_reader_mode","class","clear","clear_all","close","closed_caption","cloud","cloud_circle","cloud_done","cloud_download","cloud_off","cloud_queue","cloud_upload","code","collections","collections_bookmark","color_lens","colorize","comment","compare","compare_arrows","computer","confirmation_number","contact_mail","contact_phone","contacts","content_copy","content_cut","content_paste","control_point","control_point_duplicate","copyright","create","create_new_folder","credit_card","crop","crop_16_9","crop_3_2","crop_5_4","crop_7_5","crop_din","crop_free","crop_landscape","crop_original","crop_portrait","crop_rotate","crop_square","dashboard","data_usage","date_range","dehaze","delete","delete_forever","delete_sweep","description","desktop_mac","desktop_windows","details","developer_board","developer_mode","device_hub","devices","devices_other","dialer_sip","dialpad","directions","directions_bike","directions_boat","directions_bus","directions_car","directions_railway","directions_run","directions_subway","directions_transit","directions_walk","disc_full","dns","do_not_disturb","do_not_disturb_alt","do_not_disturb_off","do_not_disturb_on","dock","domain","done","done_all","donut_large","donut_small","drafts","drag_handle","drive_eta","dvr","edit","edit_location","eject","email","enhanced_encryption","equalizer","error","error_outline","euro_symbol","ev_station","event","event_available","event_busy","event_note","event_seat","exit_to_app","expand_less","expand_more","explicit","explore","exposure","exposure_neg_1","exposure_neg_2","exposure_plus_1","exposure_plus_2","exposure_zero","extension","face","fast_forward","fast_rewind","favorite","favorite_border","featured_play_list","featured_video","feedback","fiber_dvr","fiber_manual_record","fiber_new","fiber_pin","fiber_smart_record","file_download","file_upload","filter","filter_1","filter_2","filter_3","filter_4","filter_5","filter_6","filter_7","filter_8","filter_9","filter_9_plus","filter_b_and_w","filter_center_focus","filter_drama","filter_frames","filter_hdr","filter_list","filter_none","filter_tilt_shift","filter_vintage","find_in_page","find_replace","fingerprint","first_page","fitness_center","flag","flare","flash_auto","flash_off","flash_on","flight","flight_land","flight_takeoff","flip","flip_to_back","flip_to_front","folder","folder_open","folder_shared","folder_special","font_download","format_align_center","format_align_justify","format_align_left","format_align_right","format_bold","format_clear","format_color_fill","format_color_reset","format_color_text","format_indent_decrease","format_indent_increase","format_italic","format_line_spacing","format_list_bulleted","format_list_numbered","format_paint","format_quote","format_shapes","format_size","format_strikethrough","format_textdirection_l_to_r","format_textdirection_r_to_l","format_underlined","forum","forward","forward_10","forward_30","forward_5","free_breakfast","fullscreen","fullscreen_exit","functions","g_translate","gamepad","games","gavel","gesture","get_app","gif","golf_course","gps_fixed","gps_not_fixed","gps_off","grade","gradient","grain","graphic_eq","grid_off","grid_on","group","group_add","group_work","hd","hdr_off","hdr_on","hdr_strong","hdr_weak","headset","headset_mic","healing","hearing","help","help_outline","high_quality","highlight","highlight_off","history","home","hot_tub","hotel","hourglass_empty","hourglass_full","http","https","image","image_aspect_ratio","import_contacts","import_export","important_devices","inbox","indeterminate_check_box","info","info_outline","input","insert_chart","insert_comment","insert_drive_file","insert_emoticon","insert_invitation","insert_link","insert_photo","invert_colors","invert_colors_off","iso","keyboard","keyboard_arrow_down","keyboard_arrow_left","keyboard_arrow_right","keyboard_arrow_up","keyboard_backspace","keyboard_capslock","keyboard_hide","keyboard_return","keyboard_tab","keyboard_voice","kitchen","label","label_outline","landscape","language","laptop","laptop_chromebook","laptop_mac","laptop_windows","last_page","launch","layers","layers_clear","leak_add","leak_remove","lens","library_add","library_books","library_music","lightbulb_outline","line_style","line_weight","linear_scale","link","linked_camera","list","live_help","live_tv","local_activity","local_airport","local_atm","local_bar","local_cafe","local_car_wash","local_convenience_store","local_dining","local_drink","local_florist","local_gas_station","local_grocery_store","local_hospital","local_hotel","local_laundry_service","local_library","local_mall","local_movies","local_offer","local_parking","local_pharmacy","local_phone","local_pizza","local_play","local_post_office","local_printshop","local_see","local_shipping","local_taxi","location_city","location_disabled","location_off","location_on","location_searching","lock","lock_open","lock_outline","looks","looks_3","looks_4","looks_5","looks_6","looks_one","looks_two","loop","loupe","low_priority","loyalty","mail","mail_outline","map","markunread","markunread_mailbox","memory","menu","merge_type","message","mic","mic_none","mic_off","mms","mode_comment","mode_edit","monetization_on","money_off","monochrome_photos","mood","mood_bad","more","more_horiz","more_vert","motorcycle","mouse","move_to_inbox","movie","movie_creation","movie_filter","multiline_chart","music_note","music_video","my_location","nature","nature_people","navigate_before","navigate_next","navigation","near_me","network_cell","network_check","network_locked","network_wifi","new_releases","next_week","nfc","no_encryption","no_sim","not_interested","note","note_add","notifications","notifications_active","notifications_none","notifications_off","notifications_paused","offline_pin","ondemand_video","opacity","open_in_browser","open_in_new","open_with","pages","pageview","palette","pan_tool","panorama","panorama_fish_eye","panorama_horizontal","panorama_vertical","panorama_wide_angle","party_mode","pause","pause_circle_filled","pause_circle_outline","payment","people","people_outline","perm_camera_mic","perm_contact_calendar","perm_data_setting","perm_device_information","perm_identity","perm_media","perm_phone_msg","perm_scan_wifi","person","person_add","person_outline","person_pin","person_pin_circle","personal_video","pets","phone","phone_android","phone_bluetooth_speaker","phone_forwarded","phone_in_talk","phone_iphone","phone_locked","phone_missed","phone_paused","phonelink","phonelink_erase","phonelink_lock","phonelink_off","phonelink_ring","phonelink_setup","photo","photo_album","photo_camera","photo_filter","photo_library","photo_size_select_actual","photo_size_select_large","photo_size_select_small","picture_as_pdf","picture_in_picture","picture_in_picture_alt","pie_chart","pie_chart_outlined","pin_drop","place","play_arrow","play_circle_filled","play_circle_outline","play_for_work","playlist_add","playlist_add_check","playlist_play","plus_one","poll","polymer","pool","portable_wifi_off","portrait","power","power_input","power_settings_new","pregnant_woman","present_to_all","print","priority_high","public","publish","query_builder","question_answer","queue","queue_music","queue_play_next","radio","radio_button_checked","radio_button_unchecked","rate_review","receipt","recent_actors","record_voice_over","redeem","redo","refresh","remove","remove_circle","remove_circle_outline","remove_from_queue","remove_red_eye","remove_shopping_cart","reorder","repeat","repeat_one","replay","replay_10","replay_30","replay_5","reply","reply_all","report","report_problem","restaurant","restaurant_menu","restore","restore_page","ring_volume","room","room_service","rotate_90_degrees_ccw","rotate_left","rotate_right","rounded_corner","router","rowing","rss_feed","rv_hookup","satellite","save","scanner","schedule","school","screen_lock_landscape","screen_lock_portrait","screen_lock_rotation","screen_rotation","screen_share","sd_card","sd_storage","search","security","select_all","send","sentiment_dissatisfied","sentiment_neutral","sentiment_satisfied","sentiment_very_dissatisfied","sentiment_very_satisfied","settings","settings_applications","settings_backup_restore","settings_bluetooth","settings_brightness","settings_cell","settings_ethernet","settings_input_antenna","settings_input_component","settings_input_composite","settings_input_hdmi","settings_input_svideo","settings_overscan","settings_phone","settings_power","settings_remote","settings_system_daydream","settings_voice","share","shop","shop_two","shopping_basket","shopping_cart","short_text","show_chart","shuffle","signal_cellular_4_bar","signal_cellular_connected_no_internet_4_bar","signal_cellular_no_sim","signal_cellular_null","signal_cellular_off","signal_wifi_4_bar","signal_wifi_4_bar_lock","signal_wifi_off","sim_card","sim_card_alert","skip_next","skip_previous","slideshow","slow_motion_video","smartphone","smoke_free","smoking_rooms","sms","sms_failed","snooze","sort","sort_by_alpha","spa","space_bar","speaker","speaker_group","speaker_notes","speaker_notes_off","speaker_phone","spellcheck","star","star_border","star_half","stars","stay_current_landscape","stay_current_portrait","stay_primary_landscape","stay_primary_portrait","stop","stop_screen_share","storage","store","store_mall_directory","straighten","streetview","strikethrough_s","style","subdirectory_arrow_left","subdirectory_arrow_right","subject","subscriptions","subtitles","subway","supervisor_account","surround_sound","swap_calls","swap_horiz","swap_vert","swap_vertical_circle","switch_camera","switch_video","sync","sync_disabled","sync_problem","system_update","system_update_alt","tab","tab_unselected","tablet","tablet_android","tablet_mac","tag_faces","tap_and_play","terrain","text_fields","text_format","textsms","texture","theaters","thumb_down","thumb_up","thumbs_up_down","time_to_leave","timelapse","timeline","timer","timer_10","timer_3","timer_off","title","toc","today","toll","tonality","touch_app","toys","track_changes","traffic","train","tram","transfer_within_a_station","transform","translate","trending_down","trending_flat","trending_up","tune","turned_in","turned_in_not","tv","unarchive","undo","unfold_less","unfold_more","update","usb","verified_user","vertical_align_bottom","vertical_align_center","vertical_align_top","vibration","video_call","video_label","video_library","videocam","videocam_off","videogame_asset","view_agenda","view_array","view_carousel","view_column","view_comfy","view_compact","view_day","view_headline","view_list","view_module","view_quilt","view_stream","view_week","vignette","visibility","visibility_off","voice_chat","voicemail","volume_down","volume_mute","volume_off","volume_up","vpn_key","vpn_lock","wallpaper","warning","watch","watch_later","wb_auto","wb_cloudy","wb_incandescent","wb_iridescent","wb_sunny","wc","web","web_asset","weekend","whatshot","widgets","wifi","wifi_lock","wifi_tethering","work","wrap_text","youtube_searched_for","zoom_in","zoom_out","zoom_out_map"]),Fe=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).state={show:!1,icons_list:we,current_icon:a.props.icon?a.props.icon:"add_a_photo",search_text:"",size:a.props.size},a.searchRef=null,a.setSearchRef=function(e){a.searchRef=e,a.searchRef&&a.searchRef.focus()},a.handleClickIcon=a.handleClickIcon.bind(Object(g.a)(a)),a.handleSearchChange=a.handleSearchChange.bind(Object(g.a)(a)),a.handleClickPickerIcon=a.handleClickPickerIcon.bind(Object(g.a)(a)),a.handleClickClose=a.handleClickClose.bind(Object(g.a)(a)),a}return Object(m.a)(n,[{key:"handleClickIcon",value:function(){this.setState({show:!0})}},{key:"handleSearchChange",value:function(e){console.log(e.target.value),this.setState({search_text:e.target.value});var t=we.filter((function(t){return t.includes(e.target.value.toLowerCase())}));this.setState({icons_list:t})}},{key:"handleClickPickerIcon",value:function(e){this.setState({current_icon:this.state.icons_list[e]}),this.setState({show:!1}),this.props.setIcon&&this.props.setIcon(this.state.icons_list[e])}},{key:"handleClickClose",value:function(){this.setState({show:!1})}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{children:[Object(a.jsx)(le.a,{title:"Click to change icon",children:Object(a.jsx)("i",{className:"material-icons material-icon-picker-prefix prefix",onClick:this.handleClickIcon,style:{cursor:"pointer",backgroundColor:"#FFFFFF",border:"1px solid #000000",borderRadius:"10px",fontSize:this.state.size,padding:"10px"},children:this.state.current_icon})}),this.state.show?Object(a.jsxs)("div",{className:"material-icon-picker",tabIndex:"-1",style:{zIndex:"1"},ref:this.setPickerRef,children:[Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[Object(a.jsx)("input",{type:"text",placeholder:"Search...",value:this.state.search_text,onChange:this.handleSearchChange,ref:this.setSearchRef,style:{width:"80%"}}),Object(a.jsx)(le.a,{title:"Close",children:Object(a.jsx)(L.a,{style:{cursor:"pointer",backgroundColor:"#CCCCCC",border:"1px solid #666666",borderRadius:"10px",padding:"2px"},onClick:this.handleClickClose})})]}),Object(a.jsx)("div",{className:"icons",children:0===this.state.icons_list.length?Object(a.jsx)("i",{children:"No matches!"}):this.state.icons_list.map((function(t,n){return Object(a.jsx)("i",{className:"material-icons",onClick:function(){return e.handleClickPickerIcon(n)},children:t},n)}))})]}):null]})}}]),n}(o.a.Component),Se=n(682),Ie=Object(P.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,n=e.classes,i=e.onClose,o=Object(w.a)(e,["children","classes","onClose"]);return Object(a.jsxs)(T.a,Object(k.a)(Object(k.a)({disableTypography:!0,className:n.root},o),{},{children:[Object(a.jsx)(E.a,{variant:"h6",children:t}),i?Object(a.jsx)(R.a,{"aria-label":"close",className:n.closeButton,onClick:i,children:Object(a.jsx)(L.a,{style:{color:"#000000"}})}):null]}))})),De=Object(P.a)((function(e){return{root:{padding:e.spacing(2)}}}))(S.a),Pe=Object(P.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(Se.a),Te=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(){return Object(x.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(F.a,{onClose:this.props.handleClose,"aria-labelledby":"customized-dialog-title",open:this.props.open,fullWidth:!0,maxWidth:"md",children:[Object(a.jsx)(Ie,{id:"customized-dialog-title",onClose:this.props.handleClose,style:{backgroundColor:this.props.headerBgColor||"#ffd180"},children:Object(a.jsx)("b",{children:this.props.title})}),Object(a.jsx)(De,{dividers:!0,children:this.props.content}),Object(a.jsx)(Pe,{children:Object(a.jsx)(y.a,{autoFocus:!0,onClick:this.props.handleClose,color:"primary",children:"OK"})})]})}}]),n}(o.a.Component),Ee=n(448),Re=Object(P.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,n=e.classes,i=e.onClose,o=Object(w.a)(e,["children","classes","onClose"]);return Object(a.jsxs)(T.a,Object(k.a)(Object(k.a)({disableTypography:!0,className:n.root},o),{},{children:[Object(a.jsx)(E.a,{variant:"h6",children:t}),i?Object(a.jsx)(R.a,{"aria-label":"close",className:n.closeButton,onClick:i,children:Object(a.jsx)(L.a,{style:{color:"#000000"}})}):null]}))})),Ae=Object(P.a)((function(e){return{root:{padding:e.spacing(2)}}}))(S.a),Le=Object(P.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(Se.a),Me=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(){return Object(x.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{children:Object(a.jsxs)(F.a,{onClose:function(){return e.props.handleClose(!1)},"aria-labelledby":"customized-dialog-title",open:this.props.open,fullWidth:!0,maxWidth:this.props.size||"md",disableBackdropClick:!0,disableEscapeKeyDown:!0,children:[Object(a.jsx)(Re,{id:"customized-dialog-title",onClose:function(){return e.props.handleClose(!1)},style:{backgroundColor:this.props.headerBgColor||"#ffd180"},children:Object(a.jsx)("span",{style:{fontWeight:"bolder",fontSize:18},children:this.props.title})}),Object(a.jsx)(Ae,{dividers:!0,children:"string"===typeof this.props.content?Object(a.jsx)(E.a,{gutterBottom:!0,children:Object(Ee.a)(this.props.content)}):this.props.content}),Object(a.jsx)(Le,{children:Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",paddingLeft:"2.5%",paddingRight:"2.5%",paddingTop:"20px",paddingBottom:"20px",width:"100%"},children:[Object(a.jsx)(y.a,{variant:"contained",color:"primary",style:{width:"150px",backgroundColor:"#FF9800",color:"#000000",fontWeight:"bold",border:"solid",borderColor:"#000000",borderWidth:"1px"},onClick:function(){return e.props.handleClose(!1)},children:"Cancel"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),this.props.clickHelp&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(y.a,{variant:"contained",color:"primary",style:{width:"150px",backgroundColor:"#01579B",color:"#FFFFFF",fontWeight:"bold",border:"solid",borderColor:"#000000",borderWidth:"1px"},onClick:this.props.clickHelp,children:"Help"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{})]}),Object(a.jsx)(y.a,{variant:"contained",color:"primary",style:{width:"150px",backgroundColor:"#8BC34A",color:"#000000",fontWeight:"bold",border:"solid",borderColor:"#000000",borderWidth:"1px"},onClick:function(){return e.props.handleClose(!0)},children:"Proceed"})]})})]})})}}]),n}(o.a.Component),Be=n(451),Ne=n.n(Be),We=n(450),Ue=n.n(We),Ge=n(449),He=n.n(Ge),ze=n(705),Ke=n(693),Ve=Object(P.a)((function(){return{customBadge:{backgroundColor:"#388E3C",color:"white",fontSize:10}}}))((function(e){return Object(a.jsx)("td",{style:{width:"35px",padding:"5px 5px 5px 0px",textAlign:"center"},children:Object(a.jsx)(le.a,{title:"URL"===e.type?"Manual Entry":"KG Entry",placement:"left",children:Object(a.jsx)(Ke.a,{badgeContent:"KG",invisible:"URL"===e.type,anchorOrigin:{vertical:"top",horizontal:"left"},classes:{badge:e.classes.customBadge},children:Object(a.jsx)(ze.a,{style:{width:"25px",height:"25px",fontSize:14,fontWeight:"bolder",backgroundColor:"transparent",color:"#000000"},children:e.ind+1})})})})})),qe=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(){return Object(x.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsxs)("tr",{children:[Object(a.jsx)(Ve,{ind:this.props.ind,type:this.props.item.type}),Object(a.jsx)("td",{style:{padding:"5px 10px 5px 0px"},children:Object(a.jsx)("div",{style:{backgroundColor:"#FFFFFF",padding:"0px 10px"},children:Object(a.jsx)(le.a,{title:this.props.item.label||"",children:Object(a.jsx)("input",{name:"label",type:"text",value:this.props.item.label,onChange:function(t){return e.props.handleItemChanged(e.props.ind,t)}})})})}),Object(a.jsx)("td",{style:{width:this.props.numCols>2?this.props.useTabs?"27.5":"30%":this.props.useTabs?"55%":"60%",padding:"5px 10px 5px 0px"},children:Object(a.jsx)("div",{style:{backgroundColor:"#FFFFFF",padding:"0px 10px"},children:Object(a.jsx)(le.a,{title:this.props.item.url||"",children:Object(a.jsx)("input",{name:"url",type:"text",value:this.props.item.url,onChange:function(t){return e.props.handleItemChanged(e.props.ind,t)}})})})}),this.props.numCols>2&&Object(a.jsx)("td",{style:{width:this.props.useTabs?"27.5":"30%",padding:"5px 10px 5px 0px"},children:Object(a.jsx)("div",{style:{backgroundColor:"#FFFFFF",padding:"0px 10px"},children:Object(a.jsx)(le.a,{title:this.props.item.mc_url||"",children:Object(a.jsx)("input",{name:"mc_url",type:"text",value:this.props.item.mc_url,onChange:function(t){return e.props.handleItemChanged(e.props.ind,t)}})})})}),this.props.useTabs&&Object(a.jsx)("td",{style:{width:"12.5%",padding:"5px 10px 5px 0px"},children:Object(a.jsx)("div",{style:{backgroundColor:"#FFFFFF",padding:"0px 10px"},children:Object(a.jsx)(le.a,{title:this.props.item.tab_name||"",children:Object(a.jsx)("input",{name:"tab_name",type:"text",value:this.props.item.tab_name,onChange:function(t){return e.props.handleItemChanged(e.props.ind,t)}})})})}),Object(a.jsx)(Xe,{handleItemMoveDown:this.props.handleItemMoveDown,handleItemMoveUp:this.props.handleItemMoveUp,handleItemDeleted:this.props.handleItemDeleted,ind:this.props.ind,numRows:this.props.numRows})]})}}]),n}(o.a.Component),Je=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(){return Object(x.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsxs)("tr",{children:[Object(a.jsx)(Ve,{ind:this.props.ind,type:this.props.item.type}),Object(a.jsx)("td",{colSpan:this.props.numCols,children:Object(a.jsx)("table",{children:Object(a.jsxs)("tbody",{children:[Object(a.jsx)("tr",{style:{border:"None"},children:Object(a.jsx)("td",{style:{width:"100%",padding:"5px 10px 5px 0px"},children:Object(a.jsx)(le.a,{title:this.props.item.label||"",children:Object(a.jsx)(M.a,{label:"Label",variant:"outlined",fullWidth:!0,name:"label",value:this.props.item.label,onChange:function(t){return e.props.handleItemChanged(e.props.ind,t)},InputProps:{style:{backgroundColor:"#FFFFFF",padding:"5px 15px"}}})})})}),Object(a.jsx)("tr",{style:{border:"None"},children:Object(a.jsx)("td",{style:{width:"100%",padding:"5px 10px 5px 0px"},children:Object(a.jsx)(le.a,{title:this.props.item.url||"",children:Object(a.jsx)(M.a,{label:"Download URL",variant:"outlined",fullWidth:!0,name:"url",value:this.props.item.url,onChange:function(t){return e.props.handleItemChanged(e.props.ind,t)},InputProps:{style:{backgroundColor:"#FFFFFF",padding:"5px 15px"}}})})})}),this.props.numCols>2&&Object(a.jsx)("tr",{style:{border:"None"},children:Object(a.jsx)("td",{style:{width:"100%",padding:"5px 10px 5px 0px"},children:Object(a.jsx)(le.a,{title:this.props.item.mc_url||"",children:Object(a.jsx)(M.a,{label:"Model Catalog URL",variant:"outlined",fullWidth:!0,name:"mc_url",value:this.props.item.mc_url,onChange:function(t){return e.props.handleItemChanged(e.props.ind,t)},InputProps:{style:{backgroundColor:"#FFFFFF",padding:"5px 15px"}}})})})}),this.props.useTabs&&Object(a.jsx)("tr",{style:{border:"None"},children:Object(a.jsx)("td",{style:{width:"100%",padding:"5px 10px 5px 0px"},children:Object(a.jsx)(le.a,{title:this.props.item.tab_name||"",children:Object(a.jsx)(M.a,{label:"Tab Name",variant:"outlined",fullWidth:!0,name:"tab_name",value:this.props.item.tab_name,onChange:function(t){return e.props.handleItemChanged(e.props.ind,t)},InputProps:{style:{backgroundColor:"#FFFFFF",padding:"5px 15px"}}})})})})]})})}),Object(a.jsx)(Xe,{handleItemMoveDown:this.props.handleItemMoveDown,handleItemMoveUp:this.props.handleItemMoveUp,handleItemDeleted:this.props.handleItemDeleted,ind:this.props.ind,numRows:this.props.numRows})]})}}]),n}(o.a.Component),$e=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(){return Object(x.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsxs)("tr",{children:[Object(a.jsx)(Ve,{ind:this.props.ind,type:this.props.item.type}),Object(a.jsx)("td",{style:{padding:"5px 10px 5px 0px"},children:Object(a.jsx)("div",{style:{backgroundColor:"#FFFFFF",padding:"0px 10px"},children:Object(a.jsx)(le.a,{title:this.props.item.label||"",children:Object(a.jsx)("input",{name:"label",type:"text",value:this.props.item.label,onChange:function(t){return e.props.handleItemChanged(e.props.ind,t)}})})})}),Object(a.jsx)("td",{style:{width:this.props.numCols>2?this.props.useTabs?"27.5":"30%":this.props.useTabs?"55%":"60%",padding:"5px 10px 5px 0px"},children:Object(a.jsx)("div",{style:{backgroundColor:"#FFFFFF",padding:"0px 10px"},children:Object(a.jsx)(le.a,{title:this.props.item.url||"",onClick:function(){return navigator.clipboard.writeText(e.props.item.url)},children:Object(a.jsx)("input",{name:"url",type:"text",defaultValue:this.props.item.url,disabled:!0,style:{cursor:"pointer",color:"#808080"}})})})}),this.props.numCols>2&&Object(a.jsx)("td",{style:{width:this.props.useTabs?"27.5":"30%",padding:"5px 10px 5px 0px"},children:Object(a.jsx)("div",{style:{backgroundColor:"#FFFFFF",padding:"0px 10px"},children:Object(a.jsx)(le.a,{title:this.props.item.mc_url||"",onClick:function(){return navigator.clipboard.writeText(e.props.item.mc_url)},children:Object(a.jsx)("input",{name:"mc_url",type:"text",defaultValue:this.props.item.mc_url,disabled:!0,style:{cursor:"pointer",color:"#808080"}})})})}),this.props.useTabs&&Object(a.jsx)("td",{style:{width:"12.5%",padding:"5px 10px 5px 0px"},children:Object(a.jsx)("div",{style:{backgroundColor:"#FFFFFF",padding:"0px 10px"},children:Object(a.jsx)(le.a,{title:this.props.item.tab_name||"",children:Object(a.jsx)("input",{name:"tab_name",type:"text",value:this.props.item.tab_name,onChange:function(t){return e.props.handleItemChanged(e.props.ind,t)}})})})}),Object(a.jsx)(Xe,{handleItemMoveDown:this.props.handleItemMoveDown,handleItemMoveUp:this.props.handleItemMoveUp,handleItemDeleted:this.props.handleItemDeleted,ind:this.props.ind,numRows:this.props.numRows})]})}}]),n}(o.a.Component),Ye=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(){return Object(x.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsxs)("tr",{children:[Object(a.jsx)(Ve,{ind:this.props.ind,type:this.props.item.type}),Object(a.jsx)("td",{colSpan:this.props.numCols,children:Object(a.jsx)("table",{children:Object(a.jsxs)("tbody",{children:[Object(a.jsx)("tr",{style:{border:"None"},children:Object(a.jsx)("td",{style:{width:"100%",padding:"5px 10px 5px 0px"},children:Object(a.jsx)(le.a,{title:this.props.item.label||"",children:Object(a.jsx)(M.a,{label:"Label",variant:"outlined",fullWidth:!0,name:"label",value:this.props.item.label,onChange:function(t){return e.props.handleItemChanged(e.props.ind,t)},InputProps:{style:{backgroundColor:"#FFFFFF",padding:"5px 15px"}}})})})}),Object(a.jsx)("tr",{style:{border:"None"},children:Object(a.jsx)("td",{style:{width:"100%",padding:"5px 10px 5px 0px"},children:Object(a.jsx)(le.a,{title:this.props.item.url||"",onClick:function(){return navigator.clipboard.writeText(e.props.item.url)},children:Object(a.jsx)(M.a,{label:"Download URL",variant:"outlined",fullWidth:!0,name:"url",defaultValue:this.props.item.url,disabled:!0,style:{cursor:"pointer",color:"#808080"},InputProps:{style:{backgroundColor:"#FFFFFF",color:"#808080",padding:"5px 15px",cursor:"pointer"}}})})})}),this.props.numCols>2&&Object(a.jsx)("tr",{style:{border:"None"},children:Object(a.jsx)("td",{style:{width:"100%",padding:"5px 10px 5px 0px"},children:Object(a.jsx)(le.a,{title:this.props.item.mc_url||"",onClick:function(){return navigator.clipboard.writeText(e.props.item.mc_url)},children:Object(a.jsx)(M.a,{label:"Model Catalog URL",variant:"outlined",fullWidth:!0,name:"mc_url",defaultValue:this.props.item.mc_url,disabled:!0,style:{cursor:"pointer",color:"#808080"},InputProps:{style:{backgroundColor:"#FFFFFF",color:"#808080",padding:"5px 15px",cursor:"pointer"}}})})})}),this.props.useTabs&&Object(a.jsx)("tr",{style:{border:"None"},children:Object(a.jsx)("td",{style:{width:"100%",padding:"5px 10px 5px 0px"},children:Object(a.jsx)(le.a,{title:this.props.item.tab_name||"",children:Object(a.jsx)(M.a,{label:"Tab Name",variant:"outlined",fullWidth:!0,name:"tab_name",value:this.props.item.tab_name,onChange:function(t){return e.props.handleItemChanged(e.props.ind,t)},InputProps:{style:{backgroundColor:"#FFFFFF",padding:"5px 15px"}}})})})})]})})}),Object(a.jsx)(Xe,{handleItemMoveDown:this.props.handleItemMoveDown,handleItemMoveUp:this.props.handleItemMoveUp,handleItemDeleted:this.props.handleItemDeleted,ind:this.props.ind,numRows:this.props.numRows})]})}}]),n}(o.a.Component),Xe=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(){return Object(x.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsx)("td",{style:{width:"100px",padding:"5px 0px 5px 10 px"},children:Object(a.jsxs)("div",{style:{textAlign:"center"},children:[Object(a.jsx)(le.a,{title:"Move down",children:Object(a.jsx)(R.a,{color:"primary",size:"small","aria-label":"move down",component:"span",style:{paddingRight:"5px"},onClick:function(t){return e.props.handleItemMoveDown(e.props.ind)},children:Object(a.jsx)(re.a,{stroke:"#000000",strokeWidth:1,style:{transform:"rotate(90deg)",color:this.props.ind===this.props.numRows-1?"#A1887F":"#000000"},fontSize:"small"})})}),Object(a.jsx)(le.a,{title:"Move up",children:Object(a.jsx)(R.a,{color:"primary",size:"small","aria-label":"move up",component:"span",style:{paddingRight:"5px"},onClick:function(t){return e.props.handleItemMoveUp(e.props.ind,t)},children:Object(a.jsx)(re.a,{stroke:"#000000",strokeWidth:1,style:{transform:"rotate(270deg)",color:0===this.props.ind?"#A1887F":"#000000"},fontSize:"small"})})}),Object(a.jsx)(le.a,{title:"Delete",children:Object(a.jsx)(R.a,{color:"secondary",size:"small","aria-label":"delete",component:"span",onClick:function(t){return e.props.handleItemDeleted(e.props.ind,t)},children:Object(a.jsx)(oe.a,{fontSize:"small"})})})]})})}}]),n}(o.a.Component),Ze=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).state={showHelp:!1,dataOk:!0,data:e.data,expandTable:!1},a.handleAdd=a.handleAdd.bind(Object(g.a)(a)),a.handleItemChanged=a.handleItemChanged.bind(Object(g.a)(a)),a.handleItemMoveDown=a.handleItemMoveDown.bind(Object(g.a)(a)),a.handleItemMoveUp=a.handleItemMoveUp.bind(Object(g.a)(a)),a.handleItemDeleted=a.handleItemDeleted.bind(Object(g.a)(a)),a.toggleExpand=a.toggleExpand.bind(Object(g.a)(a)),a}return Object(m.a)(n,[{key:"handleAdd",value:function(){var e=this.props.items;e.push({type:"URL",label:"",url:"",mc_url:"",tab_name:"",identifier:null}),this.props.onChangeValue(e)}},{key:"handleItemChanged",value:function(e,t){var n=this.props.items;n[e][t.target.name]=t.target.value,this.props.onChangeValue(n)}},{key:"handleItemMoveDown",value:function(e){if(console.log("Move down item with index: "+e),e<this.props.items.length){var t=this.props.items;t=de()(t,e,e+1),this.props.onChangeValue(t)}}},{key:"handleItemMoveUp",value:function(e){if(console.log("Move up item with index: "+e),e>0){var t=this.props.items;t=de()(t,e,e-1),this.props.onChangeValue(t)}}},{key:"handleItemDeleted",value:function(e){var t=this.props.items;t.splice(e,1),this.props.onChangeValue(t),0===t.length&&this.setState({expandTable:!1})}},{key:"toggleExpand",value:function(){this.props.items.length>0&&this.setState((function(e){return{expandTable:!e.expandTable}}))}},{key:"renderRows",value:function(e,t){var n=this,i=this.props.items;return i.map((function(s,r){return Object(a.jsx)(o.a.Fragment,{children:"URL"===s.type?n.state.expandTable?Object(a.jsx)(Je,{item:s,handleItemChanged:n.handleItemChanged,ind:r,numCols:e,numRows:i.length,useTabs:t,handleItemMoveDown:n.handleItemMoveDown,handleItemMoveUp:n.handleItemMoveUp,handleItemDeleted:n.handleItemDeleted}):Object(a.jsx)(qe,{item:s,handleItemChanged:n.handleItemChanged,ind:r,numCols:e,numRows:i.length,useTabs:t,handleItemMoveDown:n.handleItemMoveDown,handleItemMoveUp:n.handleItemMoveUp,handleItemDeleted:n.handleItemDeleted}):n.state.expandTable?Object(a.jsx)(Ye,{item:s,handleItemChanged:n.handleItemChanged,ind:r,numCols:e,numRows:i.length,useTabs:t,handleItemMoveDown:n.handleItemMoveDown,handleItemMoveUp:n.handleItemMoveUp,handleItemDeleted:n.handleItemDeleted}):Object(a.jsx)($e,{item:s,handleItemChanged:n.handleItemChanged,ind:r,numCols:e,numRows:i.length,useTabs:t,handleItemMoveDown:n.handleItemMoveDown,handleItemMoveUp:n.handleItemMoveUp,handleItemDeleted:n.handleItemDeleted})},"item-"+r)}))}},{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsxs)("table",{children:[!this.state.expandTable&&Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{padding:"5px 10px",textAlign:"center"},children:"#"}),Object(a.jsx)("th",{style:{padding:"5px 10px"},children:"Label"}),Object(a.jsx)("th",{style:{padding:"5px 10px"},children:"Download URL"}),this.props.numCols>2&&Object(a.jsx)("th",{style:{padding:"5px 10px"},children:"Model Catalog URL"}),this.props.useTabs&&Object(a.jsx)("th",{style:{padding:"5px 10px"},children:"Tab Name"}),Object(a.jsx)("th",{style:{padding:"5px 0px 5px 10 px"}})]})}),Object(a.jsx)("tbody",{children:this.renderRows(this.props.numCols,this.props.useTabs)})]}),Object(a.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",paddingTop:"20px"},children:[Object(a.jsx)(y.a,{variant:"contained",color:"primary",onClick:this.toggleExpand,style:{width:"160px",marginRight:"25px",backgroundColor:"#795548"},startIcon:Object(a.jsx)(He.a,{}),children:"Expand Table"}),Object(a.jsx)(y.a,{variant:"contained",color:"primary",onClick:this.props.handleEdit,style:{width:"160px",marginRight:"25px",backgroundColor:"#B71C1C"},startIcon:Object(a.jsx)(Ue.a,{}),children:"Edit Source"}),this.props.handleKG&&Object(a.jsx)(y.a,{variant:"contained",color:"primary",onClick:this.props.handleKG,style:{width:"160px",marginRight:"25px",backgroundColor:"#388E3C"},startIcon:Object(a.jsx)(Ne.a,{}),children:"Add From KG"}),Object(a.jsx)(y.a,{variant:"contained",color:"primary",onClick:this.handleAdd.bind(this),style:{width:"160px"},startIcon:Object(a.jsx)(pe.a,{}),children:"Add Row"})]})]})}}]),n}(o.a.Component),Qe=(n(545),function(e){var t=e.id,n=e.name,i=e.checked,o=e.onChange,s=e.optionLabels,r=e.small,l=e.disabled;return Object(a.jsxs)("div",{className:"toggle-switch"+(r?" small-switch":""),children:[Object(a.jsx)("input",{type:"checkbox",name:n,className:"toggle-switch-checkbox",id:t,checked:i,onChange:function(e){return o(e.target.checked)},disabled:l}),t?Object(a.jsxs)("label",{className:"toggle-switch-label",tabIndex:l?-1:1,onKeyDown:function(e){return function(e){32===e.keyCode&&(e.preventDefault(),o(!i))}(e)},htmlFor:t,children:[Object(a.jsx)("span",{className:l?"toggle-switch-inner toggle-switch-disabled":"toggle-switch-inner","data-yes":s[0],"data-no":s[1],tabIndex:-1}),Object(a.jsx)("span",{className:l?"toggle-switch-switch toggle-switch-disabled":"toggle-switch-switch",tabIndex:-1})]}):null]})});Qe.defaultProps={optionLabels:["Yes","No"]};var et=Qe,tt=n(695),nt=n(696),at=n(697),it=n(93),ot=n.n(it),st=n(94),rt=n.n(st),lt=n(95),ct=n.n(lt),dt=n(66);function ht(){var e=Object(ke.a)(["\n  & > .y {\n    display: block;\n  }\n  & > .n {\n    display: none;\n  }\n  .Mui-expanded & > .n {\n    display: block;\n  }\n  .Mui-expanded & > .y {\n    display: none;\n  }\n"]);return ht=function(){return e},e}function pt(){return Object(a.jsxs)("div",{children:["The morphology data can be input in the following format:",Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("h6",{children:Object(a.jsx)("b",{children:"List of dicts/objects"})}),"Each dict in the list should have keys named 'type', 'url', 'label', 'identifier' and 'tab_name'. The 'identifier' field corresponds to the Knowledge Graph UUID. For manually entered items, 'type' and 'identifier' can be set to 'URL' and 'null', respectively. ",Object(a.jsx)("i",{children:"Example:"}),Object(a.jsx)("br",{}),Object(a.jsx)("pre",{children:Object(a.jsx)("code",{children:'\n    [\n        {\n          "type": "URL",\n          "url": "https://www.datasource.com/morphologies/oh140807_A0_idB.asc",\n          "label": "file_A",\n          "identifier": null,\n          "tab_name": "Group A"\n        },\n        {\n          "type": "URL",\n          "url": "https://www.datasource.com/morphologies/oh140807_A0_idC.asc",\n          "label": "file_B",\n          "identifier": null,\n          "tab_name": "Group A"\n        },\n        {\n          "type": "URL",\n          "url": "https://www.datasource.com/morphologies/oh140807_A0_idF.asc",\n          "label": "file_C",\n          "identifier": null,\n          "tab_name": "Group A"\n        },\n        {\n          "type": "URL",\n          "url": "https://www.datasource.com/morphologies/oh140807_A0_idG.asc",\n          "label": "file_D",\n          "identifier": null,\n          "tab_name": "Group B"\n        },\n        {\n          "type": "URL",\n          "url": "https://www.datasource.com/morphologies/oh140807_A0_idH.asc",\n          "label": "file_E",\n          "identifier": null,\n          "tab_name": "Group B"\n        },\n      ]'})})]})}var ut=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).state={showHelp:!1,dataOk:!0,data:e.data},a.clickHelp=a.clickHelp.bind(Object(g.a)(a)),a.handleHelpClose=a.handleHelpClose.bind(Object(g.a)(a)),a.handleDataInputOnBlur=a.handleDataInputOnBlur.bind(Object(g.a)(a)),a.handleSaveData=a.handleSaveData.bind(Object(g.a)(a)),a}return Object(m.a)(n,[{key:"clickHelp",value:function(){this.setState({showHelp:!0})}},{key:"handleHelpClose",value:function(){this.setState({showHelp:!1})}},{key:"handleDataInputOnBlur",value:function(e){if(function(e){try{return"object"===typeof JSON.parse(e)}catch(t){return!1}}(e.target.value)){console.log("Input: JSON");var t=JSON.parse(e.target.value);Array.isArray(t)&&t.every((function(e){return"object"===typeof e&&null!==e&&"url"in e&&"label"in e&&"tab_name"in e&&"string"===typeof e.url&&"string"===typeof e.label&&"string"===typeof e.tab_name}))?(console.log("Input: JSON - list of dicts"),this.setState({dataOk:!0,data:t})):(console.log("Input: JSON - invalid format"),this.setState({dataOk:!1}))}else console.log("Data not in proper format!"),this.setState({dataOk:!1})}},{key:"handleSaveData",value:function(e){e?(console.log(e),this.state.dataOk?(console.log("Saved"),this.props.onChangeValue(this.state.data),this.props.handleClose()):(console.log("Error"),console.log("Edited data not in proper format!"))):this.props.handleClose()}},{key:"renderContent",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsxs)(G.a,{item:!0,xs:12,children:[Object(a.jsx)(M.a,{multiline:!0,rows:"8",label:"Edit source code for listing:",variant:"outlined",fullWidth:!0,helperText:"Click 'Help' for info on input format.",name:"data",defaultValue:JSON.stringify(this.state.data,null,4),onBlur:this.handleDataInputOnBlur,error:!this.state.dataOk,InputProps:{style:{padding:"15px 15px",backgroundColor:"#FFFFFF"}}}),!this.state.dataOk&&Object(a.jsx)("div",{style:{color:"red",paddingTop:"10px"},children:Object(a.jsx)("strong",{children:"Data not in expected format! Click on 'Help' for more info."})})]}),this.state.showHelp?Object(a.jsx)(Te,{open:this.state.showHelp,title:"Data Input",headerBgColor:"#FF9800",content:Object(a.jsx)(pt,{}),handleClose:this.handleHelpClose}):null]})}},{key:"render",value:function(){return console.log(this.props),Object(a.jsx)(Me,{open:this.props.open,title:"Edit Source: "+this.props.title,headerBgColor:"#FF9800",content:this.renderContent(),handleClose:this.handleSaveData,clickHelp:this.clickHelp})}}]),n}(o.a.Component),bt=Object(dt.a)((function(e){return Object(a.jsxs)("div",Object(k.a)(Object(k.a)({},e),{},{style:{color:"#000000"},children:[Object(a.jsx)("div",{className:"y",children:Object(a.jsx)("span",{style:{verticalAlign:"middle"},children:Object(a.jsx)(ot.a,{})})}),Object(a.jsx)("div",{className:"n",children:Object(a.jsx)("span",{style:{verticalAlign:"middle"},children:Object(a.jsx)(rt.a,{})})})]}))}))(ht()),jt=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).state=Object(k.a)({order:null,type:"section_morphology",title:"Morphologies",icon:"settings_input_antenna",description:"",dataOk:!0,dataFormatted:[],showEdit:!1,deleteOpen:!1,expanded:!0,useTabs:!1},e.data),a.handleFieldChange=a.handleFieldChange.bind(Object(g.a)(a)),a.clickEdit=a.clickEdit.bind(Object(g.a)(a)),a.handleEditClose=a.handleEditClose.bind(Object(g.a)(a)),a.setIcon=a.setIcon.bind(Object(g.a)(a)),a.handleDelete=a.handleDelete.bind(Object(g.a)(a)),a.handleMoveDown=a.handleMoveDown.bind(Object(g.a)(a)),a.handleMoveUp=a.handleMoveUp.bind(Object(g.a)(a)),a.toggleExpanded=a.toggleExpanded.bind(Object(g.a)(a)),a.handleItemsChange=a.handleItemsChange.bind(Object(g.a)(a)),a.toggleUseTabs=a.toggleUseTabs.bind(Object(g.a)(a)),a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.props.storeSectionInfo(this.state)}},{key:"handleItemsChange",value:function(e){var t=this;0===e.length&&(e=[{type:"URL",label:"",url:"",identifier:null,tab_name:""}]),this.setState({dataFormatted:e},(function(){t.props.storeSectionInfo(t.state)}))}},{key:"toggleExpanded",value:function(){var e=this;console.log(this.state.expanded),this.setState((function(e){return{expanded:!e.expanded}}),(function(){e.props.storeSectionInfo(e.state)}))}},{key:"handleDelete",value:function(e){console.log(e),this.setState({deleteOpen:!1}),e&&this.props.handleDelete(this.state.order)}},{key:"handleMoveDown",value:function(e){e.stopPropagation(),this.props.handleMoveDown(this.state.order)}},{key:"handleMoveUp",value:function(e){e.stopPropagation(),this.props.handleMoveUp(this.state.order)}},{key:"handleFieldChange",value:function(e){var t=this;console.log(e);var n=e.target,a=n.value,i=n.name;this.setState(Object(N.a)({},i,a),(function(){t.props.storeSectionInfo(t.state)}))}},{key:"setIcon",value:function(e){var t=this;this.setState({icon:e},(function(){t.props.storeSectionInfo(t.state)}))}},{key:"clickEdit",value:function(){this.setState({showEdit:!0})}},{key:"handleEditClose",value:function(){this.setState({showEdit:!1})}},{key:"toggleUseTabs",value:function(){var e=this;if(this.state.useTabs){var t=this.state.dataFormatted;t.forEach((function(e,t){e.tab_name=""})),this.setState({dataFormatted:t,useTabs:!1},(function(){e.props.storeSectionInfo(e.state)}))}else this.setState({useTabs:!0},(function(){e.props.storeSectionInfo(e.state)}))}},{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{style:{width:"100%",paddingTop:"25px",paddingBottom:"25px"},children:Object(a.jsxs)(tt.a,{expanded:this.state.expanded,onChange:this.toggleExpanded,children:[Object(a.jsx)(nt.a,{expandIcon:Object(a.jsx)(bt,{}),"aria-controls":"panel1a-content",id:"panel1a-header",style:{display:"flex",justifyContent:"space-between",borderStyle:"solid",borderColor:"#E65100",borderWidth:"2px",backgroundColor:"#FF9800",fontWeight:"bold",color:"#000000",width:"100%",paddingRight:"25px"},children:Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",flexDirection:"row",width:"100%"},children:[Object(a.jsx)("div",{style:{fontWeight:"bolder",fontSize:16,color:"#000000"},children:Object(a.jsx)("span",{style:{verticalAlign:"middle"},children:"Section: Neuronal Morphology"})}),Object(a.jsxs)("div",{children:[Object(a.jsx)(le.a,{title:"Delete this section",children:Object(a.jsx)(ct.a,{style:{height:"25px",width:"25px",marginRight:"30px",color:"#000000"},onClick:function(t){t.stopPropagation(),e.setState({deleteOpen:!0})},onFocus:function(e){return e.stopPropagation()}})}),Object(a.jsx)(le.a,{title:"Move section down",children:Object(a.jsx)(re.a,{stroke:"#000000",strokeWidth:1,style:{marginRight:"30px",transform:"rotate(90deg)",color:this.state.order===this.props.numResources-1?"#A1887F":"#000000"},onClick:function(t){return e.handleMoveDown(t)},onFocus:function(e){return e.stopPropagation()}})}),Object(a.jsx)(le.a,{title:"Move section up",children:Object(a.jsx)(re.a,{stroke:"#000000",strokeWidth:1,style:{marginRight:"20px",transform:"rotate(270deg)",color:0===this.state.order?"#A1887F":"#000000"},onClick:function(t){return e.handleMoveUp(t)},onFocus:function(e){return e.stopPropagation()}})})]})]})}),Object(a.jsx)(at.a,{style:{paddingLeft:0,paddingRight:0,paddingBottom:0},children:Object(a.jsxs)("div",{style:{backgroundColor:"#FFECD1",width:"100%"},children:[Object(a.jsxs)("div",{style:{marginLeft:"10px",marginRight:"10px"},children:[Object(a.jsx)("br",{}),Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(a.jsx)("div",{style:{width:"50px"},children:Object(a.jsx)(Fe,{size:"35px",icon:this.state.icon,setIcon:this.setIcon})}),Object(a.jsx)("div",{style:{paddingLeft:"20px",flexGrow:1},children:Object(a.jsx)(M.a,{label:"Section Title",variant:"outlined",fullWidth:!0,name:"title",value:this.state.title,onChange:this.handleFieldChange,InputProps:{style:{padding:"5px 15px",backgroundColor:"#FFFFFF"}}})})]}),Object(a.jsx)("br",{}),Object(a.jsx)(G.a,{item:!0,xs:12,children:Object(a.jsx)(M.a,{multiline:!0,rows:"2",label:"Description of morphologies (optional)",variant:"outlined",fullWidth:!0,helperText:"The description may be formatted with Markdown",name:"description",value:this.state.description,onChange:this.handleFieldChange,InputProps:{style:{padding:"15px 15px",backgroundColor:"#FFFFFF"}}})}),Object(a.jsx)("br",{}),Object(a.jsxs)(G.a,{item:!0,xs:12,style:{paddingLeft:"10px",paddingBottom:"20px"},children:[Object(a.jsx)("span",{style:{paddingRight:"10px"},children:"Do you wish to use tabs to group items in this section?"}),Object(a.jsx)(et,{id:"morphologiesTabs",checked:this.state.useTabs,onChange:this.toggleUseTabs})]}),this.state.useTabs&&Object(a.jsx)(G.a,{item:!0,xs:12,style:{paddingLeft:"10px",paddingBottom:"20px"},children:Object(a.jsx)("em",{children:"Note: All items to be grouped together should be assigned the same tab name."})}),Object(a.jsx)(Ze,{items:this.state.dataFormatted,onChangeValue:this.handleItemsChange,handleEdit:this.clickEdit,numCols:2,useTabs:this.state.useTabs}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),this.state.showEdit?Object(a.jsx)(ut,{open:this.state.showEdit,title:this.state.title,data:this.state.dataFormatted,onChangeValue:this.handleItemsChange,handleClose:this.handleEditClose}):null]}),Object(a.jsx)(Me,{open:this.state.deleteOpen,title:"Please confirm to delete!",headerBgColor:"#FF9800",content:"Do you wish to delete the morphology resource section with title: <b>"+this.state.title+"</b>",handleClose:this.handleDelete,size:"xs",onChangeValue:this.handleItemsChange})]})})]})})}}]),n}(o.a.Component),ft=n(278),xt=n(247),mt=n.n(xt),gt=n(246),Ot=n.n(gt),vt=n(250),yt=n.n(vt),_t=n(440),Ct=n(248),kt=n.n(Ct),wt=n(249),Ft=n.n(wt),St=n(103),It=n.n(St),Dt=function(e){return e.split("\n").map((function(e,t){return Object(a.jsxs)(o.a.Fragment,{children:[e,Object(a.jsx)("br",{})]},"".concat(e,"-").concat(t))}))};function Pt(e){var t="Error code = "+e.status;return"string"===typeof e.data.detail?t+="\n\n"+e.data.detail:e.data.detail.forEach((function(e,n){var a=e.loc.join(" -> "),i=e.msg;t+="\n\n",t+="Error source #"+(n+1)+": "+a,t+="\nError message: "+i})),t}function Tt(e){return Object(a.jsxs)(F.a,{open:e.open,onClose:e.handleErrorDialogClose,"aria-labelledby":"simple-ErrorDialog-title",maxWidth:"sm",children:[Object(a.jsx)(T.a,{style:{backgroundColor:"#ffd180"},children:Object(a.jsx)("span",{style:{fontWeight:"bolder",fontSize:18},children:"There seems to be a problem..."})}),Object(a.jsx)(S.a,{children:Object(a.jsx)(ft.a,{my:2,children:Object(a.jsx)(E.a,{variant:"body1",gutterBottom:!0,children:e.error?"string"===typeof e.error?Dt(e.error):Dt(Pt(e.error)):"Please report this error at:\nhttps://github.com/appukuttan-shailesh/live-paper-builder/issues"})})}),Object(a.jsx)(Se.a,{children:Object(a.jsx)(y.a,{onClick:e.handleErrorDialogClose,color:"primary",children:"Close"})})]})}var Et=n(400);function Rt(e){return"relative"===(e.position||"relative")?Object(a.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"50px",marginBottom:"50px"},children:Object(a.jsx)(Et.a,{size:e.size||30})}):Object(a.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:Object(a.jsx)(Et.a,{})})}var At=n(438);function Lt(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"default",i=e(n,{variant:a,anchorOrigin:{vertical:"bottom",horizontal:"right"},onClick:function(){t(i)}})}function Mt(e){return null===e?e:"string"===typeof e?""===e?null:e:Array.isArray(e)?e.map((function(e){return Mt(e)})):"object"===typeof e?(Object.entries(e).map((function(t){var n=Object(u.a)(t,2),a=n[0],i=n[1];return e[a]=Mt(i)})),e):e}function Bt(e){return null===e?"":"string"===typeof e?e:Array.isArray(e)?e.map((function(e){return Bt(e)})):"object"===typeof e?(Object.entries(e).map((function(t){var n=Object(u.a)(t,2),a=n[0],i=n[1];return e[a]=Bt(i)})),e):e}function Nt(e,t){return e.order<t.order?-1:1}function Wt(e){return e?e.map((function(e){return e.given_name+" "+e.family_name})).join(", "):""}function Ut(e){var t="";for(var n in e){var a,i=Object(W.a)(e[n]);try{for(i.s();!(a=i.n()).done;){var o=a.value;t+="&".concat(n,"=").concat(o)}}catch(s){i.e(s)}finally{i.f()}}return t.slice(1)}var Gt=Object(be.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:700,maxWidth:900},noLabel:{marginTop:e.spacing(3)}}})),Ht={PaperProps:{style:{maxHeight:416,width:250}}};function zt(e){var t,n=Gt(),i="select-"+e.label.replace(" ","-"),o=i+"-label",s=e.label.replace(" ","_");return Object(a.jsx)("div",{children:Object(a.jsxs)(ge.a,{className:n.formControl,children:[Object(a.jsx)(fe.a,{id:o,children:(t=e.label,["id","uri"].indexOf(t)>-1?t=t.toUpperCase():("project_id"===t&&(t="collab_id"),t=(t=(t=t.replace(/_/g," ")).replace(/-/g," ")).toLowerCase().split(" ").map((function(e){return"id"===e?"ID":e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")),t)}),Object(a.jsx)(ve.a,{labelId:o,id:i,multiple:!0,value:e.value,name:s,onChange:e.handleChange,input:Object(a.jsx)(je.a,{}),renderValue:function(e){return e.join(", ")},MenuProps:Ht,children:e.itemNames.map((function(t){return Object(a.jsxs)(xe.a,{value:t,children:[Object(a.jsx)(At.a,{checked:e.value.indexOf(t)>-1}),Object(a.jsx)(Oe.a,{primary:t})]},t)}))})]})})}var Kt=n(700),Vt="https://validation-v2.brainsimulation.eu",qt="https://model-catalog.brainsimulation.eu",Jt=["species","brain_region","cell_type","model_scope","abstraction_level"],$t=["species","brain_region","cell_type"],Yt=Object(P.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,n=e.classes,i=e.onClose,o=Object(w.a)(e,["children","classes","onClose"]);return Object(a.jsxs)(T.a,Object(k.a)(Object(k.a)({disableTypography:!0,className:n.root},o),{},{children:[Object(a.jsx)(E.a,{variant:"h6",children:t}),i?Object(a.jsx)(R.a,{"aria-label":"close",className:n.closeButton,onClick:i,children:Object(a.jsx)(L.a,{style:{color:"#000000"}})}):null]}))})),Xt=Object(P.a)((function(e){return{root:{padding:e.spacing(2)}}}))(S.a),Zt=Object(P.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(Se.a),Qt=[{field:"id",title:"ID",hidden:!0},{field:"label",title:"Label"},{field:"modality",title:"Modality"},{field:"stimulation",title:"Stimulation"},{field:"timestamp",title:"Timestamp",hidden:!0},{field:"species",title:"Species",hidden:!0},{field:"cell_type",title:"Cell Type",hidden:!0},{field:"location",title:"Location",hidden:!0,hiddenByColumnsButton:!0},{field:"view_url",title:"View URL",hidden:!0,hiddenByColumnsButton:!0},{field:"parent_name",title:"Parent Name",hidden:!0,hiddenByColumnsButton:!0},{field:"parent_id",title:"Parent ID",hidden:!0,hiddenByColumnsButton:!0}];function en(e){return e.includeFlag?Object(a.jsx)(le.a,{title:"Remove trace instance from collection",placement:"top",children:Object(a.jsx)(y.a,{variant:"contained",style:{backgroundColor:"#FF5722",border:"solid",borderColor:"#000000",borderWidth:"1px",width:"150px"},startIcon:Object(a.jsx)(Ot.a,{}),onClick:function(){return e.removeInstanceCollection(e.trace_id,e.instance_id)},children:"Remove"})}):Object(a.jsx)(le.a,{title:"Add trace instance to collection",placement:"top",children:Object(a.jsx)(y.a,{variant:"contained",style:{backgroundColor:"#81C784",border:"solid",borderColor:"#000000",borderWidth:"1px",width:"150px"},startIcon:Object(a.jsx)(mt.a,{}),onClick:function(){return e.addInstanceCollection(e.trace_id,e.trace_name,e.instance_id,e.instance_name,e.source_url,e.view_url)},children:"Add"})})}function tn(e){return Object(a.jsx)("div",{style:{width:"1000px"},children:Object(a.jsx)(G.a,{container:!0,children:Object(a.jsx)(G.a,{item:!0,xs:9,children:Object(a.jsx)(ft.a,{component:"div",my:2,bgcolor:"white",overflow:"scroll",border:1,borderColor:"grey.500",borderRadius:10,style:{padding:10,cursor:"pointer"},whiteSpace:"nowrap",children:e.value||""})})})})}var nn=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).state={selectedParam:"location"},a}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsxs)(ft.a,{my:2,pb:0,style:{backgroundColor:"#FFF1CC",marginBottom:"20px"},children:[Object(a.jsx)(G.a,{container:!0,style:{display:"flex",alignItems:"center",backgroundColor:"#FFD180"},children:Object(a.jsx)(G.a,{item:!0,xs:6,children:Object(a.jsx)(ft.a,{px:2,display:"flex",flexDirection:"row",children:Object(a.jsxs)("p",{variant:"subtitle2",children:["Record #:"," ",Object(a.jsx)("span",{style:{cursor:"pointer",fontWeight:"bold"},children:this.props.ind+1})]})})})}),Object(a.jsxs)(G.a,{container:!0,spacing:3,alignItems:"flex-end",children:[Object(a.jsx)(G.a,{item:!0,xs:9,children:Object(a.jsxs)("div",{style:{padding:"10px 0px 0px 10px"},children:[Object(a.jsx)("div",{children:["description","location"].map((function(t,n){return Object(a.jsx)(_t.a,{icon:e.state.selectedParam===t?Object(a.jsx)(kt.a,{}):Object(a.jsx)(Ft.a,{}),label:t,clickable:!0,onClick:function(){return e.setState({selectedParam:t})},variant:"outlined",style:{color:"#000000",marginRight:"10px"}},n)}))}),Object(a.jsx)(tn,{label:"param",value:this.props.instance[this.state.selectedParam]})]})}),Object(a.jsx)(G.a,{item:!0,xs:3,style:{paddingBottom:"35px"},children:Object(a.jsx)(en,{includeFlag:this.props.checkInstanceInCollection(this.props.trace_id,this.props.ind.toString()),trace_id:this.props.trace_id,trace_name:this.props.trace_name,instance_id:this.props.ind.toString(),instance_name:this.props.ind.toString(),source_url:this.props.instance.location,view_url:this.props.view_url,addInstanceCollection:this.props.addInstanceCollection,removeInstanceCollection:this.props.removeInstanceCollection})})]})]},this.props.ind)}}]),n}(o.a.Component),an=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).state={selectedParam:"source"},a}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsxs)(G.a,{item:!0,style:{backgroundColor:"#CFD8DC",padding:"20px"},children:[Object(a.jsx)(G.a,{container:!0,direction:"row",children:Object(a.jsxs)(G.a,{item:!0,style:{display:"flex",flexDirection:"row",justifyContent:"space-between",width:"100%",verticalAlign:"middle"},children:[Object(a.jsx)(E.a,{variant:"subtitle1",children:Object(a.jsx)("b",{children:"Versions"})}),Object(a.jsx)(Kt.a,{href:this.props.data.view_url,target:"_blank",rel:"noreferrer",underline:"none",children:Object(a.jsx)(y.a,{variant:"contained",style:{color:"#455A64"},startIcon:Object(a.jsx)(yt.a,{}),children:"Open Page"})})]})}),0===this.props.data.instances.length?Object(a.jsxs)("div",{style:{fontSize:14},children:[Object(a.jsx)("br",{}),"No records have yet been registered for this trace."]}):this.props.data.instances.map((function(t,n){return Object(a.jsx)("div",{style:{marginBottom:"25px"},children:Object(a.jsx)(nn,{trace_id:e.props.data.id,trace_name:e.props.data.label,instance:t,view_url:e.props.data.view_url,ind:n,addInstanceCollection:e.props.addInstanceCollection,removeInstanceCollection:e.props.removeInstanceCollection,checkInstanceInCollection:e.props.checkInstanceInCollection})},n)}))]})}}]),n}(o.a.Component),on=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).state={selectedRows:[],filtering:!1},a}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{children:[Object(a.jsx)(It.a,{title:"Electrophysiological Recordings",data:this.props.data,columns:Qt,options:{columnsButton:!0,search:!0,paging:!1,filtering:this.state.filtering,sorting:!0,exportButton:!1,maxBodyHeight:"60vh",headerStyle:{position:"sticky",top:0,backgroundColor:"#FFF",fontWeight:"bolder",fontSize:15},rowStyle:function(t){return{backgroundColor:e.state.selectedRows.includes(t.tableData.id)?"#FFD180":"#EEEEEE"}}},actions:[{icon:"filter_list",onClick:function(){return e.setState({filtering:!e.state.filtering})},position:"toolbar",tooltip:"Show Filters"}],detailPanel:function(t){return Object(a.jsx)(an,{data:t,addInstanceCollection:e.props.addInstanceCollection,removeInstanceCollection:e.props.removeInstanceCollection,checkInstanceInCollection:e.props.checkInstanceInCollection})},onRowClick:function(e,t,n){n()},components:{Toolbar:function(e){return Object(a.jsx)("div",{style:{backgroundColor:"#FFD180",fontWeight:"bolder !important"},children:Object(a.jsx)(St.MTableToolbar,Object(k.a)({},e))})}}}),Object(a.jsx)("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",paddingLeft:"2.5%",paddingRight:"2.5%",paddingTop:"10px",width:"100%"},children:Object(a.jsx)("h6",{children:"Number of trace instances selected: "+this.props.countTotalInstances()})})]})}}]),n}(o.a.Component),sn=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(e,a){var i;return Object(x.a)(this,n),(i=t.call(this,e,a)).signal=C.a.CancelToken.source(),i.state={loading:!1,list_traces:[],error:null,trace_collection:{},showFilters:!0,configFilters:{}},i.getListTraces=i.getListTraces.bind(Object(g.a)(i)),i.handleErrorDialogClose=i.handleErrorDialogClose.bind(Object(g.a)(i)),i.addInstanceCollection=i.addInstanceCollection.bind(Object(g.a)(i)),i.removeInstanceCollection=i.removeInstanceCollection.bind(Object(g.a)(i)),i.checkInstanceInCollection=i.checkInstanceInCollection.bind(Object(g.a)(i)),i.countTotalInstances=i.countTotalInstances.bind(Object(g.a)(i)),i.showFiltersPanel=i.showFiltersPanel.bind(Object(g.a)(i)),i.handleFiltersChange=i.handleFiltersChange.bind(Object(g.a)(i)),i.handleKGProceed=i.handleKGProceed.bind(Object(g.a)(i)),i}return Object(m.a)(n,[{key:"getListTraces",value:function(){var e=this,t={cancelToken:this.signal.token,headers:{Authorization:"Bearer "+this.context.auth[0].token}},n=Ut(this.state.configFilters),a="https://neural-activity-resource.brainsimulation.eu/recordings/?"+encodeURI(n)+"summary=false&size=10&from_index=0";this.setState({loading:!0}),C.a.get(a,t).then((function(t){console.log(t.data.results);var n=[];t.data.results.forEach((function(e){return n.push({id:e.identifier,label:e.label,modality:e.modality,stimulation:e.stimulation,timestamp:e.timestamp,species:e.recorded_from?e.recorded_from.species:null,cell_type:e.recorded_from?e.recorded_from.cell_type:null,instances:e.data_location,view_url:e.part_of?e.part_of.uri:null,parent_name:e.part_of?e.part_of.name:null,parent_id:e.part_of?e.part_of.identifier:null})})),console.log(n),e.setState({list_traces:n,loading:!1,error:null})})).catch((function(t){C.a.isCancel(t)?console.log("errorUpdate: ",t.message):e.setState({loading:!1,error:t})}))}},{key:"handleErrorDialogClose",value:function(){this.setState({error:null})}},{key:"addInstanceCollection",value:function(e,t,n,a,i,o){console.log("Add");var s=this.state.trace_collection;Object.keys(s).includes(e)?Object.keys(s[e]).includes(n)||(s[e][n]={label:t+" ("+a+")",source_url:i,view_url:o}):s[e]=Object(N.a)({},n,{label:t+" ("+a+")",source_url:i,view_url:o}),this.setState({trace_collection:s})}},{key:"removeInstanceCollection",value:function(e,t){console.log("Remove");var n=this.state.trace_collection;Object.keys(n).includes(e)&&(Object.keys(n[e]).includes(t)&&delete n[e][t],0===Object.keys(n[e]).length&&delete n[e]),this.setState({trace_collection:n})}},{key:"checkInstanceInCollection",value:function(e,t){var n=!1,a=this.state.trace_collection;return Object.keys(a).includes(e)&&Object.keys(a[e]).includes(t)&&(n=!0),console.log(n),n}},{key:"countTotalInstances",value:function(){var e=0,t=this.state.trace_collection;for(var n in t)e+=Object.keys(t[n]).length;return e}},{key:"showFiltersPanel",value:function(){var e=this,t=$t;return Object(a.jsxs)(ft.a,{my:2,children:[Object(a.jsx)("h6",{children:"Please specify filters to search KG:"}),Object(a.jsx)("em",{children:"Note: you can select multiple values for each filter"}),Object(a.jsx)("form",{children:t.map((function(t){return Object(a.jsx)(zt,{itemNames:e.props.validFilterValues?e.props.validFilterValues[t]:[],label:t,value:e.state.configFilters[t]||[],handleChange:e.handleFiltersChange},t)}))})]})}},{key:"handleFiltersChange",value:function(e){var t=Object(k.a)({},this.state.configFilters);t[e.target.name]=e.target.value,this.setState({configFilters:t})}},{key:"handleKGProceed",value:function(){var e=this;this.setState({showFilters:!1},(function(){e.getListTraces()}))}},{key:"render",value:function(){var e=this;return console.log(this.props),console.log(this.state),this.state.error?Object(a.jsx)(Tt,{open:Boolean(this.state.error),handleErrorDialogClose:this.handleErrorDialogClose,error:this.state.error.message||this.state.error}):Object(a.jsx)("div",{children:Object(a.jsxs)(F.a,{onClose:function(){return e.props.handleClose(!1)},"aria-labelledby":"customized-dialog-title",open:this.props.open,fullWidth:!this.state.showFilters,maxWidth:"xl",children:[Object(a.jsx)(Yt,{id:"customized-dialog-title",onClose:function(){return e.props.handleClose(!1)},style:{backgroundColor:"#ffd180"},children:Object(a.jsx)("span",{style:{fontWeight:"bolder",fontSize:18},children:"KG Data Input"})}),Object(a.jsx)(Xt,{dividers:!0,children:!this.props.validFilterValues&&this.state.showFilters||this.state.loading?Object(a.jsx)(Rt,{}):this.state.showFilters?this.showFiltersPanel():Object(a.jsx)(on,{data:this.state.list_traces,addInstanceCollection:this.addInstanceCollection,removeInstanceCollection:this.removeInstanceCollection,checkInstanceInCollection:this.checkInstanceInCollection,countTotalInstances:this.countTotalInstances})}),Object(a.jsx)(Zt,{children:Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",paddingLeft:"2.5%",paddingRight:"2.5%",paddingTop:"10px",paddingBottom:"20px",width:"100%"},children:[Object(a.jsx)(y.a,{variant:"contained",color:"primary",style:{width:"150px",backgroundColor:"#FF9800",color:"#000000",fontWeight:"bold",border:"solid",borderColor:"#000000",borderWidth:"1px"},onClick:function(){return e.props.handleClose(!1,null)},children:"Cancel"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),!this.state.showFilters&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(y.a,{variant:"contained",color:"primary",style:{width:"150px",backgroundColor:"#01579B",color:"#FFFFFF",fontWeight:"bold",border:"solid",borderColor:"#000000",borderWidth:"1px"},onClick:function(){e.setState({showFilters:!0})},children:"Filters"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{})]}),Object(a.jsx)(y.a,{variant:"contained",color:"primary",style:{width:"150px",backgroundColor:"#8BC34A",color:"#000000",fontWeight:"bold",border:"solid",borderColor:"#000000",borderWidth:"1px"},onClick:function(){return e.state.showFilters?e.handleKGProceed():e.props.handleClose(!0,e.state.trace_collection)},children:this.state.showFilters?"Proceed":"Add KG Items"})]})})]})})}}]),n}(o.a.Component);function rn(){var e=Object(ke.a)(["\n  & > .y {\n    display: block;\n  }\n  & > .n {\n    display: none;\n  }\n  .Mui-expanded & > .n {\n    display: block;\n  }\n  .Mui-expanded & > .y {\n    display: none;\n  }\n"]);return rn=function(){return e},e}function ln(){return Object(a.jsxs)("div",{children:["The traces data can be input in the following format:",Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("h6",{children:Object(a.jsx)("b",{children:"List of dicts/objects"})}),"Each dict in the list should have keys named 'type', 'url', 'label', 'identifier' and 'tab_name'. The 'identifier' field corresponds to the Knowledge Graph UUID. For manually entered items, 'type' and 'identifier' can be set to 'URL' and 'null', respectively. ",Object(a.jsx)("i",{children:"Example:"}),Object(a.jsx)("br",{}),Object(a.jsx)("pre",{children:Object(a.jsx)("code",{children:'\n    [\n        {\n          "type": "URL",\n          "url": "https://www.datasource.com/traces/oh140807_A0_idB.abf",\n          "label": "file_A",\n          "identifier": null,\n          "tab_name": "Group A"\n        },\n        {\n          "type": "URL",\n          "url": "https://www.datasource.com/traces/oh140807_A0_idC.abf",\n          "label": "file_B",\n          "identifier": null,\n          "tab_name": "Group A"\n        },\n        {\n          "type": "URL",\n          "url": "https://www.datasource.com/traces/oh140807_A0_idF.abf",\n          "label": "file_C",\n          "identifier": null,\n          "tab_name": "Group A"\n        },\n        {\n          "type": "URL",\n          "url": "https://www.datasource.com/traces/oh140807_A0_idG.abf",\n          "label": "file_D",\n          "identifier": null,\n          "tab_name": "Group A"\n        },\n        {\n          "type": "URL",\n          "url": "https://www.datasource.com/traces/oh140807_A0_idH.abf",\n          "label": "file_E",\n          "identifier": null,\n          "tab_name": "Group A"\n        },\n      ]'})})]})}sn.contextType=f;var cn=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).state={showHelp:!1,dataOk:!0,data:e.data},a.clickHelp=a.clickHelp.bind(Object(g.a)(a)),a.handleHelpClose=a.handleHelpClose.bind(Object(g.a)(a)),a.handleDataInputOnBlur=a.handleDataInputOnBlur.bind(Object(g.a)(a)),a.handleSaveData=a.handleSaveData.bind(Object(g.a)(a)),a}return Object(m.a)(n,[{key:"clickHelp",value:function(){this.setState({showHelp:!0})}},{key:"handleHelpClose",value:function(){this.setState({showHelp:!1})}},{key:"handleDataInputOnBlur",value:function(e){if(function(e){try{return"object"===typeof JSON.parse(e)}catch(t){return!1}}(e.target.value)){console.log("Input: JSON");var t=JSON.parse(e.target.value);Array.isArray(t)&&t.every((function(e){return"object"===typeof e&&null!==e&&"url"in e&&"label"in e&&"tab_name"in e&&"string"===typeof e.url&&"string"===typeof e.label&&"string"===typeof e.tab_name}))?(console.log("Input: JSON - list of dicts"),this.setState({dataOk:!0,data:t})):(console.log("Input: JSON - invalid format"),this.setState({dataOk:!1}))}else console.log("Data not in proper format!"),this.setState({dataOk:!1})}},{key:"handleSaveData",value:function(e){e?(console.log(e),this.state.dataOk?(console.log("Saved"),this.props.onChangeValue(this.state.data),this.props.handleClose()):(console.log("Error"),console.log("Edited data not in proper format!"))):this.props.handleClose()}},{key:"renderContent",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsxs)(G.a,{item:!0,xs:12,children:[Object(a.jsx)(M.a,{multiline:!0,rows:"8",label:"Edit source code for listing:",variant:"outlined",fullWidth:!0,helperText:"Click 'Help' for info on input format.",name:"data",defaultValue:JSON.stringify(this.state.data,null,4),onBlur:this.handleDataInputOnBlur,error:!this.state.dataOk,InputProps:{style:{padding:"15px 15px",backgroundColor:"#FFFFFF"}}}),!this.state.dataOk&&Object(a.jsx)("div",{style:{color:"red",paddingTop:"10px"},children:Object(a.jsx)("strong",{children:"Data not in expected format! Click on 'Help' for more info."})})]}),this.state.showHelp?Object(a.jsx)(Te,{open:this.state.showHelp,title:"Data Input",headerBgColor:"#70BF73",content:Object(a.jsx)(ln,{}),handleClose:this.handleHelpClose}):null]})}},{key:"render",value:function(){return console.log(this.props),Object(a.jsx)(Me,{open:this.props.open,title:"Edit Source: "+this.props.title,headerBgColor:"#70BF73",content:this.renderContent(),handleClose:this.handleSaveData,clickHelp:this.clickHelp})}}]),n}(o.a.Component),dn=Object(dt.a)((function(e){return Object(a.jsxs)("div",Object(k.a)(Object(k.a)({},e),{},{style:{color:"#000000"},children:[Object(a.jsx)("div",{className:"y",children:Object(a.jsx)("span",{style:{verticalAlign:"middle"},children:Object(a.jsx)(ot.a,{})})}),Object(a.jsx)("div",{className:"n",children:Object(a.jsx)("span",{style:{verticalAlign:"middle"},children:Object(a.jsx)(rt.a,{})})})]}))}))(rn()),hn=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).state=Object(k.a)({order:null,type:"section_traces",title:"Recordings / Traces",icon:"timeline",description:"",dataOk:!0,dataFormatted:[],showEdit:!1,showKGInput:!1,deleteOpen:!1,expanded:!0,useTabs:!1},e.data),a.handleFieldChange=a.handleFieldChange.bind(Object(g.a)(a)),a.clickEdit=a.clickEdit.bind(Object(g.a)(a)),a.handleEditClose=a.handleEditClose.bind(Object(g.a)(a)),a.clickKG=a.clickKG.bind(Object(g.a)(a)),a.handleKGClose=a.handleKGClose.bind(Object(g.a)(a)),a.setIcon=a.setIcon.bind(Object(g.a)(a)),a.handleDelete=a.handleDelete.bind(Object(g.a)(a)),a.handleMoveDown=a.handleMoveDown.bind(Object(g.a)(a)),a.handleMoveUp=a.handleMoveUp.bind(Object(g.a)(a)),a.toggleExpanded=a.toggleExpanded.bind(Object(g.a)(a)),a.handleItemsChange=a.handleItemsChange.bind(Object(g.a)(a)),a.toggleUseTabs=a.toggleUseTabs.bind(Object(g.a)(a)),a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.props.storeSectionInfo(this.state)}},{key:"handleItemsChange",value:function(e){var t=this;0===e.length&&(e=[{type:"URL",label:"",url:"",identifier:null,tab_name:""}]),this.setState({dataFormatted:e},(function(){t.props.storeSectionInfo(t.state)}))}},{key:"toggleExpanded",value:function(){var e=this;console.log(this.state.expanded),this.setState((function(e){return{expanded:!e.expanded}}),(function(){e.props.storeSectionInfo(e.state)}))}},{key:"handleDelete",value:function(e){console.log(e),this.setState({deleteOpen:!1}),e&&this.props.handleDelete(this.state.order)}},{key:"handleMoveDown",value:function(e){e.stopPropagation(),this.props.handleMoveDown(this.state.order)}},{key:"handleMoveUp",value:function(e){e.stopPropagation(),this.props.handleMoveUp(this.state.order)}},{key:"handleFieldChange",value:function(e){var t=this;console.log(e);var n=e.target,a=n.value,i=n.name;this.setState(Object(N.a)({},i,a),(function(){t.props.storeSectionInfo(t.state)}))}},{key:"setIcon",value:function(e){var t=this;this.setState({icon:e},(function(){t.props.storeSectionInfo(t.state)}))}},{key:"clickEdit",value:function(){this.setState({showEdit:!0})}},{key:"handleEditClose",value:function(){this.setState({showEdit:!1})}},{key:"clickKG",value:function(){this.setState({showKGInput:!0})}},{key:"handleKGClose",value:function(e,t){var n=this;if(e){console.log(t);var a=[];for(var i in t)for(var o in t[i])a.push({type:"Recording",url:t[i][o].source_url||"",label:t[i][o].label||"",view_url:t[i][o].view_url||"",tab_name:"",identifier:i});console.log(a),this.setState((function(e){return{dataFormatted:1===e.dataFormatted.length&&"URL"===e.dataFormatted[0].type&&""===e.dataFormatted[0].label&&""===e.dataFormatted[0].url&&""===e.dataFormatted[0].mc_url?a:e.dataFormatted.concat(a),showKGInput:!1}}),(function(){n.props.storeSectionInfo(n.state)}))}else this.setState({showKGInput:!1})}},{key:"toggleUseTabs",value:function(){var e=this;if(this.state.useTabs){var t=this.state.dataFormatted;t.forEach((function(e,t){e.tab_name=""})),this.setState({dataFormatted:t,useTabs:!1},(function(){e.props.storeSectionInfo(e.state)}))}else this.setState({useTabs:!0},(function(){e.props.storeSectionInfo(e.state)}))}},{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{style:{width:"100%",paddingTop:"25px",paddingBottom:"25px"},children:Object(a.jsxs)(tt.a,{expanded:this.state.expanded,onChange:this.toggleExpanded,children:[Object(a.jsx)(nt.a,{expandIcon:Object(a.jsx)(dn,{}),"aria-controls":"panel1a-content",id:"panel1a-header",style:{display:"flex",justifyContent:"space-between",borderStyle:"solid",borderColor:"#194D1B",borderWidth:"2px",backgroundColor:"#70BF73",fontWeight:"bold",color:"#000000",width:"100%",paddingRight:"25px"},children:Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",flexDirection:"row",width:"100%"},children:[Object(a.jsx)("div",{style:{fontWeight:"bolder",fontSize:16,color:"#000000"},children:Object(a.jsx)("span",{style:{verticalAlign:"middle"},children:"Section: Recordings / Traces"})}),Object(a.jsxs)("div",{children:[Object(a.jsx)(le.a,{title:"Delete this section",children:Object(a.jsx)(ct.a,{style:{height:"25px",width:"25px",marginRight:"30px",color:"#000000"},onClick:function(t){t.stopPropagation(),e.setState({deleteOpen:!0})},onFocus:function(e){return e.stopPropagation()}})}),Object(a.jsx)(le.a,{title:"Move section down",children:Object(a.jsx)(re.a,{stroke:"#000000",strokeWidth:1,style:{marginRight:"30px",transform:"rotate(90deg)",color:this.state.order===this.props.numResources-1?"#A1887F":"#000000"},onClick:function(t){return e.handleMoveDown(t)},onFocus:function(e){return e.stopPropagation()}})}),Object(a.jsx)(le.a,{title:"Move section up",children:Object(a.jsx)(re.a,{stroke:"#000000",strokeWidth:1,style:{marginRight:"20px",transform:"rotate(270deg)",color:0===this.state.order?"#A1887F":"#000000"},onClick:function(t){return e.handleMoveUp(t)},onFocus:function(e){return e.stopPropagation()}})})]})]})}),Object(a.jsx)(at.a,{style:{paddingLeft:0,paddingRight:0,paddingBottom:0},children:Object(a.jsxs)("div",{style:{backgroundColor:"#E2F2E3",width:"100%"},children:[Object(a.jsxs)("div",{style:{marginLeft:"10px",marginRight:"10px"},children:[Object(a.jsx)("br",{}),Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(a.jsx)("div",{style:{width:"50px"},children:Object(a.jsx)(Fe,{size:"35px",icon:this.state.icon,setIcon:this.setIcon})}),Object(a.jsx)("div",{style:{paddingLeft:"20px",flexGrow:1},children:Object(a.jsx)(M.a,{label:"Section Title",variant:"outlined",fullWidth:!0,name:"title",value:this.state.title,onChange:this.handleFieldChange,InputProps:{style:{padding:"5px 15px",backgroundColor:"#FFFFFF"}}})})]}),Object(a.jsx)("br",{}),Object(a.jsx)(G.a,{item:!0,xs:12,children:Object(a.jsx)(M.a,{multiline:!0,rows:"2",label:"Description of electrophysiological traces (optional)",variant:"outlined",fullWidth:!0,helperText:"The description may be formatted with Markdown",name:"description",value:this.state.description,onChange:this.handleFieldChange,InputProps:{style:{padding:"15px 15px",backgroundColor:"#FFFFFF"}}})}),Object(a.jsx)("br",{}),Object(a.jsxs)(G.a,{item:!0,xs:12,style:{paddingLeft:"10px",paddingBottom:"20px"},children:[Object(a.jsx)("span",{style:{paddingRight:"10px"},children:"Do you wish to use tabs to group items in this section?"}),Object(a.jsx)(et,{id:"tracesTabs",checked:this.state.useTabs,onChange:this.toggleUseTabs})]}),this.state.useTabs&&Object(a.jsx)(G.a,{item:!0,xs:12,style:{paddingLeft:"10px",paddingBottom:"20px"},children:Object(a.jsx)("em",{children:"Note: All items to be grouped together should be assigned the same tab name."})}),Object(a.jsx)(Ze,{items:this.state.dataFormatted,onChangeValue:this.handleItemsChange,handleEdit:this.clickEdit,handleKG:this.clickKG,numCols:2,useTabs:this.state.useTabs}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),this.state.showEdit?Object(a.jsx)(cn,{open:this.state.showEdit,title:this.state.title,data:this.state.dataFormatted,onChangeValue:this.handleItemsChange,handleClose:this.handleEditClose}):null,this.state.showKGInput?Object(a.jsx)(sn,{open:this.state.showKGInput,handleClose:this.handleKGClose,validFilterValues:this.props.validFilterValues}):null]}),Object(a.jsx)(Me,{open:this.state.deleteOpen,title:"Please confirm to delete!",headerBgColor:"#70BF73",content:"Do you wish to delete the traces resource section with title: <b>"+this.state.title+"</b>",handleClose:this.handleDelete,size:"xs",onChangeValue:this.handleItemsChange})]})})]})})}}]),n}(o.a.Component),pn=Object(P.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,n=e.classes,i=e.onClose,o=Object(w.a)(e,["children","classes","onClose"]);return Object(a.jsxs)(T.a,Object(k.a)(Object(k.a)({disableTypography:!0,className:n.root},o),{},{children:[Object(a.jsx)(E.a,{variant:"h6",children:t}),i?Object(a.jsx)(R.a,{"aria-label":"close",className:n.closeButton,onClick:i,children:Object(a.jsx)(L.a,{style:{color:"#000000"}})}):null]}))})),un=Object(P.a)((function(e){return{root:{padding:e.spacing(2)}}}))(S.a),bn=Object(P.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(Se.a),jn=[{field:"id",title:"ID",hidden:!0},{field:"name",title:"Name"},{field:"alias",title:"Alias",hidden:!0},{field:"author",title:"Author",render:function(e){return Wt(e.author)}},{field:"private",title:"Visibility",render:function(e){return e.private?"Private":"Public"},hidden:!0},{field:"project_id",title:"Collab",hidden:!0},{field:"species",title:"Species",hidden:!0},{field:"brain_region",title:"Brain Region",hidden:!0},{field:"cell_type",title:"Cell Type",hidden:!0},{field:"model_scope",title:"Model Scope",hidden:!0},{field:"abstraction_level",title:"Abstraction Level",hidden:!0},{field:"owner",title:"Owner",render:function(e){return Wt(e.owner)},hidden:!0},{field:"organization",title:"Organization",hidden:!0},{field:"date_created",title:"Created Date",hidden:!0},{field:"instances",title:"Instances",hidden:!0,hiddenByColumnsButton:!0}];function fn(e){return e.includeFlag?Object(a.jsx)(le.a,{title:"Remove model instance from collection",placement:"top",children:Object(a.jsx)(y.a,{variant:"contained",style:{backgroundColor:"#FF5722",border:"solid",borderColor:"#000000",borderWidth:"1px",width:"150px"},startIcon:Object(a.jsx)(Ot.a,{}),onClick:function(){return e.removeInstanceCollection(e.model_id,e.instance_id)},children:"Remove"})}):Object(a.jsx)(le.a,{title:"Add model instance to collection",placement:"top",children:Object(a.jsx)(y.a,{variant:"contained",style:{backgroundColor:"#81C784",border:"solid",borderColor:"#000000",borderWidth:"1px",width:"150px"},startIcon:Object(a.jsx)(mt.a,{}),onClick:function(){return e.addInstanceCollection(e.model_id,e.model_name,e.instance_id,e.instance_name,e.source_url)},children:"Add"})})}function xn(e){return Object(a.jsx)("div",{style:{width:"1000px"},children:Object(a.jsx)(G.a,{container:!0,children:Object(a.jsx)(G.a,{item:!0,xs:9,children:Object(a.jsx)(ft.a,{component:"div",my:2,bgcolor:"white",overflow:"scroll",border:1,borderColor:"grey.500",borderRadius:10,style:{padding:10,cursor:"pointer"},whiteSpace:"nowrap",children:e.value||""})})})})}var mn=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).state={selectedParam:"source"},a}return Object(m.a)(n,[{key:"render",value:function(){var e,t=this;return Object(a.jsxs)(ft.a,{my:2,pb:0,style:{backgroundColor:"#FFF1CC",marginBottom:"20px"},children:[Object(a.jsxs)(G.a,{container:!0,style:{display:"flex",alignItems:"center",backgroundColor:"#FFD180"},children:[Object(a.jsx)(G.a,{item:!0,xs:6,children:Object(a.jsx)(ft.a,{px:2,display:"flex",flexDirection:"row",children:Object(a.jsxs)("p",{variant:"subtitle2",children:["Version:"," ",Object(a.jsx)("span",{style:{cursor:"pointer",fontWeight:"bold"},children:this.props.instance.version})]})})}),Object(a.jsx)(G.a,{container:!0,item:!0,justify:"flex-end",xs:6,children:Object(a.jsxs)(ft.a,{px:2,style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(a.jsxs)(E.a,{variant:"body2",color:"textSecondary",children:["ID: ",Object(a.jsx)("span",{children:this.props.instance.id})]}),Object(a.jsx)(E.a,{variant:"body2",style:{color:"#000000",paddingLeft:"25px"},children:(e=this.props.instance.timestamp,e?new Date(e).toUTCString():"")})]})})]}),Object(a.jsxs)(G.a,{container:!0,spacing:3,alignItems:"flex-end",children:[Object(a.jsx)(G.a,{item:!0,xs:9,children:Object(a.jsxs)("div",{style:{padding:"10px 0px 0px 10px"},children:[Object(a.jsx)("div",{children:["description","source","morphology","parameters","code_format","license","hash"].map((function(e,n){return Object(a.jsx)(_t.a,{icon:t.state.selectedParam===e?Object(a.jsx)(kt.a,{}):Object(a.jsx)(Ft.a,{}),label:e,clickable:!0,onClick:function(){return t.setState({selectedParam:e})},variant:"outlined",style:{color:"#000000",marginRight:"10px"}},n)}))}),Object(a.jsx)(xn,{label:"param",value:this.props.instance[this.state.selectedParam]})]})}),Object(a.jsx)(G.a,{item:!0,xs:3,style:{paddingBottom:"35px"},children:Object(a.jsx)(fn,{includeFlag:this.props.checkInstanceInCollection(this.props.instance.model_id,this.props.instance.id),model_id:this.props.model_id,model_name:this.props.model_name,instance_id:this.props.instance.id,instance_name:this.props.instance.version,source_url:this.props.instance.source,addInstanceCollection:this.props.addInstanceCollection,removeInstanceCollection:this.props.removeInstanceCollection})})]})]},this.props.instance.id)}}]),n}(o.a.Component),gn=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).state={selectedParam:"source"},a}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsxs)(G.a,{item:!0,style:{backgroundColor:"#CFD8DC",padding:"20px"},children:[Object(a.jsx)(G.a,{container:!0,direction:"row",children:Object(a.jsxs)(G.a,{item:!0,style:{display:"flex",flexDirection:"row",justifyContent:"space-between",width:"100%",verticalAlign:"middle"},children:[Object(a.jsx)(E.a,{variant:"subtitle1",children:Object(a.jsx)("b",{children:"Versions"})}),Object(a.jsx)(Kt.a,{href:qt+"/#model_id."+this.props.data.id,target:"_blank",rel:"noreferrer",underline:"none",children:Object(a.jsx)(y.a,{variant:"contained",style:{color:"#455A64"},startIcon:Object(a.jsx)(yt.a,{}),children:"Open Model"})})]})}),0===this.props.data.instances.length?Object(a.jsxs)("div",{style:{fontSize:14},children:[Object(a.jsx)("br",{}),"No model instances have yet been registered for this model."]}):this.props.data.instances.map((function(t,n){return Object(a.jsx)("div",{style:{marginBottom:"25px"},children:Object(a.jsx)(mn,{model_id:e.props.data.id,model_name:e.props.data.name,instance:t,addInstanceCollection:e.props.addInstanceCollection,removeInstanceCollection:e.props.removeInstanceCollection,checkInstanceInCollection:e.props.checkInstanceInCollection})},n)}))]})}}]),n}(o.a.Component),On=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).state={selectedRows:[],filtering:!1},a}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{children:[Object(a.jsx)(It.a,{title:"Models",data:this.props.data,columns:jn,options:{columnsButton:!0,search:!0,paging:!1,filtering:this.state.filtering,sorting:!0,exportButton:!1,maxBodyHeight:"60vh",headerStyle:{position:"sticky",top:0,backgroundColor:"#FFF",fontWeight:"bolder",fontSize:15},rowStyle:function(t){return{backgroundColor:e.state.selectedRows.includes(t.tableData.id)?"#FFD180":"#EEEEEE"}}},actions:[{icon:"filter_list",onClick:function(){return e.setState({filtering:!e.state.filtering})},position:"toolbar",tooltip:"Show Filters"}],detailPanel:function(t){return Object(a.jsx)(gn,{data:t,addInstanceCollection:e.props.addInstanceCollection,removeInstanceCollection:e.props.removeInstanceCollection,checkInstanceInCollection:e.props.checkInstanceInCollection})},onRowClick:function(e,t,n){n()},components:{Toolbar:function(e){return Object(a.jsx)("div",{style:{backgroundColor:"#FFD180",fontWeight:"bolder !important"},children:Object(a.jsx)(St.MTableToolbar,Object(k.a)({},e))})}}}),Object(a.jsx)("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",paddingLeft:"2.5%",paddingRight:"2.5%",paddingTop:"10px",width:"100%"},children:Object(a.jsx)("h6",{children:"Number of model instances selected: "+this.props.countTotalInstances()})})]})}}]),n}(o.a.Component),vn=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(e,a){var i;return Object(x.a)(this,n),(i=t.call(this,e,a)).signal=C.a.CancelToken.source(),i.state={loading:!1,list_models:[],error:null,model_collection:{},showFilters:!0,configFilters:{}},i.getListModels=i.getListModels.bind(Object(g.a)(i)),i.handleErrorDialogClose=i.handleErrorDialogClose.bind(Object(g.a)(i)),i.addInstanceCollection=i.addInstanceCollection.bind(Object(g.a)(i)),i.removeInstanceCollection=i.removeInstanceCollection.bind(Object(g.a)(i)),i.checkInstanceInCollection=i.checkInstanceInCollection.bind(Object(g.a)(i)),i.countTotalInstances=i.countTotalInstances.bind(Object(g.a)(i)),i.showFiltersPanel=i.showFiltersPanel.bind(Object(g.a)(i)),i.handleFiltersChange=i.handleFiltersChange.bind(Object(g.a)(i)),i.handleKGProceed=i.handleKGProceed.bind(Object(g.a)(i)),i}return Object(m.a)(n,[{key:"getListModels",value:function(){var e=this,t={cancelToken:this.signal.token,headers:{Authorization:"Bearer "+this.context.auth[0].token}},n=Ut(this.state.configFilters),a=Vt+"/models/?"+encodeURI(n)+"&size=10";this.setState({loading:!0}),C.a.get(a,t).then((function(t){var n=t.data;console.log(n),e.setState({list_models:n,loading:!1,error:null})})).catch((function(t){C.a.isCancel(t)?console.log("errorUpdate: ",t.message):e.setState({loading:!1,error:t})}))}},{key:"handleErrorDialogClose",value:function(){this.setState({error:null})}},{key:"addInstanceCollection",value:function(e,t,n,a,i){console.log("Add");var o=this.state.model_collection;Object.keys(o).includes(e)?Object.keys(o[e]).includes(n)||(o[e][n]={label:t+" ("+a+")",source_url:i}):o[e]=Object(N.a)({},n,{label:t+" ("+a+")",source_url:i}),this.setState({model_collection:o})}},{key:"removeInstanceCollection",value:function(e,t){console.log("Remove");var n=this.state.model_collection;Object.keys(n).includes(e)&&(Object.keys(n[e]).includes(t)&&delete n[e][t],0===Object.keys(n[e]).length&&delete n[e]),this.setState({model_collection:n})}},{key:"checkInstanceInCollection",value:function(e,t){var n=!1,a=this.state.model_collection;return Object.keys(a).includes(e)&&Object.keys(a[e]).includes(t)&&(n=!0),console.log(n),n}},{key:"countTotalInstances",value:function(){var e=0,t=this.state.model_collection;for(var n in t)e+=Object.keys(t[n]).length;return e}},{key:"showFiltersPanel",value:function(){var e=this,t=Jt;return Object(a.jsxs)(ft.a,{my:2,children:[Object(a.jsx)("h6",{children:"Please specify filters to search KG:"}),Object(a.jsx)("em",{children:"Note: you can select multiple values for each filter"}),Object(a.jsx)("form",{children:t.map((function(t){return Object(a.jsx)(zt,{itemNames:e.props.validFilterValues?e.props.validFilterValues[t]:[],label:t,value:e.state.configFilters[t]||[],handleChange:e.handleFiltersChange},t)}))})]})}},{key:"handleFiltersChange",value:function(e){var t=Object(k.a)({},this.state.configFilters);t[e.target.name]=e.target.value,this.setState({configFilters:t})}},{key:"handleKGProceed",value:function(){var e=this;this.setState({showFilters:!1},(function(){e.getListModels()}))}},{key:"render",value:function(){var e=this;return this.state.error?Object(a.jsx)(Tt,{open:Boolean(this.state.error),handleErrorDialogClose:this.handleErrorDialogClose,error:this.state.error.message||this.state.error}):Object(a.jsx)("div",{children:Object(a.jsxs)(F.a,{onClose:function(){return e.props.handleClose(!1)},"aria-labelledby":"customized-dialog-title",open:this.props.open,fullWidth:!this.state.showFilters,maxWidth:"xl",children:[Object(a.jsx)(pn,{id:"customized-dialog-title",onClose:function(){return e.props.handleClose(!1)},style:{backgroundColor:"#ffd180"},children:Object(a.jsx)("span",{style:{fontWeight:"bolder",fontSize:18},children:"KG Data Input"})}),Object(a.jsx)(un,{dividers:!0,children:!this.props.validFilterValues&&this.state.showFilters||this.state.loading?Object(a.jsx)(Rt,{}):this.state.showFilters?this.showFiltersPanel():Object(a.jsx)(On,{data:this.state.list_models,addInstanceCollection:this.addInstanceCollection,removeInstanceCollection:this.removeInstanceCollection,checkInstanceInCollection:this.checkInstanceInCollection,countTotalInstances:this.countTotalInstances})}),Object(a.jsx)(bn,{children:Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",paddingLeft:"2.5%",paddingRight:"2.5%",paddingTop:"10px",paddingBottom:"20px",width:"100%"},children:[Object(a.jsx)(y.a,{variant:"contained",color:"primary",style:{width:"150px",backgroundColor:"#FF9800",color:"#000000",fontWeight:"bold",border:"solid",borderColor:"#000000",borderWidth:"1px"},onClick:function(){return e.props.handleClose(!1,null)},children:"Cancel"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),!this.state.showFilters&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(y.a,{variant:"contained",color:"primary",style:{width:"150px",backgroundColor:"#01579B",color:"#FFFFFF",fontWeight:"bold",border:"solid",borderColor:"#000000",borderWidth:"1px"},onClick:function(){e.setState({showFilters:!0})},children:"Filters"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{})]}),Object(a.jsx)(y.a,{variant:"contained",color:"primary",style:{width:"150px",backgroundColor:"#8BC34A",color:"#000000",fontWeight:"bold",border:"solid",borderColor:"#000000",borderWidth:"1px"},onClick:function(){return e.state.showFilters?e.handleKGProceed():e.props.handleClose(!0,e.state.model_collection)},children:this.state.showFilters?"Proceed":"Add KG Items"})]})})]})})}}]),n}(o.a.Component);function yn(){var e=Object(ke.a)(["\n  & > .y {\n    display: block;\n  }\n  & > .n {\n    display: none;\n  }\n  .Mui-expanded & > .n {\n    display: block;\n  }\n  .Mui-expanded & > .y {\n    display: none;\n  }\n"]);return yn=function(){return e},e}function _n(){return Object(a.jsxs)("div",{children:["The morphology data can be input in the following format:",Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("h6",{children:Object(a.jsx)("b",{children:"List of dicts/objects"})}),"Each dict in the list should have keys named 'type', 'url', 'label', 'mc_url,' 'identifier' and 'tab_name'. You can specify the model catalog URL for each model using their `mc_url' field. The 'identifier' field corresponds to the Knowledge Graph UUID. For manually entered items, 'type' and 'identifier' can be set to 'URL' and 'null', respectively."," ",Object(a.jsx)("i",{children:"Example:"}),Object(a.jsx)("br",{}),Object(a.jsx)("pre",{children:Object(a.jsx)("code",{children:'\n    [\n        {\n        "type": "URL",\n        "url": "https://www.datasource.com/models/model_1.zip",\n        "label": "file_A",\n        "mc_url":\n            "https://model-catalog.brainsimulation.eu/#model_id.00f2e856-27a8-4b8d-9ec3-4e2581c546e4",\n        "identifier": null,\n        "tab_name": "Group A"\n        },\n        {\n        "type": "URL",\n        "url": "https://www.datasource.com/models/model_2.zip",\n        "label": "file_B",\n        "mc_url":\n            "https://model-catalog.brainsimulation.eu/#model_id.01006de7-e861-45fb-abf4-3c84e609d33b",\n        "identifier": null,\n        "tab_name": "Group A"\n        },\n        {\n        "type": "URL",\n        "url": "https://www.datasource.com/models/model_3.zip",\n        "label": "file_C",\n        "mc_url":\n            "https://model-catalog.brainsimulation.eu/#model_id.01afb341-7ca2-4694-9968-16fc7d8fc765",\n        "identifier": null,\n        "tab_name": "Group A"\n        },\n        {\n        "type": "URL",\n        "url": "https://www.datasource.com/models/model_4.zip",\n        "label": "file_D",\n        "mc_url":\n            "https://model-catalog.brainsimulation.eu/#model_id.01da73a6-8715-431b-aaa7-efcd9358c786",\n        "identifier": null,\n        "tab_name": "Group A"\n        },\n        {\n        "type": "URL",\n        "url": "https://www.datasource.com/models/model_5.zip",\n        "label": "file_E",\n        "mc_url":\n            "https://model-catalog.brainsimulation.eu/#model_id.01f49d73-e8a1-4f23-be30-d01bd52f89a2",\n        "identifier": null,\n        "tab_name": "Group A"\n        },\n    ]'})})]})}vn.contextType=f;var Cn=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).state={showHelp:!1,dataOk:!0,data:e.data},a.clickHelp=a.clickHelp.bind(Object(g.a)(a)),a.handleHelpClose=a.handleHelpClose.bind(Object(g.a)(a)),a.handleDataInputOnBlur=a.handleDataInputOnBlur.bind(Object(g.a)(a)),a.handleSaveData=a.handleSaveData.bind(Object(g.a)(a)),a}return Object(m.a)(n,[{key:"clickHelp",value:function(){this.setState({showHelp:!0})}},{key:"handleHelpClose",value:function(){this.setState({showHelp:!1})}},{key:"handleDataInputOnBlur",value:function(e){if(function(e){try{return"object"===typeof JSON.parse(e)}catch(t){return!1}}(e.target.value)){console.log("Input: JSON");var t=JSON.parse(e.target.value);Array.isArray(t)&&t.every((function(e){return"object"===typeof e&&null!==e&&"url"in e&&"label"in e&&"mc_url"in e&&"tab_name"in e&&"string"===typeof e.url&&"string"===typeof e.label&&"string"===typeof e.mc_url&&"string"===typeof e.tab_name}))?(console.log("Input: JSON - list of dicts"),this.setState({dataOk:!0,data:t})):(console.log("Input: JSON - invalid format"),this.setState({dataOk:!1}))}else console.log("Data not in proper format!"),this.setState({dataOk:!1})}},{key:"handleSaveData",value:function(e){e?(console.log(e),this.state.dataOk?(console.log("Saved"),this.props.onChangeValue(this.state.data),this.props.handleClose()):(console.log("Error"),console.log("Edited data not in proper format!"))):this.props.handleClose()}},{key:"renderContent",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsxs)(G.a,{item:!0,xs:12,children:[Object(a.jsx)(M.a,{multiline:!0,rows:"8",label:"Edit source code for listing:",variant:"outlined",fullWidth:!0,helperText:"Click 'Help' for info on input format.",name:"data",defaultValue:JSON.stringify(this.state.data,null,4),onBlur:this.handleDataInputOnBlur,error:!this.state.dataOk,InputProps:{style:{padding:"15px 15px",backgroundColor:"#FFFFFF"}}}),!this.state.dataOk&&Object(a.jsx)("div",{style:{color:"red",paddingTop:"10px"},children:Object(a.jsx)("strong",{children:"Data not in expected format! Click on 'Help' for more info."})})]}),this.state.showHelp?Object(a.jsx)(Te,{open:this.state.showHelp,title:"Data Input",headerBgColor:"#FF8A65",content:Object(a.jsx)(_n,{}),handleClose:this.handleHelpClose}):null]})}},{key:"render",value:function(){return console.log(this.props),Object(a.jsx)(Me,{open:this.props.open,title:"Edit Source: "+this.props.title,headerBgColor:"#FF8A65",content:this.renderContent(),handleClose:this.handleSaveData,clickHelp:this.clickHelp})}}]),n}(o.a.Component),kn=Object(dt.a)((function(e){return Object(a.jsxs)("div",Object(k.a)(Object(k.a)({},e),{},{style:{color:"#000000"},children:[Object(a.jsx)("div",{className:"y",children:Object(a.jsx)("span",{style:{verticalAlign:"middle"},children:Object(a.jsx)(ot.a,{})})}),Object(a.jsx)("div",{className:"n",children:Object(a.jsx)("span",{style:{verticalAlign:"middle"},children:Object(a.jsx)(rt.a,{})})})]}))}))(yn()),wn=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).state=Object(k.a)({order:null,type:"section_models",title:"Model Collection",icon:"local_play",description:"",dataOk:!0,dataFormatted:[],showEdit:!1,showKGInput:!1,deleteOpen:!1,expanded:!0,useTabs:!1},e.data),a.handleFieldChange=a.handleFieldChange.bind(Object(g.a)(a)),a.clickEdit=a.clickEdit.bind(Object(g.a)(a)),a.handleEditClose=a.handleEditClose.bind(Object(g.a)(a)),a.clickKG=a.clickKG.bind(Object(g.a)(a)),a.handleKGClose=a.handleKGClose.bind(Object(g.a)(a)),a.setIcon=a.setIcon.bind(Object(g.a)(a)),a.handleDelete=a.handleDelete.bind(Object(g.a)(a)),a.handleMoveDown=a.handleMoveDown.bind(Object(g.a)(a)),a.handleMoveUp=a.handleMoveUp.bind(Object(g.a)(a)),a.toggleExpanded=a.toggleExpanded.bind(Object(g.a)(a)),a.handleItemsChange=a.handleItemsChange.bind(Object(g.a)(a)),a.toggleUseTabs=a.toggleUseTabs.bind(Object(g.a)(a)),a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.props.storeSectionInfo(this.state)}},{key:"handleItemsChange",value:function(e){var t=this;0===e.length&&(e=[{type:"URL",label:"",url:"",mc_url:"",identifier:null,tab_name:""}]),this.setState({dataFormatted:e},(function(){t.props.storeSectionInfo(t.state)}))}},{key:"toggleExpanded",value:function(){var e=this;console.log(this.state.expanded),this.setState((function(e){return{expanded:!e.expanded}}),(function(){e.props.storeSectionInfo(e.state)}))}},{key:"handleDelete",value:function(e){console.log(e),this.setState({deleteOpen:!1}),e&&this.props.handleDelete(this.state.order)}},{key:"handleMoveDown",value:function(e){e.stopPropagation(),this.props.handleMoveDown(this.state.order)}},{key:"handleMoveUp",value:function(e){e.stopPropagation(),this.props.handleMoveUp(this.state.order)}},{key:"handleFieldChange",value:function(e){var t=this;console.log(e);var n=e.target,a=n.value,i=n.name;this.setState(Object(N.a)({},i,a),(function(){t.props.storeSectionInfo(t.state)}))}},{key:"setIcon",value:function(e){var t=this;this.setState({icon:e},(function(){t.props.storeSectionInfo(t.state)}))}},{key:"clickEdit",value:function(){this.setState({showEdit:!0})}},{key:"handleEditClose",value:function(){this.setState({showEdit:!1})}},{key:"clickKG",value:function(){this.setState({showKGInput:!0})}},{key:"handleKGClose",value:function(e,t){var n=this;if(e){console.log(t);var a=[];for(var i in t)for(var o in t[i])a.push({type:"ModelInstance",url:t[i][o].source_url||"",label:t[i][o].label||"",mc_url:qt+"/#model_id."+i||"",tab_name:"",identifier:o});console.log(a),this.setState((function(e){return{dataFormatted:1===e.dataFormatted.length&&"URL"===e.dataFormatted[0].type&&""===e.dataFormatted[0].label&&""===e.dataFormatted[0].url&&""===e.dataFormatted[0].mc_url?a:e.dataFormatted.concat(a),showKGInput:!1}}),(function(){n.props.storeSectionInfo(n.state)}))}else this.setState({showKGInput:!1})}},{key:"toggleUseTabs",value:function(){var e=this;if(this.state.useTabs){var t=this.state.dataFormatted;t.forEach((function(e,t){e.tab_name=""})),this.setState({dataFormatted:t,useTabs:!1},(function(){e.props.storeSectionInfo(e.state)}))}else this.setState({useTabs:!0},(function(){e.props.storeSectionInfo(e.state)}))}},{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{style:{width:"100%",paddingTop:"25px",paddingBottom:"25px"},children:Object(a.jsxs)(tt.a,{expanded:this.state.expanded,onChange:this.toggleExpanded,children:[Object(a.jsx)(nt.a,{expandIcon:Object(a.jsx)(kn,{}),"aria-controls":"panel1a-content",id:"panel1a-header",style:{display:"flex",justifyContent:"space-between",borderStyle:"solid",borderColor:"#86362D",borderWidth:"2px",backgroundColor:"#FF8A65",fontWeight:"bold",color:"#000000",width:"100%",paddingRight:"25px"},children:Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",flexDirection:"row",width:"100%"},children:[Object(a.jsx)("div",{style:{fontWeight:"bolder",fontSize:16,color:"#000000"},children:Object(a.jsx)("span",{style:{verticalAlign:"middle"},children:"Section: Model Collection"})}),Object(a.jsxs)("div",{children:[Object(a.jsx)(le.a,{title:"Delete this section",children:Object(a.jsx)(ct.a,{style:{height:"25px",width:"25px",marginRight:"30px",color:"#000000"},onClick:function(t){t.stopPropagation(),e.setState({deleteOpen:!0})},onFocus:function(e){return e.stopPropagation()}})}),Object(a.jsx)(le.a,{title:"Move section down",children:Object(a.jsx)(re.a,{stroke:"#000000",strokeWidth:1,style:{marginRight:"30px",transform:"rotate(90deg)",color:this.state.order===this.props.numResources-1?"#A1887F":"#000000"},onClick:function(t){return e.handleMoveDown(t)},onFocus:function(e){return e.stopPropagation()}})}),Object(a.jsx)(le.a,{title:"Move section up",children:Object(a.jsx)(re.a,{stroke:"#000000",strokeWidth:1,style:{marginRight:"20px",transform:"rotate(270deg)",color:0===this.state.order?"#A1887F":"#000000"},onClick:function(t){return e.handleMoveUp(t)},onFocus:function(e){return e.stopPropagation()}})})]})]})}),Object(a.jsx)(at.a,{style:{paddingLeft:0,paddingRight:0,paddingBottom:0},children:Object(a.jsxs)("div",{style:{backgroundColor:"#FFE8E0",width:"100%"},children:[Object(a.jsxs)("div",{style:{marginLeft:"10px",marginRight:"10px"},children:[Object(a.jsx)("br",{}),Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(a.jsx)("div",{style:{width:"50px"},children:Object(a.jsx)(Fe,{size:"35px",icon:this.state.icon,setIcon:this.setIcon})}),Object(a.jsx)("div",{style:{paddingLeft:"20px",flexGrow:1},children:Object(a.jsx)(M.a,{label:"Section Title",variant:"outlined",fullWidth:!0,name:"title",value:this.state.title,onChange:this.handleFieldChange,InputProps:{style:{padding:"5px 15px",backgroundColor:"#FFFFFF"}}})})]}),Object(a.jsx)("br",{}),Object(a.jsx)(G.a,{item:!0,xs:12,children:Object(a.jsx)(M.a,{multiline:!0,rows:"2",label:"Description of models (optional)",variant:"outlined",fullWidth:!0,helperText:"The description may be formatted with Markdown",name:"description",value:this.state.description,onChange:this.handleFieldChange,InputProps:{style:{padding:"15px 15px",backgroundColor:"#FFFFFF"}}})}),Object(a.jsx)("br",{}),Object(a.jsxs)(G.a,{item:!0,xs:12,style:{paddingLeft:"10px",paddingBottom:"20px"},children:[Object(a.jsx)("span",{style:{paddingRight:"10px"},children:"Do you wish to use tabs to group items in this section?"}),Object(a.jsx)(et,{id:"modelsTabs",checked:this.state.useTabs,onChange:this.toggleUseTabs})]}),this.state.useTabs&&Object(a.jsx)(G.a,{item:!0,xs:12,style:{paddingLeft:"10px",paddingBottom:"20px"},children:Object(a.jsx)("em",{children:"Note: All items to be grouped together should be assigned the same tab name."})}),Object(a.jsx)(Ze,{items:this.state.dataFormatted,onChangeValue:this.handleItemsChange,handleEdit:this.clickEdit,handleKG:this.clickKG,numCols:3,useTabs:this.state.useTabs}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),this.state.showEdit?Object(a.jsx)(Cn,{open:this.state.showEdit,title:this.state.title,data:this.state.dataFormatted,onChangeValue:this.handleItemsChange,handleClose:this.handleEditClose}):null,this.state.showKGInput?Object(a.jsx)(vn,{open:this.state.showKGInput,handleClose:this.handleKGClose,validFilterValues:this.props.validFilterValues}):null]}),Object(a.jsx)(Me,{open:this.state.deleteOpen,title:"Please confirm to delete!",headerBgColor:"#FF8A65",content:"Do you wish to delete the models resource section with title: <b>"+this.state.title+"</b>",handleClose:this.handleDelete,size:"xs",onChangeValue:this.handleItemsChange})]})})]})})}}]),n}(o.a.Component);function Fn(){var e=Object(ke.a)(["\n  & > .y {\n    display: block;\n  }\n  & > .n {\n    display: none;\n  }\n  .Mui-expanded & > .n {\n    display: block;\n  }\n  .Mui-expanded & > .y {\n    display: none;\n  }\n"]);return Fn=function(){return e},e}function Sn(){return Object(a.jsxs)("div",{children:["The listing data can be input in the following format:",Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("h6",{children:Object(a.jsx)("b",{children:"List of dicts/objects"})}),"Each dict in the list should have keys named 'type', 'url', 'label', 'identifier' and 'tab_name'. The 'identifier' field corresponds to the Knowledge Graph UUID. For manually entered items, 'type' and 'identifier' can be set to 'URL' and 'null', respectively. ",Object(a.jsx)("i",{children:"Example:"}),Object(a.jsx)("br",{}),Object(a.jsx)("pre",{children:Object(a.jsx)("code",{children:'\n    [\n        {\n          "type": "URL",\n          "url": "https://www.datasource.com/listing/file_idB.dat",\n          "label": "file_A",\n          "identifier": null,\n          "tab_name": "Group A"\n        },\n        {\n          "type": "URL",\n          "url": "https://www.datasource.com/listing/file_idC.dat",\n          "label": "file_B",\n          "identifier": null,\n          "tab_name": "Group A"\n        },\n        {\n          "type": "URL",\n          "url": "https://www.datasource.com/listing/file_idF.dat",\n          "label": "file_C",\n          "identifier": null,\n          "tab_name": "Group A"\n        },\n        {\n          "type": "URL",\n          "url": "https://www.datasource.com/listing/file_idG.dat",\n          "label": "file_D",\n          "identifier": null,\n          "tab_name": "Group A"\n        },\n        {\n          "type": "URL",\n          "url": "https://www.datasource.com/listing/file_idH.dat",\n          "label": "file_E",\n          "identifier": null,\n          "tab_name": "Group A"\n        },\n      ]'})})]})}var In=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).state={showHelp:!1,dataOk:!0,data:e.data},a.clickHelp=a.clickHelp.bind(Object(g.a)(a)),a.handleHelpClose=a.handleHelpClose.bind(Object(g.a)(a)),a.handleDataInputOnBlur=a.handleDataInputOnBlur.bind(Object(g.a)(a)),a.handleSaveData=a.handleSaveData.bind(Object(g.a)(a)),a}return Object(m.a)(n,[{key:"clickHelp",value:function(){this.setState({showHelp:!0})}},{key:"handleHelpClose",value:function(){this.setState({showHelp:!1})}},{key:"handleDataInputOnBlur",value:function(e){if(function(e){try{return"object"===typeof JSON.parse(e)}catch(t){return!1}}(e.target.value)){console.log("Input: JSON");var t=JSON.parse(e.target.value);Array.isArray(t)&&t.every((function(e){return"object"===typeof e&&null!==e&&"url"in e&&"label"in e&&"tab_name"in e&&"string"===typeof e.url&&"string"===typeof e.label&&"string"===typeof e.tab_name}))?(console.log("Input: JSON - list of dicts"),this.setState({dataOk:!0,data:t})):(console.log("Input: JSON - invalid format"),this.setState({dataOk:!1}))}else console.log("Data not in proper format!"),this.setState({dataOk:!1})}},{key:"handleSaveData",value:function(e){e?(console.log(e),this.state.dataOk?(console.log("Saved"),this.props.onChangeValue(this.state.data),this.props.handleClose()):(console.log("Error"),console.log("Edited data not in proper format!"))):this.props.handleClose()}},{key:"renderContent",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsxs)(G.a,{item:!0,xs:12,children:[Object(a.jsx)(M.a,{multiline:!0,rows:"8",label:"Edit source code for listing:",variant:"outlined",fullWidth:!0,helperText:"Click 'Help' for info on input format.",name:"data",defaultValue:JSON.stringify(this.state.data,null,4),onBlur:this.handleDataInputOnBlur,error:!this.state.dataOk,InputProps:{style:{padding:"15px 15px",backgroundColor:"#FFFFFF"}}}),!this.state.dataOk&&Object(a.jsx)("div",{style:{color:"red",paddingTop:"10px"},children:Object(a.jsx)("strong",{children:"Data not in expected format! Click on 'Help' for more info."})})]}),this.state.showHelp?Object(a.jsx)(Te,{open:this.state.showHelp,title:"Data Input",headerBgColor:"#AA91D7",content:Object(a.jsx)(Sn,{}),handleClose:this.handleHelpClose}):null]})}},{key:"render",value:function(){return console.log(this.props),Object(a.jsx)(Me,{open:this.props.open,title:"Edit Source: "+this.props.title,headerBgColor:"#AA91D7",content:this.renderContent(),handleClose:this.handleSaveData,clickHelp:this.clickHelp})}}]),n}(o.a.Component),Dn=Object(dt.a)((function(e){return Object(a.jsxs)("div",Object(k.a)(Object(k.a)({},e),{},{style:{color:"#000000"},children:[Object(a.jsx)("div",{className:"y",children:Object(a.jsx)("span",{style:{verticalAlign:"middle"},children:Object(a.jsx)(ot.a,{})})}),Object(a.jsx)("div",{className:"n",children:Object(a.jsx)("span",{style:{verticalAlign:"middle"},children:Object(a.jsx)(rt.a,{})})})]}))}))(Fn()),Pn=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).state=Object(k.a)({order:null,type:"section_generic",title:"Listing Title",icon:"format_list_bulleted",description:"",dataOk:!0,dataFormatted:[],showEdit:!1,deleteOpen:!1,expanded:!0,useTabs:!1},e.data),a.handleFieldChange=a.handleFieldChange.bind(Object(g.a)(a)),a.clickEdit=a.clickEdit.bind(Object(g.a)(a)),a.handleEditClose=a.handleEditClose.bind(Object(g.a)(a)),a.setIcon=a.setIcon.bind(Object(g.a)(a)),a.handleDelete=a.handleDelete.bind(Object(g.a)(a)),a.handleMoveDown=a.handleMoveDown.bind(Object(g.a)(a)),a.handleMoveUp=a.handleMoveUp.bind(Object(g.a)(a)),a.toggleExpanded=a.toggleExpanded.bind(Object(g.a)(a)),a.handleItemsChange=a.handleItemsChange.bind(Object(g.a)(a)),a.toggleUseTabs=a.toggleUseTabs.bind(Object(g.a)(a)),a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.props.storeSectionInfo(this.state)}},{key:"handleItemsChange",value:function(e){var t=this;0===e.length&&(e=[{type:"URL",label:"",url:"",identifier:null,tab_name:""}]),this.setState({dataFormatted:e},(function(){t.props.storeSectionInfo(t.state)}))}},{key:"toggleExpanded",value:function(){var e=this;console.log(this.state.expanded),this.setState((function(e){return{expanded:!e.expanded}}),(function(){e.props.storeSectionInfo(e.state)}))}},{key:"handleDelete",value:function(e){console.log(e),this.setState({deleteOpen:!1}),e&&this.props.handleDelete(this.state.order)}},{key:"handleMoveDown",value:function(e){e.stopPropagation(),this.props.handleMoveDown(this.state.order)}},{key:"handleMoveUp",value:function(e){e.stopPropagation(),this.props.handleMoveUp(this.state.order)}},{key:"handleFieldChange",value:function(e){var t=this;console.log(e);var n=e.target,a=n.value,i=n.name;this.setState(Object(N.a)({},i,a),(function(){t.props.storeSectionInfo(t.state)}))}},{key:"setIcon",value:function(e){var t=this;this.setState({icon:e},(function(){t.props.storeSectionInfo(t.state)}))}},{key:"clickEdit",value:function(){this.setState({showEdit:!0})}},{key:"handleEditClose",value:function(){this.setState({showEdit:!1})}},{key:"toggleUseTabs",value:function(){var e=this;if(this.state.useTabs){var t=this.state.dataFormatted;t.forEach((function(e,t){e.tab_name=""})),this.setState({dataFormatted:t,useTabs:!1},(function(){e.props.storeSectionInfo(e.state)}))}else this.setState({useTabs:!0},(function(){e.props.storeSectionInfo(e.state)}))}},{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{style:{width:"100%",paddingTop:"25px",paddingBottom:"25px"},children:Object(a.jsxs)(tt.a,{expanded:this.state.expanded,onChange:this.toggleExpanded,children:[Object(a.jsx)(nt.a,{expandIcon:Object(a.jsx)(Dn,{}),"aria-controls":"panel1a-content",id:"panel1a-header",style:{display:"flex",justifyContent:"space-between",borderStyle:"solid",borderColor:"#311B92",borderWidth:"2px",backgroundColor:"#AA91D7",fontWeight:"bold",color:"#000000",width:"100%",paddingRight:"25px"},children:Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",flexDirection:"row",width:"100%"},children:[Object(a.jsx)("div",{style:{fontWeight:"bolder",fontSize:16,color:"#000000"},children:Object(a.jsx)("span",{style:{verticalAlign:"middle"},children:"Section: Generic Listing"})}),Object(a.jsxs)("div",{children:[Object(a.jsx)(le.a,{title:"Delete this section",children:Object(a.jsx)(ct.a,{style:{height:"25px",width:"25px",marginRight:"30px",color:"#000000"},onClick:function(t){t.stopPropagation(),e.setState({deleteOpen:!0})},onFocus:function(e){return e.stopPropagation()}})}),Object(a.jsx)(le.a,{title:"Move section down",children:Object(a.jsx)(re.a,{stroke:"#000000",strokeWidth:1,style:{marginRight:"30px",transform:"rotate(90deg)",color:this.state.order===this.props.numResources-1?"#A1887F":"#000000"},onClick:function(t){return e.handleMoveDown(t)},onFocus:function(e){return e.stopPropagation()}})}),Object(a.jsx)(le.a,{title:"Move section up",children:Object(a.jsx)(re.a,{stroke:"#000000",strokeWidth:1,style:{marginRight:"20px",transform:"rotate(270deg)",color:0===this.state.order?"#A1887F":"#000000"},onClick:function(t){return e.handleMoveUp(t)},onFocus:function(e){return e.stopPropagation()}})})]})]})}),Object(a.jsx)(at.a,{style:{paddingLeft:0,paddingRight:0,paddingBottom:0},children:Object(a.jsxs)("div",{style:{backgroundColor:"#EAE3F5",width:"100%"},children:[Object(a.jsxs)("div",{style:{marginLeft:"10px",marginRight:"10px"},children:[Object(a.jsx)("br",{}),Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(a.jsx)("div",{style:{width:"50px"},children:Object(a.jsx)(Fe,{size:"35px",icon:this.state.icon,setIcon:this.setIcon})}),Object(a.jsx)("div",{style:{paddingLeft:"20px",flexGrow:1},children:Object(a.jsx)(M.a,{label:"Section Title",variant:"outlined",fullWidth:!0,name:"title",value:this.state.title,onChange:this.handleFieldChange,InputProps:{style:{padding:"5px 15px",backgroundColor:"#FFFFFF"}}})})]}),Object(a.jsx)("br",{}),Object(a.jsx)(G.a,{item:!0,xs:12,children:Object(a.jsx)(M.a,{multiline:!0,rows:"2",label:"Description (optional)",variant:"outlined",fullWidth:!0,helperText:"The description may be formatted with Markdown",name:"description",value:this.state.description,onChange:this.handleFieldChange,InputProps:{style:{padding:"15px 15px",backgroundColor:"#FFFFFF"}}})}),Object(a.jsx)("br",{}),Object(a.jsxs)(G.a,{item:!0,xs:12,style:{paddingLeft:"10px",paddingBottom:"20px"},children:[Object(a.jsx)("span",{style:{paddingRight:"10px"},children:"Do you wish to use tabs to group items in this section?"}),Object(a.jsx)(et,{id:"genericTabs",checked:this.state.useTabs,onChange:this.toggleUseTabs})]}),this.state.useTabs&&Object(a.jsx)(G.a,{item:!0,xs:12,style:{paddingLeft:"10px",paddingBottom:"20px"},children:Object(a.jsx)("em",{children:"Note: All items to be grouped together should be assigned the same tab name."})}),Object(a.jsx)(Ze,{items:this.state.dataFormatted,onChangeValue:this.handleItemsChange,handleEdit:this.clickEdit,numCols:2,useTabs:this.state.useTabs}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),this.state.showEdit?Object(a.jsx)(In,{open:this.state.showEdit,title:this.state.title,data:this.state.dataFormatted,onChangeValue:this.handleItemsChange,handleClose:this.handleEditClose}):null]}),Object(a.jsx)(Me,{open:this.state.deleteOpen,title:"Please confirm to delete!",headerBgColor:"#AA91D7",content:"Do you wish to delete the generic resource section with title: <b>"+this.state.title+"</b>",handleClose:this.handleDelete,size:"xs",onChangeValue:this.handleItemsChange})]})})]})})}}]),n}(o.a.Component),Tn=n(475),En=n.n(Tn),Rn=n(474);function An(){var e=Object(ke.a)(["\n  & > .y {\n    display: block;\n  }\n  & > .n {\n    display: none;\n  }\n  .Mui-expanded & > .n {\n    display: block;\n  }\n  .Mui-expanded & > .y {\n    display: none;\n  }\n"]);return An=function(){return e},e}function Ln(){return Object(a.jsxs)("div",{children:["You can enter custom content using either Markdown syntax or HTML.",Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("h6",{children:Object(a.jsx)("b",{children:"Example of Markdown input:"})}),Object(a.jsx)("pre",{children:Object(a.jsx)("code",{children:"\n    #### Sample Table\n\n    | # | Model     | Status      |\n    |---|-----------|-------------|\n    | 1 | Model v1  | Published   |\n    | 2 | Model v2  | Published   |\n    | 3 | Model v2a | Development |\n    "})}),Object(a.jsx)("h6",{children:Object(a.jsx)("b",{children:"Example of HTML input:"})}),Object(a.jsx)("pre",{children:Object(a.jsx)("code",{children:'\n    <h4 id="sampletable">Sample Table</h4>\n    <table>\n        <thead>\n            <tr>\n                <td>#</td>\n                <td>Model</td>\n                <td>Status</td>\n            </tr>\n        </thead>\n        <tbody>\n            <tr>\n                <td>1</td>\n                <td>Model v1</td>\n                <td>Published</td>\n            </tr>\n            <tr>\n                <td>2</td>\n                <td>Model v2</td>\n                <td>Published</td>\n            </tr>\n            <tr>\n                <td>3</td>\n                <td>Model v2a</td>\n                <td>Development</td>\n            </tr>\n        </tbody>\n    </table>'})})]})}var Mn=Object(dt.a)((function(e){return Object(a.jsxs)("div",Object(k.a)(Object(k.a)({},e),{},{style:{color:"#000000"},children:[Object(a.jsx)("div",{className:"y",children:Object(a.jsx)("span",{style:{verticalAlign:"middle"},children:Object(a.jsx)(ot.a,{})})}),Object(a.jsx)("div",{className:"n",children:Object(a.jsx)("span",{style:{verticalAlign:"middle"},children:Object(a.jsx)(rt.a,{})})})]}))}))(An()),Bn=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).state=Object(k.a)({order:null,type:"section_custom",title:"Custom Section",icon:"check_box_outline_blank",data:"",dataFormatted:"",showHelp:!1,deleteOpen:!1,expanded:!0},e.data),a.handleFieldChange=a.handleFieldChange.bind(Object(g.a)(a)),a.clickHelp=a.clickHelp.bind(Object(g.a)(a)),a.handleHelpClose=a.handleHelpClose.bind(Object(g.a)(a)),a.setIcon=a.setIcon.bind(Object(g.a)(a)),a.handleDataInputOnBlur=a.handleDataInputOnBlur.bind(Object(g.a)(a)),a.handleDelete=a.handleDelete.bind(Object(g.a)(a)),a.handleMoveDown=a.handleMoveDown.bind(Object(g.a)(a)),a.handleMoveUp=a.handleMoveUp.bind(Object(g.a)(a)),a.toggleExpanded=a.toggleExpanded.bind(Object(g.a)(a)),a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.props.storeSectionInfo(this.state)}},{key:"toggleExpanded",value:function(){var e=this;console.log(this.state.expanded),this.setState((function(e){return{expanded:!e.expanded}}),(function(){e.props.storeSectionInfo(e.state)}))}},{key:"handleDelete",value:function(e){console.log(e),this.setState({deleteOpen:!1}),e&&this.props.handleDelete(this.state.order)}},{key:"handleMoveDown",value:function(e){e.stopPropagation(),this.props.handleMoveDown(this.state.order)}},{key:"handleMoveUp",value:function(e){e.stopPropagation(),this.props.handleMoveUp(this.state.order)}},{key:"handleFieldChange",value:function(e){var t=this;console.log(e);var n=e.target,a=n.value,i=n.name;this.setState(Object(N.a)({},i,a),(function(){t.props.storeSectionInfo(t.state)}))}},{key:"setIcon",value:function(e){var t=this;this.setState({icon:e},(function(){t.props.storeSectionInfo(t.state)}))}},{key:"clickHelp",value:function(){this.setState({showHelp:!0})}},{key:"handleHelpClose",value:function(){this.setState({showHelp:!1})}},{key:"handleDataInputOnBlur",value:function(e){var t=this,n=new Rn.Converter({tables:!0}).makeHtml(this.state.data);this.setState({dataFormatted:n},(function(){t.props.storeSectionInfo(t.state)}))}},{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{style:{width:"100%",paddingTop:"25px",paddingBottom:"25px"},children:Object(a.jsxs)(tt.a,{expanded:this.state.expanded,onChange:this.toggleExpanded,children:[Object(a.jsx)(nt.a,{expandIcon:Object(a.jsx)(Mn,{}),"aria-controls":"panel1a-content",id:"panel1a-header",style:{display:"flex",justifyContent:"space-between",borderStyle:"solid",borderColor:"#525252",borderWidth:"2px",backgroundColor:"#ABABAB",fontWeight:"bold",color:"#000000",width:"100%",paddingRight:"25px"},children:Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",flexDirection:"row",width:"100%"},children:[Object(a.jsx)("div",{style:{fontWeight:"bolder",fontSize:16,color:"#000000"},children:Object(a.jsx)("span",{style:{verticalAlign:"middle"},children:"Section: Custom HTML / Markdown"})}),Object(a.jsxs)("div",{children:[Object(a.jsx)(le.a,{title:"Delete this section",children:Object(a.jsx)(ct.a,{style:{height:"25px",width:"25px",marginRight:"30px",color:"#000000"},onClick:function(t){t.stopPropagation(),e.setState({deleteOpen:!0})},onFocus:function(e){return e.stopPropagation()}})}),Object(a.jsx)(le.a,{title:"Move section down",children:Object(a.jsx)(re.a,{stroke:"#000000",strokeWidth:1,style:{marginRight:"30px",transform:"rotate(90deg)",color:this.state.order===this.props.numResources-1?"#A1887F":"#000000"},onClick:function(t){return e.handleMoveDown(t)},onFocus:function(e){return e.stopPropagation()}})}),Object(a.jsx)(le.a,{title:"Move section up",children:Object(a.jsx)(re.a,{stroke:"#000000",strokeWidth:1,style:{marginRight:"20px",transform:"rotate(270deg)",color:0===this.state.order?"#A1887F":"#000000"},onClick:function(t){return e.handleMoveUp(t)},onFocus:function(e){return e.stopPropagation()}})})]})]})}),Object(a.jsx)(at.a,{style:{paddingLeft:0,paddingRight:0,paddingBottom:0},children:Object(a.jsxs)("div",{style:{backgroundColor:"#EAEAEA",width:"100%"},children:[Object(a.jsxs)("div",{style:{marginLeft:"10px",marginRight:"10px"},children:[Object(a.jsx)("br",{}),Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(a.jsx)("div",{style:{width:"50px"},children:Object(a.jsx)(Fe,{size:"35px",icon:this.state.icon,setIcon:this.setIcon})}),Object(a.jsx)("div",{style:{paddingLeft:"20px",flexGrow:1},children:Object(a.jsx)(M.a,{label:"Section Title",variant:"outlined",fullWidth:!0,name:"title",value:this.state.title,onChange:this.handleFieldChange,InputProps:{style:{padding:"5px 15px",backgroundColor:"#FFFFFF"}}})}),Object(a.jsx)("div",{style:{width:"50px",paddingLeft:"20px",paddingTop:"10px",justifyContent:"center",alignItems:"center"},children:Object(a.jsx)(le.a,{title:"Click for info on input format",children:Object(a.jsx)(En.a,{style:{width:30,height:30},onClick:this.clickHelp})})})]}),Object(a.jsx)("br",{}),Object(a.jsx)(G.a,{item:!0,xs:12,children:Object(a.jsx)(M.a,{multiline:!0,rows:"8",label:"Input custom content",variant:"outlined",fullWidth:!0,helperText:"Click on ? icon for info on input format.",name:"data",value:this.state.data,onChange:this.handleFieldChange,onBlur:this.handleDataInputOnBlur,InputProps:{style:{padding:"15px 15px",backgroundColor:"#FFFFFF",fontFamily:"'SFMono-Medium', 'SF Mono', 'Segoe UI Mono', 'Roboto Mono', 'Ubuntu Mono', Menlo, Consolas, Courier, monospace"}}})}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),this.state.showHelp?Object(a.jsx)(Te,{open:this.state.showHelp,title:"Custom Input",headerBgColor:"#ABABAB",handleClose:this.handleHelpClose,content:Object(a.jsx)(Ln,{})}):null]}),Object(a.jsx)(Me,{open:this.state.deleteOpen,title:"Please confirm to delete!",headerBgColor:"#ABABAB",content:"Do you wish to delete the custom resource section with title: <b>"+this.state.title+"</b>",handleClose:this.handleDelete,size:"xs"})]})})]})})}}]),n}(o.a.Component);function Nn(){var e=Object(ke.a)(["\n  position: relative;\n  z-index: 2;\n  float: left;\n  width: 200px;\n  line-height: 40px;\n  color: rgba(0, 0, 0, 0.6);\n  text-align: center;\n  cursor: pointer;\n\n  ",":checked + & {\n    transition: 0.15s ease-out;\n    color: #fff;\n  }\n"]);return Nn=function(){return e},e}function Wn(){var e=Object(ke.a)(["\n  display: block;\n  position: absolute;\n  z-index: 1;\n  top: 0px;\n  left: 0px;\n  width: 200px;\n  height: 40px;\n  background: #216ba5;\n  border-radius: 3px;\n  transition: left 0.25s ease-out;\n"]);return Wn=function(){return e},e}function Un(){var e=Object(ke.a)(["\n  display: none;\n"]);return Un=function(){return e},e}function Gn(){var e=Object(ke.a)(["\n  position: relative;\n  height: 40px;\n  width: 400px;\n  background-color: #e4e4e4;\n  border-radius: 3px;\n  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.3), 0 1px rgba(255, 255, 255, 0.1);\n"]);return Gn=function(){return e},e}var Hn=dt.a.div(Gn()),zn=dt.a.input(Un()),Kn=dt.a.span(Wn()),Vn=dt.a.label(Nn(),zn),qn=function(e){var t,n=e.title,i=e.onChange,o=e.id;return Object(a.jsx)(Vn,{onClick:function(){return i(n)},className:o,children:Object(a.jsx)("span",{style:{fontSize:16},children:(t=n,t.split(/\s+/).map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "))})})},Jn=function(e){var t=e.value,n=e.selected;return Object(a.jsx)(zn,{type:"radio",name:"switch",checked:n===t,onChange:function(){}})},$n=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(x.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={selected:e.props.selected},e.handleChange=function(t){e.setState({selected:t}),e.props.onChange(t)},e.selectionStyle=function(){return{left:"".concat(e.props.values.indexOf(e.state.selected)/2*100,"%")}},e}return Object(m.a)(n,[{key:"render",value:function(){var e=this,t=this.state.selected;return Object(a.jsxs)(Hn,{children:[this.props.values.map((function(n){return Object(a.jsxs)("span",{children:[Object(a.jsx)(Jn,{value:n,selected:t}),Object(a.jsx)(qn,{title:n,onChange:e.handleChange})]},n)})),Object(a.jsx)(Kn,{style:this.selectionStyle()})]})}}]),n}(o.a.Component),Yn=n(327),Xn=n.n(Yn),Zn=n.p+"static/media/LivePaper.3cee76f3.njk",Qn=n(190),ea=n.n(Qn),ta=n(328),na=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(){return Object(x.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=this.props.classes;return Object(a.jsx)(Et.a,Object(k.a)(Object(k.a)({},this.props),{},{classes:{colorPrimary:e.colorPrimary,barColorPrimary:e.barColorPrimary}}))}}]),n}(i.Component),aa=Object(P.a)((function(e){return{colorPrimary:{backgroundColor:"transparent",color:"#FF9800"}}}))(na);function ia(e){return Object(a.jsx)(F.a,{open:e.open,fullWidth:!0,maxWidth:"md",PaperProps:{style:{backgroundColor:"transparent",boxShadow:"none",width:"250"}},children:Object(a.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"100px",marginBottom:"100px"},children:Object(a.jsx)(aa,{thickness:5})})})}var oa=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(e,a){var i;return Object(x.a)(this,n),(i=t.call(this,e,a)).signal=C.a.CancelToken.source(),i.state={data:e.data,error:null,loading:!1,collab_id:e.data.collab_id,live_paper_name:e.data.live_paper_title,live_paper_name_unique:!0,mode:e.data.id?"Save to Existing":null},i.handleCancel=i.handleCancel.bind(Object(g.a)(i)),i.handleSave=i.handleSave.bind(Object(g.a)(i)),i.checkRequirementsOnPage=i.checkRequirementsOnPage.bind(Object(g.a)(i)),i.checkRequirementsOnPayload=i.checkRequirementsOnPayload.bind(Object(g.a)(i)),i.handleErrorDialogClose=i.handleErrorDialogClose.bind(Object(g.a)(i)),i.handleCollabIDChange=i.handleCollabIDChange.bind(Object(g.a)(i)),i.handleLivePaperNameChange=i.handleLivePaperNameChange.bind(Object(g.a)(i)),i.checkLivePaperNameUnique=i.checkLivePaperNameUnique.bind(Object(g.a)(i)),i.adjustForKGSchema=i.adjustForKGSchema.bind(Object(g.a)(i)),i.handleModeChange=i.handleModeChange.bind(Object(g.a)(i)),i}return Object(m.a)(n,[{key:"handleCancel",value:function(){this.props.onClose(!1)}},{key:"checkRequirementsOnPage",value:function(e){var t=!0;return this.state.collab_id||(t=!1),this.state.live_paper_name||(t=!1,this.setState({live_paper_name_unique:!1})),t}},{key:"checkRequirementsOnPayload",value:function(e){return!0}},{key:"handleErrorDialogClose",value:function(){this.setState({error:!1}),this.props.onClose(!1)}},{key:"handleCollabIDChange",value:function(e){var t=e.target.value;this.setState({collab_id:t})}},{key:"handleLivePaperNameChange",value:function(e){var t=e.target.value;this.setState({live_paper_name:t,live_paper_name_unique:null})}},{key:"checkLivePaperNameUnique",value:function(){var e=Object(ta.a)(ea.a.mark((function e(t){var n,a,i=this;return ea.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,Vt+"/livepapers/",a={cancelToken:this.signal.token,headers:{Authorization:"Bearer "+this.context.auth[0].token}},e.next=5,C.a.get("https://validation-v2.brainsimulation.eu/livepapers/",a).then((function(e){var a=null;a="Save to Existing"===i.state.mode?e.data.find((function(e){return e.title===t&&e.id!==i.props.data.id})):e.data.find((function(e){return e.title===t})),console.log(a),a?(i.setState({live_paper_name_unique:!1}),n=!1):(i.setState({live_paper_name_unique:!0}),n=!0)})).catch((function(e){console.log("Error: ",e.message),n=!1}));case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleSave",value:function(){var e=this;this.setState({loading:!0,live_paper_name_unique:null},Object(ta.a)(ea.a.mark((function t(){var n,a,i;return ea.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=Object(k.a)(Object(k.a)({},e.adjustForKGSchema(e.props.data)),{},{collab_id:e.state.collab_id,live_paper_title:e.state.live_paper_name}),console.log(n),!e.checkRequirementsOnPage()||!e.checkRequirementsOnPayload(n)){t.next=9;break}return t.next=5,e.checkLivePaperNameUnique(e.state.live_paper_name);case 5:t.sent?(a=Vt+"/livepapers/",i={cancelToken:e.signal.token,headers:{Authorization:"Bearer "+e.context.auth[0].token,"Content-type":"application/json"}},"Save to Existing"===e.state.mode?(console.log("PUT"),a+=e.props.data.id,C.a.put(a,n,i).then((function(t){e.props.setCollabID(e.state.collab_id),e.props.setLivePaperTitle(e.state.live_paper_name),e.props.setLivePaperModifiedDate(n.modified_date),e.setState({loading:!1}),Lt(e.props.enqueueSnackbar,e.props.closeSnackbar,"Saved to KG!","success"),e.props.onClose(!0)})).catch((function(t){C.a.isCancel(t)?console.log("Error: ",t.message):(console.log(t),console.log(t.response),e.setState({error:t.response})),e.setState({loading:!1})}))):(console.log("POST"),n.id=null,C.a.post(a,n,i).then((function(t){console.log(t),console.log("UUID = ",t.data.id),e.props.setID(t.data.id),e.props.setCollabID(e.state.collab_id),e.props.setLivePaperTitle(e.state.live_paper_name),e.props.setLivePaperModifiedDate(n.modified_date),e.setState({loading:!1}),Lt(e.props.enqueueSnackbar,e.props.closeSnackbar,"Saved to KG!","success"),e.props.onClose(!0)})).catch((function(t){C.a.isCancel(t)?console.log("Error: ",t.message):(console.log(t),console.log(t.response),e.setState({error:t.response})),e.setState({loading:!1})})))):e.setState({loading:!1}),t.next=10;break;case 9:e.setState({loading:!1});case 10:case"end":return t.stop()}}),t)}))))}},{key:"adjustForKGSchema",value:function(e){var t=JSON.parse(JSON.stringify(e));return t.resources.forEach((function(e,t){var n=JSON.parse(JSON.stringify(e));"section_custom"===e.type&&(e.description=n.dataFormatted,e.dataFormatted=[])})),t.resources.forEach((function(e,t){"section_custom"!==e.type&&e.dataFormatted.forEach((function(e,t){""===e.url&&(e.url="http://www.ToBeFilled.com")}))})),t.resources.forEach((function(e,t){"section_custom"!==e.type&&(e.data="None")})),t.resources.forEach((function(e,t){"section_custom"!==e.type&&e.dataFormatted.forEach((function(e,t){e.tab_name&&(e.label=e.label+"#-#"+e.tab_name)}))})),Mt(t)}},{key:"handleModeChange",value:function(e){this.setState({mode:e})}},{key:"render",value:function(){return this.state.error?Object(a.jsx)(Tt,{open:Boolean(this.state.error),handleErrorDialogClose:this.handleErrorDialogClose,error:this.state.error.message||this.state.error}):Object(a.jsxs)(F.a,{onClose:this.handleClose,"aria-labelledby":"simple-dialog-title",open:this.props.open,fullWidth:!0,maxWidth:"md",children:[Object(a.jsx)(T.a,{style:{backgroundColor:"#ffd180"},children:Object(a.jsx)("span",{style:{fontWeight:"bolder",fontSize:18},children:"Save Live Paper On EBRAINS Knowledge Graph"})}),Object(a.jsxs)(S.a,{children:[Object(a.jsx)(ia,{open:this.state.loading}),Object(a.jsxs)(ft.a,{my:2,children:["Each live paper needs to be associated with a Collab on the EBRAINS Collaboratory, to handle access permissions for viewing live papers prior to their publication, and their editing in future. Accordingly, please specify a Collab for this live paper. You may need to create a new Collab if you don't already have access to one."," ",Object(a.jsx)("a",{href:"https://wiki.ebrains.eu/bin/view/Collabs?clbaction=create",target:"_blank",rel:"noreferrer",children:"Click here"})," ","to create a new Collab."]}),Object(a.jsx)(ft.a,{my:2,children:Object(a.jsx)(Ce,{name:"project_id",itemNames:this.props.collab_list?this.props.collab_list.length>0?this.props.collab_list:["Please create a new Collab!"]:["Loading... please wait!"],label:"Collab",value:this.props.collab_list?this.props.collab_list.length>0?this.state.collab_id:"Please create a new Collab!":"Loading... please wait!",helperText:"Select a host Collab for this live paper",handleChange:this.handleCollabIDChange,disabled:!(this.props.collab_list&&this.props.collab_list.length>0)})}),!this.state.collab_id&&Object(a.jsx)("div",{style:{color:"red"},children:Object(a.jsx)("strong",{children:"A Collab must be specified!"})}),Object(a.jsxs)(ft.a,{my:2,children:[Object(a.jsx)("div",{children:Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Please specify a unique name to identify this live paper:"})})}),Object(a.jsx)("div",{children:Object(a.jsx)(M.a,{label:"Live Paper Name",variant:"outlined",fullWidth:!0,name:"password",value:this.state.live_paper_name,onChange:this.handleLivePaperNameChange,InputProps:{style:{padding:"5px 15px",width:"75%"}}})}),!this.state.live_paper_name&&Object(a.jsx)("div",{style:{color:"red",paddingTop:"10px"},children:Object(a.jsx)("strong",{children:"A Live Paper name must be specified!"})}),this.state.live_paper_name&&!1===this.state.live_paper_name_unique&&Object(a.jsx)("div",{style:{color:"red",paddingTop:"10px"},children:Object(a.jsxs)("strong",{children:["The live paper name '",Object(a.jsx)("pre",{style:{display:"inline"},children:this.state.live_paper_name}),"' is already us use by another live paper. Please enter a different name."]})})]}),this.props.data.id&&Object(a.jsxs)(ft.a,{my:3,children:[Object(a.jsx)("div",{children:Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"This live paper has previously been saved on the Knowledge Graph. Overwrite the existing entry, or save as new entry:"})})}),Object(a.jsx)("div",{children:Object(a.jsx)($n,{values:["Save to Existing","Save as New"],selected:this.state.mode,onChange:this.handleModeChange})})]}),Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",paddingLeft:"2.5%",paddingRight:"2.5%",paddingTop:"20px",paddingBottom:"20px"},children:[Object(a.jsx)(y.a,{variant:"contained",color:"primary",style:{width:"20%",backgroundColor:"#FF9800",color:"#000000",fontWeight:"bold",border:"solid",borderColor:"#000000",borderWidth:"1px"},onClick:this.handleCancel,children:"Cancel"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)(y.a,{variant:"contained",color:"primary",style:{width:"20%",backgroundColor:this.checkRequirementsOnPage()?"#8BC34A":"#FFFFFF",color:"#000000",fontWeight:"bold",border:"solid",borderColor:"#000000",borderWidth:"1px"},onClick:this.handleSave,children:"Save to KG"})]})]})]})}}]),n}(o.a.Component);oa.contextType=f;var sa=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).signal=C.a.CancelToken.source(),a.state={data:e.data,mode:e.mode||"Public",password:"",error:null},a.mailTo=o.a.createRef(),a.mailSubject=o.a.createRef(),a.mailBodyRef=o.a.createRef(),a.handleCancel=a.handleCancel.bind(Object(g.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(g.a)(a)),a.handleModeChange=a.handleModeChange.bind(Object(g.a)(a)),a.handlePasswordChange=a.handlePasswordChange.bind(Object(g.a)(a)),a}return Object(m.a)(n,[{key:"handleCancel",value:function(){this.props.onClose()}},{key:"handleSubmit",value:function(){console.log("TODO: Handle Submit!")}},{key:"handleModeChange",value:function(e){this.setState({mode:e,password:""})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"render",value:function(){var e=this;return this.state.error?Object(a.jsx)(Tt,{open:Boolean(this.state.error),handleErrorDialogClose:this.handleErrorDialogClose,error:this.state.error.message||this.state.error}):Object(a.jsxs)(F.a,{onClose:this.handleClose,"aria-labelledby":"simple-dialog-title",open:this.props.open,fullWidth:!0,maxWidth:"md",children:[Object(a.jsx)(T.a,{style:{backgroundColor:"#ffd180"},children:Object(a.jsx)("span",{style:{fontWeight:"bolder",fontSize:18},children:"Submit Live Paper"})}),Object(a.jsxs)(S.a,{children:[Object(a.jsx)(ft.a,{my:2,children:"Verify that you have entered all the required info in the live paper before proceeding."}),Object(a.jsxs)(ft.a,{my:2,children:[Object(a.jsx)("strong",{children:"Please specify the visibility mode for this live paper:"}),Object(a.jsx)(ft.a,{my:2,style:{marginBottom:"30px"},children:Object(a.jsx)("form",{children:Object(a.jsx)($n,{values:["Password-Protected","Public"],selected:this.state.mode,onChange:this.handleModeChange})})})]}),"Password-Protected"===this.state.mode&&Object(a.jsxs)(ft.a,{my:2,children:[Object(a.jsx)("div",{children:Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Please specify a password for accessing this live paper:"})})}),Object(a.jsx)("div",{children:Object(a.jsx)(M.a,{label:"password",variant:"outlined",fullWidth:!0,name:"password",type:"password",value:this.state.password,onChange:this.handlePasswordChange,InputProps:{style:{padding:"5px 15px",width:"75%"}}})})]}),"Public"===this.state.mode&&Object(a.jsx)(ft.a,{my:2,children:Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"To request publication of the live paper, do one of the following:"}),Object(a.jsx)("div",{style:{marginLeft:"25px",paddingTop:"10px",display:"list-item"},children:'Click on "Send Email" to open the draft email in your default email client. Send the email without editing any of its contents.'}),Object(a.jsxs)("div",{style:{marginLeft:"25px",marginRight:"25px",paddingTop:"10px",display:"list-item"},children:["Alternatively, copy the content below and email it to:"," ",Object(a.jsx)("strong",{ref:this.mailTo,onClick:function(){return navigator.clipboard.writeText(e.mailTo.current.innerText)},style:{cursor:"pointer"},children:"lucaleonardo.bologna@cnr.it"})," ","with the following subject:"," ",Object(a.jsx)("strong",{ref:this.mailSubject,onClick:function(){return navigator.clipboard.writeText(e.mailSubject.current.innerText)},style:{cursor:"pointer"},children:"Request to publish Live Paper"}),Object(a.jsxs)("div",{style:{marginTop:"10px",padding:"20px",border:"dashed",borderColor:"#000000",borderWidth:"2px",backgroundColor:"#D9D9D9",cursor:"pointer"},ref:this.mailBodyRef,onClick:function(){navigator.clipboard.writeText(e.mailBodyRef.current.innerText),Lt(e.props.enqueueSnackbar,e.props.closeSnackbar,"Copied to clipboard!","info")},children:["We would like to request the publication of our live paper.",Object(a.jsx)("br",{}),"The details are as follows:",Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),"ID: AAf2e856-27a8-4b8d-9ec3-4e2581c546AA",Object(a.jsx)("br",{}),"Title: Some title here"]})]})]})}),Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",paddingLeft:"2.5%",paddingRight:"2.5%",paddingTop:"20px",paddingBottom:"20px"},children:[Object(a.jsx)(y.a,{variant:"contained",color:"primary",style:{width:"20%",backgroundColor:"#FF9800",color:"#000000",fontWeight:"bold",border:"solid",borderColor:"#000000",borderWidth:"1px"},onClick:this.handleCancel,children:"Cancel"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),"Public"===this.state.mode&&Object(a.jsx)(Kt.a,{style:{width:"20%"},target:"_blank",rel:"noreferrer",underline:"none",href:"mailto:lucaleonardo.bologna@cnr.it, shailesh.appukuttan@cnrs.fr?subject=Request%20to%20publish%20Live%20Paper&body=We%20would%20like%20to%20request%20the%20publication%20of%20our%20live%20paper.%0AThe%20details%20are%20as%20follows%3A%0A%0AID%3A%20AAf2e856-27a8-4b8d-9ec3-4e2581c546AA%0ATitle%3A%20Some%20title%20here",children:Object(a.jsx)(y.a,{variant:"contained",color:"primary",style:{width:"100%",backgroundColor:"#8BC34A",color:"#000000",fontWeight:"bold",border:"solid",borderColor:"#000000",borderWidth:"1px"},children:"Send Email"})}),"Password-Protected"===this.state.mode&&Object(a.jsx)(y.a,{variant:"contained",color:"primary",style:{width:"20%",backgroundColor:"#8BC34A",color:"#000000",fontWeight:"bold",border:"solid",borderColor:"#000000",borderWidth:"1px"},onClick:this.handleSubmit,children:"Submit"})]})]})]})}}]),n}(o.a.Component);ae()(C.a,{retries:3,retryDelay:function(e){return 1e3*e}});var ra={backgroundColor:"#FFD180",fontSize:"20px",color:"black",textAlign:"center",position:"fixed",left:"50%",transform:"translateX(-50%)",bottom:"0",height:"80px",zIndex:"1",paddingBottom:"75px"},la={display:"block",padding:"20px",height:"60px"};function ca(e){var t=e.children;return Object(a.jsxs)("div",{style:{zIndex:"2147483638"},children:[Object(a.jsx)("div",{style:la,className:"mycontainer"}),Object(a.jsx)("div",{style:ra,className:"mycontainer",children:t})]})}var da=Object(P.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,n=e.classes,i=e.onClose,o=Object(w.a)(e,["children","classes","onClose"]);return Object(a.jsxs)(T.a,Object(k.a)(Object(k.a)({disableTypography:!0,className:n.root},o),{},{children:[Object(a.jsx)(E.a,{variant:"h6",children:t}),i?Object(a.jsx)(R.a,{"aria-label":"close",className:n.closeButton,onClick:i,children:Object(a.jsx)(L.a,{})}):null]}))})),ha=["None","Apache License 2.0",'BSD 2-Clause "Simplified" License','BSD 3-Clause "New" or "Revised" License',"Creative Commons Attribution 4.0 International","Creative Commons Attribution Non Commercial 4.0 International","Creative Commons Attribution Share Alike 4.0 International","Creative Commons Zero v1.0 Universal","GNU General Public License v2.0 or later","GNU General Public License v3.0 or later","GNU Lesser General Public License v3.0 or later","MIT License"],pa=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(e,a){var i;return Object(x.a)(this,n),(i=t.call(this,e,a)).signal=C.a.CancelToken.source(),i.state={id:"",lp_tool_version:"0.2",modified_date:new Date,authors:[{firstname:"",lastname:"",affiliation:""}],corresponding_author:{firstname:"",lastname:"",affiliation:""},created_author:[{firstname:"",lastname:"",affiliation:""}],approved_author:{firstname:"",lastname:"",affiliation:""},year:(new Date).toISOString().replace(Object(U.a)(/^([0-9]+)\x2D([0-9]+)\x2D([0-9]+)T.*$/,{year:1,month:2,day:3}),"$<year>-$<month>-$<day>"),associated_paper_title:"",live_paper_title:"",paper_published:!0,journal:"",url:"",citation:"",doi:"",abstract:"",license:"None",collab_list:null,collab_id:"",resources_description:"",resources:[],saveOpen:!1,submitOpen:!1,validFilterValues:null},i.state=Object(k.a)(Object(k.a)({},i.state),e.data),i.handleClose=i.handleClose.bind(Object(g.a)(i)),i.handlePreview=i.handlePreview.bind(Object(g.a)(i)),i.handleDownload=i.handleDownload.bind(Object(g.a)(i)),i.handleSaveOpen=i.handleSaveOpen.bind(Object(g.a)(i)),i.handleSaveClose=i.handleSaveClose.bind(Object(g.a)(i)),i.handleSubmitOpen=i.handleSubmitOpen.bind(Object(g.a)(i)),i.handleSubmitClose=i.handleSubmitClose.bind(Object(g.a)(i)),i.handleFieldChange=i.handleFieldChange.bind(Object(g.a)(i)),i.handlePublishedChange=i.handlePublishedChange.bind(Object(g.a)(i)),i.handleYearChange=i.handleYearChange.bind(Object(g.a)(i)),i.handleAuthorsChange=i.handleAuthorsChange.bind(Object(g.a)(i)),i.handleCreatedAuthorChange=i.handleCreatedAuthorChange.bind(Object(g.a)(i)),i.makePageTitleString=i.makePageTitleString.bind(Object(g.a)(i)),i.makeAuthorsString=i.makeAuthorsString.bind(Object(g.a)(i)),i.makeCreatedAuthorsString=i.makeCreatedAuthorsString.bind(Object(g.a)(i)),i.makeAffiliationsString=i.makeAffiliationsString.bind(Object(g.a)(i)),i.handleAddSection=i.handleAddSection.bind(Object(g.a)(i)),i.storeSectionInfo=i.storeSectionInfo.bind(Object(g.a)(i)),i.removeExcessData=i.removeExcessData.bind(Object(g.a)(i)),i.addDerivedData=i.addDerivedData.bind(Object(g.a)(i)),i.getCollabList=i.getCollabList.bind(Object(g.a)(i)),i.setID=i.setID.bind(Object(g.a)(i)),i.setCollabID=i.setCollabID.bind(Object(g.a)(i)),i.setLivePaperTitle=i.setLivePaperTitle.bind(Object(g.a)(i)),i.setLivePaperModifiedDate=i.setLivePaperModifiedDate.bind(Object(g.a)(i)),i.verifyDataBeforeSubmit=i.verifyDataBeforeSubmit.bind(Object(g.a)(i)),i.checkPersonInStateAuthors=i.checkPersonInStateAuthors.bind(Object(g.a)(i)),i.deleteResourceSection=i.deleteResourceSection.bind(Object(g.a)(i)),i.moveDownResourceSection=i.moveDownResourceSection.bind(Object(g.a)(i)),i.moveUpResourceSection=i.moveUpResourceSection.bind(Object(g.a)(i)),i.retrieveFilterValidValues=i.retrieveFilterValidValues.bind(Object(g.a)(i)),i}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.getCollabList(),this.retrieveFilterValidValues()}},{key:"deleteResourceSection",value:function(e){console.log("Delete resource with order: "+e);var t=this.state.resources;t=(t=t.filter((function(t){return t.order!==e}))).map((function(t){return t.order>e&&(t.order=t.order-1),t})),this.setState({resources:t}),Lt(this.props.enqueueSnackbar,this.props.closeSnackbar,"Section deleted!","info")}},{key:"moveDownResourceSection",value:function(e){console.log("Move down resource with order: "+e);var t=Object.keys(this.state.resources).length-1;if((e||0===e)&&e<t){var n=this.state.resources;(n=n.map((function(t){return t.order===e?t.order=e+1:t.order===e+1&&(t.order=e),t}))).sort(Nt),this.setState({resources:n})}}},{key:"moveUpResourceSection",value:function(e){if(console.log("Move up resource with order: "+e),(e||0===e)&&e>0){var t=this.state.resources;(t=t.map((function(t){return t.order===e?t.order=e-1:t.order===e-1&&(t.order=e),t}))).sort(Nt),this.setState({resources:t})}}},{key:"checkPersonInStateAuthors",value:function(e){return"string"===typeof e?this.state.authors.find((function(t){return t.firstname+" "+t.lastname===e})):this.state.authors.find((function(t){return t.firstname===e.firstname&&t.lastname===e.lastname}))}},{key:"removeExcessData",value:function(){var e=JSON.parse(JSON.stringify(this.state));["saveOpen","submitOpen","collab_list","paper_published","validFilterValues"].forEach((function(t){return delete e[t]}));var t,n=Object(W.a)(e.resources);try{var a=function(){var e=t.value;["dataOk","showEdit","showKGInput","expanded","useTabs","deleteOpen"].forEach((function(t){return delete e[t]}))};for(n.s();!(t=n.n()).done;)a()}catch(i){n.e(i)}finally{n.f()}return e}},{key:"addDerivedData",value:function(e){return e.page_title=this.makePageTitleString(),e.authors_string=this.makeAuthorsString(),e.created_authors_string=this.makeCreatedAuthorsString(),e.affiliations_string=this.makeAffiliationsString(),e.resources.forEach((function(e,t){if("section_custom"!==e.type){var n=[];e.dataFormatted.forEach((function(e,t){n.push(e.tab_name||"")})),n=(n=n.filter((function(e,t,n){return n.indexOf(e)===t}))).map((function(e){return""===e?"(no tab name)":e})),e.tabs=n}})),e}},{key:"handleClose",value:function(){this.props.onClose()}},{key:"handlePreview",value:function(){var e,t=this.addDerivedData(this.removeExcessData(this.state));console.log(t),e=t,fetch(Zn).then((function(e){return e.text()})).then((function(t){var n=Xn.a.renderString(t,e),a=window.open("");a.document.write(n),a.document.close()})),Lt(this.props.enqueueSnackbar,this.props.closeSnackbar,"Preview generated...","info")}},{key:"handleDownload",value:function(){var e,t=this.addDerivedData(this.removeExcessData(this.state));e=t,fetch(Zn).then((function(e){return e.text()})).then((function(t){var n=Xn.a.renderString(t,e),a=document.createElement("a"),i=new Blob([n],{type:"text/html"});a.href=URL.createObjectURL(i);var o=(new Date).toISOString().replace(/T/,"_").replaceAll(":","-").replace(/\..+/,"");a.download="livepaper_"+o+".html",document.body.appendChild(a),a.click()})),Lt(this.props.enqueueSnackbar,this.props.closeSnackbar,"HTML file downloaded...","success"),t=this.removeExcessData(this.state);var n=new Date,a=Object(k.a)(Object(k.a)({},t),{},{modified_date:n}),i=JSON.stringify(a,null,4),o=new Blob([i],{type:"text/plain"}),s=URL.createObjectURL(o),r=document.createElement("a"),l=(new Date).toISOString().replace(/T/,"_").replaceAll(":","-").replace(/\..+/,"");r.download="livepaper_"+l+".lpp",r.href=s,r.click(),Lt(this.props.enqueueSnackbar,this.props.closeSnackbar,".lpp file downloaded...","success"),this.setState({modified_date:n})}},{key:"handleSaveOpen",value:function(){this.setState({saveOpen:!0})}},{key:"handleSaveClose",value:function(){this.setState({saveOpen:!1})}},{key:"handleSubmitOpen",value:function(){this.setState({submitOpen:!0})}},{key:"handleSubmitClose",value:function(){this.setState({submitOpen:!1})}},{key:"handleFieldChange",value:function(e){var t=e.target,n=t.value,a=t.name;if("corresponding_author"===a){var i=this.checkPersonInStateAuthors(n);this.setState((function(e){return{corresponding_author:Object(k.a)(Object(k.a)({},e.corresponding_author),{},{firstname:i.firstname,lastname:i.lastname,affiliation:i.affiliation})}}))}else if("created_author"===a)if("-- Other Person --"===n)this.setState({created_author:[{firstname:"",lastname:"",affiliation:""}],approved_author:{firstname:"",lastname:"",affiliation:""}});else{var o=this.checkPersonInStateAuthors(n);this.setState((function(e){return{created_author:[{firstname:o.firstname,lastname:o.lastname,affiliation:o.affiliation}],approved_author:{firstname:o.firstname,lastname:o.lastname,affiliation:o.affiliation}}}))}else if("created_author_other_firstname"===a)this.setState((function(e){return{created_author:[Object(k.a)(Object(k.a)({},e.created_author[0]),{},{firstname:n})]}}));else if("created_author_other_lastname"===a)this.setState((function(e){return{created_author:[Object(k.a)(Object(k.a)({},e.created_author[0]),{},{lastname:n})]}}));else if("created_author_other_affiliation"===a)this.setState((function(e){return{created_author:[Object(k.a)(Object(k.a)({},e.created_author[0]),{},{affiliation:n})]}}));else if("approved_author"===a){var s=this.checkPersonInStateAuthors(n);this.setState({approved_author:{firstname:s.firstname,lastname:s.lastname,affiliation:s.affiliation}})}else this.setState(Object(N.a)({},a,n))}},{key:"handlePublishedChange",value:function(e){console.log(e),this.setState({paper_published:"Published"===e,year:"Published"===e?(new Date).toISOString().replace(Object(U.a)(/^([0-9]+)\x2D([0-9]+)\x2D([0-9]+)T.*$/,{year:1,month:2,day:3}),"$<year>-$<month>-$<day>"):new Date("9999-01-01").toISOString().replace(Object(U.a)(/^([0-9]+)\x2D([0-9]+)\x2D([0-9]+)T.*$/,{year:1,month:2,day:3}),"$<year>-$<month>-$<day>")})}},{key:"handleYearChange",value:function(e){console.log(e),this.setState({year:e.toISOString().replace(Object(U.a)(/^([0-9]+)\x2D([0-9]+)\x2D([0-9]+)T.*$/,{year:1,month:2,day:3}),"$<year>-$<month>-$<day>")})}},{key:"handleAuthorsChange",value:function(e){0===e.length&&(e=[{firstname:"",lastname:"",affiliation:""}]),this.setState({authors:e})}},{key:"handleCreatedAuthorChange",value:function(e){0===e.length&&(e=[{firstname:"",lastname:"",affiliation:""}]),this.setState({created_author:e})}},{key:"makePageTitleString",value:function(){var e=new Date(this.state.year).getFullYear(),t=this.state.authors;return 0===t.length?"":1===t.length?t[0].lastname+" "+(9999===e?"(unpublished)":e):2===t.length?t[0].lastname+" & "+t[1].lastname+" "+(9999===e?"(unpublished)":e):t[0].lastname+" et al. "+(9999===e?"(unpublished)":e)}},{key:"makeAuthorsString",value:function(){var e="";return this.state.authors.forEach((function(t,n){""===t.firstname.trim()&&""===t.lastname.trim()||(""!==e&&(e+=", "),e=e+t.firstname+" "+t.lastname+" "+(n+1).toString().sup())})),e}},{key:"makeCreatedAuthorsString",value:function(){var e="";return this.state.created_author.forEach((function(t,n){""===t.firstname.trim()&&""===t.lastname.trim()||(""!==e&&(e+=", "),e=e+t.firstname+" "+t.lastname,t.affiliation&&(e+=" ("+t.affiliation.italics()+")"))})),e}},{key:"makeAffiliationsString",value:function(){var e=[];return this.state.authors.forEach((function(t){t.affiliation.split(";").map((function(e){return e.trim()})).forEach((function(t){""===t||e.includes(t)||e.push(t)}))})),e.forEach((function(e,t){this[t]=(t+1).toString().sup()+" "+e}),e),e.join(", ")}},{key:"handleAddSection",value:function(e){this.setState((function(t){return{resources:[].concat(Object(B.a)(t.resources),[{order:t.resources.length,type:e}])}}))}},{key:"storeSectionInfo",value:function(e){var t=this.state.resources.slice();t[e.order]=e,this.setState({resources:t})}},{key:"getCollabList",value:function(){var e=this,t={cancelToken:this.signal.token,headers:{Authorization:"Bearer "+this.context.auth[0].token}};C.a.get("https://validation-v2.brainsimulation.eu/projects",t).then((function(t){var n=[];t.data.forEach((function(e){e.permissions.UPDATE&&n.push(e.project_id)})),n.sort(),e.setState({collab_list:n})})).catch((function(e){console.log("Error: ",e.message)}))}},{key:"setID",value:function(e){console.log(e),this.setState({id:e})}},{key:"setCollabID",value:function(e){console.log(e),this.setState({collab_id:e})}},{key:"setLivePaperTitle",value:function(e){console.log(e),this.setState({live_paper_title:e})}},{key:"setLivePaperModifiedDate",value:function(e){console.log(e),this.setState({modified_date:e})}},{key:"verifyDataBeforeSubmit",value:function(){}},{key:"retrieveFilterValidValues",value:function(){var e=this,t={cancelToken:this.signal.token,headers:{Authorization:"Bearer "+this.context.auth[0].token}};C.a.get("https://validation-v2.brainsimulation.eu/vocab/",t).then((function(t){e.setState({validFilterValues:t.data})})).catch((function(e){console.log("Error: ",e.message)}))}},{key:"render",value:function(){var e=this;console.log(this.state);var t=null;this.state.saveOpen&&(t=Object(a.jsx)(oa,{data:Object(k.a)(Object(k.a)({},this.removeExcessData(this.state)),{},{modified_date:new Date}),open:this.state.saveOpen,onClose:this.handleSaveClose,setID:this.setID,setCollabID:this.setCollabID,setLivePaperTitle:this.setLivePaperTitle,setLivePaperModifiedDate:this.setLivePaperModifiedDate,collab_list:this.state.collab_list,enqueueSnackbar:this.props.enqueueSnackbar,closeSnackbar:this.props.closeSnackbar}));var n=null;return this.state.submitOpen&&(n=Object(a.jsx)(sa,{data:this.state,open:this.state.submitOpen,onClose:this.handleSubmitClose,enqueueSnackbar:this.props.enqueueSnackbar,closeSnackbar:this.props.closeSnackbar})),Object(a.jsxs)(F.a,{fullScreen:!0,disableBackdropClick:!0,disableEscapeKeyDown:!0,onClose:this.handleClose,"aria-labelledby":"simple-dialog-title",open:this.props.open||!1,children:[Object(a.jsx)(da,{onClose:this.handleClose}),Object(a.jsxs)(S.a,{children:[Object(a.jsxs)("div",{className:"mycontainer",style:{textAlign:"left"},children:[Object(a.jsxs)("div",{className:"box rounded centered",children:[Object(a.jsx)("a",{href:"../../index.html",className:"waves-effect waves-light",style:{textAlign:"center",color:"black"},children:Object(a.jsx)("table",{children:Object(a.jsx)("tbody",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:Object(a.jsx)("img",{className:"ebrains-icon-small",src:"./imgs/ebrains_logo.png",alt:"EBRAINS logo",style:{width:"25px",height:"25px"}})}),Object(a.jsx)("td",{children:Object(a.jsx)("span",{className:"title-style subtitle",style:{paddingLeft:"5px"},children:"EBRAINS Live Papers"})})]})})})}),Object(a.jsx)("h5",{className:"title-style",children:"Live Paper Builder"})]}),Object(a.jsxs)("div",{style:{paddingLeft:"5%",paddingRight:"5%",textAlign:"justify"},children:[Object(a.jsxs)("div",{children:["Follow the steps listed below to create the live paper. You can preview the live paper and/or download it at any time by clicking on the buttons on the bottom of the page. It also provides you an option to save your work online before proceeding. Once completed you can submit for publishing the live paper online.",Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),"When downloading, an HTML version of the live paper and a file with extension '.lpp' both will be downloaded. You can upload the latter file at any point to update the live paper contents. Please do not manually edit these files, as it could render them unreadable by this tool."]}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{children:Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Enter the complete title of your manuscript / paper:"})})}),Object(a.jsx)("div",{children:Object(a.jsx)(M.a,{label:"Title",variant:"outlined",fullWidth:!0,name:"associated_paper_title",value:this.state.associated_paper_title,onChange:this.handleFieldChange,InputProps:{style:{padding:"5px 15px"}}})}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{children:Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"Specify the status of the article:"}),Object(a.jsx)("br",{}),Object(a.jsx)("i",{children:"Articles submitted to preprint repositories, such as bioRxiv, are considered as unpublished."})]})}),Object(a.jsx)("form",{children:Object(a.jsx)($n,{values:["Published","Unpublished"],selected:this.state.paper_published?"Published":"Unpublished",onChange:this.handlePublishedChange})}),Object(a.jsx)("br",{}),this.state.paper_published&&Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Enter the year of publication:"})})}),Object(a.jsx)("div",{children:Object(a.jsx)("div",{children:Object(a.jsx)(Q.a,{utils:te.a,children:Object(a.jsx)(ee.a,{label:"Year",inputVariant:"outlined",views:["year"],name:"year",value:new Date(this.state.year),minDate:new Date("2010-01-01"),maxDate:new Date,onChange:this.handleYearChange,animateYearScrolling:!0,InputProps:{style:{borderBottom:"0px",padding:"5px 15px 5px 15px",width:"100px"}}})})})}),Object(a.jsx)("br",{})]}),Object(a.jsxs)("div",{children:[Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"Enter details of all authors in the required order:"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("i",{children:"You can enter multiple affiliations per author by separating each with a semi-colon ( ; ). Note that an affiliation must be input identically across multiple authors, for it to be identified as the same affliation."})]}),Object(a.jsx)("br",{})]}),Object(a.jsx)("div",{children:Object(a.jsx)(ue,{items:this.state.authors,onChangeValue:this.handleAuthorsChange})}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{children:Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Specify the corresponding author:"})})}),Object(a.jsx)("div",{children:Object(a.jsx)(Ce,{itemNames:this.state.authors?this.state.authors.map((function(e){return e.firstname+" "+e.lastname})):[],label:"Corresponding Author",name:"corresponding_author",value:this.state.corresponding_author.firstname?this.state.corresponding_author.firstname+" "+this.state.corresponding_author.lastname:"",handleChange:this.handleFieldChange})}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{children:Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Specify the person creating this live paper:"})})}),Object(a.jsxs)("div",{children:[Object(a.jsx)(Ce,{itemNames:this.state.authors?this.state.authors.map((function(e){return e.firstname+" "+e.lastname})).concat("-- Other Person --"):[],label:"Created By",name:"created_author",value:this.checkPersonInStateAuthors(this.state.created_author[0])?this.state.created_author[0].firstname+" "+this.state.created_author[0].lastname:"-- Other Person --",handleChange:this.handleFieldChange}),Object(a.jsx)("br",{})]}),!this.checkPersonInStateAuthors(this.state.created_author[0])&&Object(a.jsx)("div",{children:Object(a.jsx)(ue,{items:this.state.created_author,onChangeValue:this.handleCreatedAuthorChange})}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),!this.checkPersonInStateAuthors(this.state.created_author[0])&&Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:Object(a.jsx)("p",{children:Object(a.jsxs)("strong",{children:["Since the live paper is being created by a person who isn't an author on the article (as indicated above), the live paper needs to be approved by one of the original authors. Specify the authorising author:"," "]})})}),Object(a.jsx)("div",{children:Object(a.jsx)(Ce,{itemNames:this.state.authors?this.state.authors.map((function(e){return e.firstname+" "+e.lastname})):[],label:"Approved By",name:"approved_author",value:this.state.approved_author.firstname?this.state.approved_author.firstname+" "+this.state.approved_author.lastname:"",handleChange:this.handleFieldChange})}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{})]}),Object(a.jsx)("div",{children:Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Specify the journal in which paper is published (leave empty if awaiting publication):"})})}),Object(a.jsx)("div",{children:Object(a.jsx)(M.a,{label:"Journal",variant:"outlined",fullWidth:!0,name:"journal",value:this.state.journal,onChange:this.handleFieldChange,InputProps:{style:{padding:"5px 15px"}}})}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{children:Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Provide the URL to access article (leave empty if awaiting publication or link to bioRxiv, if available):"})})}),Object(a.jsx)("div",{children:Object(a.jsx)(M.a,{label:"Article URL",variant:"outlined",fullWidth:!0,name:"url",value:this.state.url,onChange:this.handleFieldChange,InputProps:{style:{padding:"5px 15px"}}})}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{children:Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Specify the citation text to be used for article (leave empty if awaiting publication):"})})}),Object(a.jsx)("div",{children:Object(a.jsx)(M.a,{multiline:!0,rows:"3",label:"Citation",variant:"outlined",fullWidth:!0,name:"citation",value:this.state.citation,onChange:this.handleFieldChange,InputProps:{style:{padding:"15px 15px"}}})}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{children:Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Indicate the DOI entry for article (leave empty if awaiting publication):"})})}),Object(a.jsx)("div",{children:Object(a.jsx)(M.a,{label:"DOI",variant:"outlined",fullWidth:!0,name:"doi",value:this.state.doi,onChange:this.handleFieldChange,InputProps:{style:{padding:"5px 15px"}}})}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{children:Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Provide the abstract of your manuscript / paper:"})})}),Object(a.jsx)("div",{children:Object(a.jsx)(G.a,{item:!0,xs:12,children:Object(a.jsx)(M.a,{multiline:!0,rows:"8",label:"Abstract",variant:"outlined",fullWidth:!0,helperText:"The description may be formatted with Markdown",name:"abstract",value:this.state.abstract,onChange:this.handleFieldChange,InputProps:{style:{padding:"15px 15px"}}})})}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{children:Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Specify the license to be applied for the contents displayed in this live paper:"})})}),Object(a.jsx)("div",{children:Object(a.jsx)(Ce,{itemNames:ha,label:"License",name:"license",value:this.state.license,handleChange:this.handleFieldChange,helperText:"For guidance on choosing a licence, see https://choosealicense.com"})}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("h5",{children:"Resources"}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{children:Object(a.jsx)(G.a,{item:!0,xs:12,children:Object(a.jsx)(M.a,{multiline:!0,rows:"4",label:"Description of resources (optional)",variant:"outlined",fullWidth:!0,helperText:"The description may be formatted with Markdown",name:"resources_description",value:this.state.resources_description,onChange:this.handleFieldChange,InputProps:{style:{padding:"15px 15px"}}})})}),Object.keys(this.state.resources).length>0?Object.values(this.state.resources).map((function(t,n){return"section_morphology"===t.type?Object(a.jsx)(jt,{storeSectionInfo:e.storeSectionInfo,data:t,numResources:Object.keys(e.state.resources).length,handleDelete:e.deleteResourceSection,handleMoveDown:e.moveDownResourceSection,handleMoveUp:e.moveUpResourceSection},n):"section_traces"===t.type?Object(a.jsx)(hn,{storeSectionInfo:e.storeSectionInfo,data:t,numResources:Object.keys(e.state.resources).length,handleDelete:e.deleteResourceSection,handleMoveDown:e.moveDownResourceSection,handleMoveUp:e.moveUpResourceSection,validFilterValues:e.state.validFilterValues},n):"section_models"===t.type?Object(a.jsx)(wn,{storeSectionInfo:e.storeSectionInfo,data:t,numResources:Object.keys(e.state.resources).length,handleDelete:e.deleteResourceSection,handleMoveDown:e.moveDownResourceSection,handleMoveUp:e.moveUpResourceSection,validFilterValues:e.state.validFilterValues},n):"section_generic"===t.type?Object(a.jsx)(Pn,{storeSectionInfo:e.storeSectionInfo,data:t,numResources:Object.keys(e.state.resources).length,handleDelete:e.deleteResourceSection,handleMoveDown:e.moveDownResourceSection,handleMoveUp:e.moveUpResourceSection},n):"section_custom"===t.type?Object(a.jsx)(Bn,{storeSectionInfo:e.storeSectionInfo,data:t,numResources:Object.keys(e.state.resources).length,handleDelete:e.deleteResourceSection,handleMoveDown:e.moveDownResourceSection,handleMoveUp:e.moveUpResourceSection},n):null})):null,Object(a.jsx)("br",{})]}),Object(a.jsxs)("div",{style:{paddingLeft:"10%",paddingRight:"10%"},children:[Object(a.jsx)("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",paddingLeft:"2.5%",paddingRight:"2.5%",paddingTop:"10px",paddingBottom:"10px",borderStyle:"solid",borderColor:"#0D47A1",borderWidth:"2px",backgroundColor:"#01579B",fontWeight:"bold",borderBottom:"None",color:"#FFFFFF"},children:"Click to add a resource section:"}),Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",paddingLeft:"2.5%",paddingRight:"2.5%",paddingTop:"20px",paddingBottom:"20px",borderStyle:"solid",borderColor:"#0D47A1",borderWidth:"2px",backgroundColor:"#BED3F3"},children:[Object(a.jsx)(y.a,{variant:"contained",color:"primary",style:{width:"17.5%",backgroundColor:"#FFD54F",color:"#000000",fontWeight:"bold",border:"solid",borderColor:"#000000",borderWidth:"1px"},startIcon:Object(a.jsx)(z.a,{style:{width:30,height:30}}),onClick:function(){return e.handleAddSection("section_morphology")},children:"Morphology"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)(y.a,{variant:"contained",color:"primary",style:{width:"17.5%",backgroundColor:"#8BC34A",color:"#000000",fontWeight:"bold",border:"solid",borderColor:"#000000",borderWidth:"1px"},startIcon:Object(a.jsx)(V.a,{style:{width:30,height:30}}),onClick:function(){return e.handleAddSection("section_traces")},children:"Traces"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)(y.a,{variant:"contained",color:"secondary",style:{width:"17.5%",backgroundColor:"#E5B8B3",color:"#000000",fontWeight:"bold",border:"solid",borderColor:"#000000",borderWidth:"1px"},startIcon:Object(a.jsx)(Y.a,{style:{width:30,height:30}}),onClick:function(){return e.handleAddSection("section_models")},children:"Models"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)(y.a,{variant:"contained",color:"secondary",style:{width:"17.5%",backgroundColor:"#B39DDB",color:"#000000",fontWeight:"bold",border:"solid",borderColor:"#000000",borderWidth:"1px"},startIcon:Object(a.jsx)(J.a,{style:{width:30,height:30}}),onClick:function(){return e.handleAddSection("section_generic")},children:"Generic"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)(y.a,{variant:"contained",color:"secondary",style:{width:"17.5%",backgroundColor:"#D9D9D9",color:"#000000",fontWeight:"bold",border:"solid",borderColor:"#000000",borderWidth:"1px"},startIcon:Object(a.jsx)(Z.a,{style:{width:30,height:30}}),onClick:function(){return e.handleAddSection("section_custom")},children:"Custom"})]})]}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{})]}),Object(a.jsxs)(ca,{children:[Object(a.jsx)("div",{style:{height:"10px",backgroundColor:"#FFFFFF"}}),Object(a.jsxs)("div",{style:{border:"1px solid #000000"},children:[Object(a.jsxs)("div",{className:"rainbow-row",style:{borderBottom:"1px solid #000000"},children:[Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{})]}),Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center"},children:[Object(a.jsx)(y.a,{variant:"contained",color:"primary",style:{width:"17.5%",backgroundColor:"#FF9800",color:"#000000",fontWeight:"bold",border:"solid",borderColor:"#000000",borderWidth:"1px"},onClick:this.handlePreview,children:"Preview"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)(y.a,{variant:"contained",color:"primary",style:{width:"17.5%",backgroundColor:"#009688",color:"#000000",fontWeight:"bold",border:"solid",borderColor:"#000000",borderWidth:"1px"},onClick:this.handleDownload,children:"Download"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)(y.a,{variant:"contained",color:"secondary",style:{width:"17.5%",backgroundColor:"#01579b",fontWeight:"bold",border:"solid",borderColor:"#000000",borderWidth:"1px"},onClick:this.handleSaveOpen,children:"Save"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)(y.a,{variant:"contained",color:"secondary",style:{width:"17.5%",backgroundColor:"#8b0d0d",fontWeight:"bold",border:"solid",borderColor:"#000000",borderWidth:"1px"},onClick:this.handleSubmitOpen,children:"Submit"})]})]})]}),t,n]})]})}}]),n}(o.a.Component);pa.contextType=f;var ua=Object(D.b)(pa),ba=Object(P.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,n=e.classes,i=e.onClose,o=Object(w.a)(e,["children","classes","onClose"]);return Object(a.jsxs)(T.a,Object(k.a)(Object(k.a)({disableTypography:!0,className:n.root},o),{},{children:[Object(a.jsx)(E.a,{variant:"h6",children:t}),i?Object(a.jsx)(R.a,{"aria-label":"close",className:n.closeButton,onClick:i,children:Object(a.jsx)(L.a,{})}):null]}))})),ja=function(e){Object(O.a)(i,e);var t=Object(v.a)(i);function i(e){var n;return Object(x.a)(this,i),(n=t.call(this,e)).signal=C.a.CancelToken.source(),n.state={data:n.props.data,loadData:n.props.loadData,showError:!1,loadPDF:!0,selectedPDF:null,dataFromPDF:{},loading:!1},n.loadPDFRef=o.a.createRef(),n.handleClose=n.handleClose.bind(Object(g.a)(n)),n.browseForPDF=n.browseForPDF.bind(Object(g.a)(n)),n.onPDFSelect=n.onPDFSelect.bind(Object(g.a)(n)),n.cancelSelectPDF=n.cancelSelectPDF.bind(Object(g.a)(n)),n.uploadPDF=n.uploadPDF.bind(Object(g.a)(n)),n.displayDataPDF=n.displayDataPDF.bind(Object(g.a)(n)),n.proceed=n.proceed.bind(Object(g.a)(n)),n.skipContinue=n.skipContinue.bind(Object(g.a)(n)),n.handleErrorDialogClose=n.handleErrorDialogClose.bind(Object(g.a)(n)),n}return Object(m.a)(i,[{key:"handleClose",value:function(){this.props.onClose()}},{key:"browseForPDF",value:function(){var e=this;this.setState({loadPDF:!0},(function(){e.loadPDFRef.current.click()}))}},{key:"onPDFSelect",value:function(e){1===e.target.files.length?this.setState({selectedPDF:e.target.files[0]}):this.setState({selectedPDF:null,dataFromPDF:{}})}},{key:"cancelSelectPDF",value:function(){this.loadPDFRef.current.value="",this.setState({selectedPDF:null,dataFromPDF:{}})}},{key:"uploadPDF",value:function(){var e=this;this.setState({loading:!0},(function(){var t=new FormData;t.append("input",e.state.selectedPDF),t.append("consolidateHeader",1),t.append("includeRawAffiliations",1);var a={cancelToken:e.signal.token,headers:{"Content-Type":"multipart/form-data",accept:"text/plain, */*"}},i=e;C.a.post("https://cloud.science-miner.com/grobid/api/processHeaderDocument",t,a).then((function(e){(0,n(640).parseString)(e.data,{trim:!0,preserveChildrenOrder:!0},(function(e,t){console.log(t);var n={};n.associated_paper_title=t.TEI.teiHeader[0].fileDesc[0].titleStmt[0].title[0]._,n.abstract=t.TEI.teiHeader[0].profileDesc[0].abstract[0].p[0],n.doi="https://doi.org/"+t.TEI.teiHeader[0].fileDesc[0].sourceDesc[0].biblStruct[0].idno[0]._;var a=t.TEI.teiHeader[0].fileDesc[0].sourceDesc[0].biblStruct[0].analytic[0].author,o=[];a.forEach((function(e){console.log(e);var t="";if("affiliation"in e&&(t=e.affiliation.map((function(e){return e.note[0]._.replace(/,\s*$/,"")})).join("; ")),"$"in e&&"corresp"===e.$.role){var a={firstname:1===e.persName[0].forename.length?e.persName[0].forename[0]._:e.persName[0].forename[0]._+" "+e.persName[0].forename[1]._.split(" ").join(".")+".",lastname:e.persName[0].surname[0]};n.corresponding_author=a}o.push({firstname:"persName"in e&&"forename"in e.persName[0]&&e.persName[0].forename.length>0?1===e.persName[0].forename.length?e.persName[0].forename[0]._:e.persName[0].forename[0]._+" "+e.persName[0].forename[1]._.split(" ").join(".")+".":"",lastname:"persName"in e&&"surname"in e.persName[0]&&e.persName[0].surname.length>0?e.persName[0].surname[0]:"",affiliation:t})})),n.authors=o,n.journal=t.TEI.teiHeader[0].fileDesc[0].sourceDesc[0].biblStruct[0].monogr[0].title.find((function(e){return"main"===e.$.type}))._;try{n.year=new Date(t.TEI.teiHeader[0].fileDesc[0].publicationStmt[0].date[0].$.when)}catch(s){console.log("Could not identify year!")}try{n.url=t.TEI.teiHeader[0].fileDesc[0].sourceDesc[0].biblStruct[0].ptr[0].$.target}catch(s){console.log("Could not identify download URL!")}i.setState({dataFromPDF:n,loading:!1})}))})).catch((function(t){C.a.isCancel(t)?console.log("Error: ",t.message):(console.log(t),console.log(t.response),e.setState({showError:!0})),e.setState({loading:!1})}))}))}},{key:"displayDataPDF",value:function(){return Object(a.jsxs)("div",{style:{marginTop:"40px",marginBottom:"40px"},children:[Object(a.jsx)("h6",{children:Object(a.jsx)("strong",{children:"Data extracted from selected PDF"})}),Object(a.jsx)("strong",{children:"Note: "}),"We make use of"," ",Object(a.jsx)("i",{children:Object(a.jsx)("a",{href:"https://github.com/kermitt2/grobid",children:"GROBID"})})," ","for extracting the required info from the uploaded PDF file. As this is an automated process, it could result in certain discrepancies. We urge you to verify the extracted info, and rectify them wherever necessary on the live paper creation page (after clicking 'Proceed').",Object(a.jsxs)(I.a,{variant:"outlined",elevation:3,style:{marginTop:"30px",padding:"20px",backgroundColor:"#FBEFDD"},children:["associated_paper_title"in this.state.dataFromPDF&&Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"Title: "}),this.state.dataFromPDF.associated_paper_title,Object(a.jsx)("br",{}),Object(a.jsx)("br",{})]}),"authors"in this.state.dataFromPDF?Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"Authors "}),"(count = ",this.state.dataFromPDF.authors.length,")",Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),this.state.dataFromPDF.authors.map((function(e,t){return Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:Object(a.jsxs)("i",{children:[t+1,")"]})}),"\xa0\xa0",Object(a.jsx)("strong",{children:"FirstName: "}),""===e.firstname?Object(a.jsx)("span",{style:{color:"red"},children:Object(a.jsx)("i",{children:"Missing!"})}):e.firstname,"\xa0\xa0\xa0\xa0",Object(a.jsx)("strong",{children:"LastName: "}),""===e.lastname?Object(a.jsx)("span",{style:{color:"red"},children:Object(a.jsx)("i",{children:"Missing!"})}):e.lastname,Object(a.jsx)("br",{}),""===e.affiliation?Object(a.jsx)("div",{style:{color:"red",paddingLeft:"3em"},children:Object(a.jsx)("i",{children:"Could not identify affiliation(s)!"})}):e.affiliation.split("; ").map((function(e,t){return Object(a.jsxs)("div",{style:{paddingLeft:"3em",paddingRight:"1.5em",textIndent:"-1.5em"},children:["- ",e]},t)})),Object(a.jsx)("br",{})]},t)})),Object(a.jsx)("br",{})]}):"","corresponding_author"in this.state.dataFromPDF&&Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"Corresponding Author: "}),Object(a.jsx)("br",{}),this.state.dataFromPDF.corresponding_author.firstname+" "+this.state.dataFromPDF.corresponding_author.lastname,Object(a.jsx)("br",{}),Object(a.jsx)("br",{})]}),"journal"in this.state.dataFromPDF&&Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"Journal: "}),Object(a.jsx)("br",{}),this.state.dataFromPDF.journal,Object(a.jsx)("br",{}),Object(a.jsx)("br",{})]}),"year"in this.state.dataFromPDF&&Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"Year: "}),Object(a.jsx)("br",{}),this.state.dataFromPDF.year.getFullYear(),Object(a.jsx)("br",{}),Object(a.jsx)("br",{})]}),"abstract"in this.state.dataFromPDF&&Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"Abstract: "}),Object(a.jsx)("br",{}),this.state.dataFromPDF.abstract,Object(a.jsx)("br",{}),Object(a.jsx)("br",{})]}),"doi"in this.state.dataFromPDF&&Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"DOI: "}),Object(a.jsx)("br",{}),this.state.dataFromPDF.doi,Object(a.jsx)("br",{}),Object(a.jsx)("br",{})]}),"url"in this.state.dataFromPDF&&Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"Article URL: "}),Object(a.jsx)("br",{}),this.state.dataFromPDF.url,Object(a.jsx)("br",{}),Object(a.jsx)("br",{})]})]}),Object(a.jsx)("div",{style:{paddingRight:"20px"},children:Object(a.jsx)("div",{style:{flex:1,flexDirection:"row-reverse",float:"right"},children:Object(a.jsx)("div",{style:{float:"right",paddingTop:"20px"},children:Object(a.jsx)(y.a,{variant:"contained",color:"primary",style:{backgroundColor:"#3F51B5",color:"#FFFFFF",fontWeight:"bold"},onClick:this.proceed,children:"Proceed"})})})})]})}},{key:"proceed",value:function(){this.setState({loadData:!0})}},{key:"skipContinue",value:function(){this.setState({loadPDF:!1})}},{key:"handleErrorDialogClose",value:function(){this.setState({showError:!1})}},{key:"render",value:function(){var e="";this.state.showError&&(e=Object(a.jsx)(Tt,{open:Boolean(this.state.showError),handleErrorDialogClose:this.handleErrorDialogClose,error:"We were unable to extract info from the specified PDF.\n\nPlease report this at:\nhttps://github.com/appukuttan-shailesh/live-paper-builder/issues"}));var t="";this.state.loadPDF&&(t=Object(a.jsx)("input",{id:"fileInput",type:"file",ref:this.loadPDFRef,style:{display:"none"},accept:".pdf",onChange:this.onPDFSelect}));var n="";return this.state.selectedPDF&&(n=Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{style:{paddingLeft:"20px",paddingRight:"20px"},children:Object(a.jsx)(M.a,{label:"Selected PDF",variant:"outlined",fullWidth:!0,name:"pdf_file",value:this.state.selectedPDF.name,onChange:this.handleFieldChange,InputProps:{readOnly:!0,style:{padding:"5px 15px"}}})}),Object(a.jsx)("div",{style:{paddingRight:"20px"},children:Object(a.jsxs)("div",{style:{flex:1,flexDirection:"row-reverse",float:"right"},children:[Object(a.jsx)("div",{style:{float:"right",paddingTop:"10px"},children:Object(a.jsx)(y.a,{variant:"contained",color:"primary",style:{width:"150px",backgroundColor:"#8BC34A",color:"#000000",fontWeight:"bold",padding:"10px",border:"solid",borderColor:"#000000",borderWidth:"1px"},onClick:this.uploadPDF,children:"Upload"})}),Object(a.jsx)("div",{style:{float:"right",paddingTop:"10px",paddingRight:"20px"},children:Object(a.jsx)(y.a,{variant:"contained",color:"primary",style:{width:"150px",backgroundColor:"#FF9800",color:"#000000",fontWeight:"bold",padding:"10px",border:"solid",borderColor:"#000000",borderWidth:"1px"},onClick:this.cancelSelectPDF,children:"Cancel"})})]})}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{children:Object.keys(this.state.dataFromPDF).length>1?this.displayDataPDF():""}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{})]})),!this.state.loadData&&this.state.loadPDF?Object(a.jsxs)(F.a,{fullScreen:!0,disableBackdropClick:!0,disableEscapeKeyDown:!0,onClose:this.handleClose,"aria-labelledby":"simple-dialog-title",open:this.props.open,children:[Object(a.jsx)(ba,{onClose:this.handleClose}),Object(a.jsxs)(S.a,{children:[Object(a.jsx)(ia,{open:this.state.loading}),Object(a.jsxs)("div",{className:"container",style:{textAlign:"left"},children:[Object(a.jsxs)("div",{className:"box rounded centered",children:[Object(a.jsx)("a",{href:"../../index.html",className:"waves-effect waves-light",style:{textAlign:"center",color:"black"},children:Object(a.jsx)("table",{children:Object(a.jsx)("tbody",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:Object(a.jsx)("img",{className:"ebrains-icon-small",src:"./imgs/ebrains_logo.png",alt:"EBRAINS logo",style:{width:"25px",height:"25px"}})}),Object(a.jsx)("td",{children:Object(a.jsx)("span",{className:"title-style subtitle",style:{paddingLeft:"5px"},children:"EBRAINS Live Papers"})})]})})})}),Object(a.jsx)("h5",{className:"title-style",children:"Live Paper Builder"})]}),Object(a.jsxs)("div",{style:{paddingLeft:"5%",paddingRight:"5%",textAlign:"justify"},children:[Object(a.jsxs)("div",{children:["You can start the live paper creation process by uploading the PDF file of the corresponding paper. We will try to extract required metadata such as title, author, affiliations, abstract and DOI from the uploaded file. To do so click on 'Browse' and select the PDF file in the file browser pop-up. Once selected, click 'Upload' to begin the extraction process. When complete, the extracted info is displayed on the page for you to verify. You can then click 'Proceed' (scroll to bottom of page) to be redirected to the live paper creation page with the extracted info auto-populated into their respective fields.",Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),"Alternatively, you can click on 'Skip' to start the live paper creation process with a blank slate."]}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center"},children:[Object(a.jsx)(y.a,{variant:"contained",color:"primary",style:{width:"40%",backgroundColor:"#009688",color:"#000000",fontWeight:"bold",border:"solid",borderColor:"#000000",borderWidth:"1px"},onClick:this.browseForPDF,children:"Browse"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)(y.a,{variant:"contained",color:"secondary",style:{width:"40%",backgroundColor:"#E57373",color:"#000000",fontWeight:"bold",border:"solid",borderColor:"#000000",borderWidth:"1px"},onClick:this.skipContinue,children:"Skip"})]}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),n,Object(a.jsxs)("div",{className:"rainbow-row",children:[Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{})]}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{})]}),t,e]})]})]}):Object(a.jsx)(ua,{open:!0,onClose:this.props.onClose,data:this.props.loadData?this.state.data:this.state.loadData?Object(k.a)(Object(k.a)({},this.state.data),this.state.dataFromPDF):{},loadData:this.state.loadData})}}]),i}(o.a.Component),fa=Object(D.b)(ja),xa=[{title:"Live Paper Name",field:"title"},{title:"Collab",field:"collab_id"},{title:"Modified",field:"modified_date",type:"date",defaultSort:"desc"}],ma=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(e,a){var i;return Object(x.a)(this,n),(i=t.call(this,e,a)).signal=C.a.CancelToken.source(),i.state={error:null,loading:!1,selectedRow:null},i.handleCancel=i.handleCancel.bind(Object(g.a)(i)),i.handleSelectProject=i.handleSelectProject.bind(Object(g.a)(i)),i.checkRequirements=i.checkRequirements.bind(Object(g.a)(i)),i.handleErrorDialogClose=i.handleErrorDialogClose.bind(Object(g.a)(i)),i}return Object(m.a)(n,[{key:"handleCancel",value:function(){this.props.onClose(!1)}},{key:"checkRequirements",value:function(e){var t=null;return e.collab_id||(t="A Collab must be specified!"),!t||(console.log(t),this.setState({error:t}),!1)}},{key:"handleErrorDialogClose",value:function(){this.setState({error:!1})}},{key:"handleSelectProject",value:function(){var e=this;this.setState({loading:!0},(function(){var t=Vt+"/livepapers/"+e.props.kg_project_list[e.state.selectedRow].id,n={cancelToken:e.signal.token,headers:{Authorization:"Bearer "+e.context.auth[0].token}};C.a.get(t,n).then((function(t){console.log(t.data),e.setState({error:null,loading:!1}),e.props.onClose(t.data)})).catch((function(t){if(C.a.isCancel(t))console.log("error: ",t.message);else{var n="";try{n=t.response.data.detail}catch(a){n=t}e.setState({error:n})}e.setState({loading:!1})}))}))}},{key:"render",value:function(){var e=this;return this.state.error?Object(a.jsx)(Tt,{open:Boolean(this.state.error),handleErrorDialogClose:this.handleErrorDialogClose,error:this.state.error[0].msg||this.state.error}):Object(a.jsxs)(F.a,{onClose:this.handleCancel,"aria-labelledby":"simple-dialog-title",open:this.props.open,fullWidth:!0,maxWidth:"md",children:[Object(a.jsx)(T.a,{style:{backgroundColor:"#ffd180"},children:Object(a.jsx)("span",{style:{fontWeight:"bolder",fontSize:18},children:"Load Live Paper Project From EBRAINS Knowledge Graph"})}),Object(a.jsxs)(S.a,{children:[Object(a.jsx)(ia,{open:this.state.loading}),Object(a.jsx)(ft.a,{my:2,children:"You have permissions to edit the following Live Paper projects on the Knowledge Graph:"}),Object(a.jsx)(ft.a,{my:2,children:Object(a.jsx)(It.a,{title:"Live Paper Projects",data:this.props.kg_project_list,columns:xa,onRowClick:function(t,n){return e.setState({selectedRow:n.tableData.id})},options:{search:!0,paging:!1,filtering:!1,exportButton:!1,maxBodyHeight:"60vh",headerStyle:{position:"sticky",top:0,backgroundColor:"#FFFFFF",fontWeight:"bolder",fontSize:15},rowStyle:function(t){return{backgroundColor:e.state.selectedRow===t.tableData.id?"#FFD180":"#EEEEEE"}}},components:{Toolbar:function(e){return Object(a.jsx)("div",{style:{backgroundColor:"#FFD180",fontWeight:"bolder !important"},children:Object(a.jsx)(St.MTableToolbar,Object(k.a)({},e))})}}})}),Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",paddingLeft:"2.5%",paddingRight:"2.5%",paddingTop:"20px",paddingBottom:"20px"},children:[Object(a.jsx)(y.a,{variant:"contained",color:"primary",style:{width:"20%",backgroundColor:"#FF9800",color:"#000000",fontWeight:"bold",border:"solid",borderColor:"#000000",borderWidth:"1px"},onClick:this.handleCancel,children:"Cancel"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)(y.a,{variant:"contained",color:"primary",style:{width:"20%",backgroundColor:(this.state.selectedRow||0===this.state.selectedRow)&&this.state.selectedRow>=0?"#8BC34A":"#FFFFFF",color:"#000000",fontWeight:"bold",border:"solid",borderColor:"#000000",borderWidth:"1px"},onClick:this.handleSelectProject,disabled:!((this.state.selectedRow||0===this.state.selectedRow)&&this.state.selectedRow>=0),children:"Load Project"})]})]})]})}}]),n}(o.a.Component);ma.contextType=f;var ga=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(e,a){var i;return Object(x.a)(this,n),(i=t.call(this,e,a)).signal=C.a.CancelToken.source(),i.state={createLivePaperOpen:!1,projectData:{},loadData:!1,kg_project_list:null,loadProjectKGOpen:!1,auth:e.auth||null,error:null,loading:!1},i.inputFileRef=o.a.createRef(),i.handleCreateLivePaperOpen=i.handleCreateLivePaperOpen.bind(Object(g.a)(i)),i.handleCreateLivePaperClose=i.handleCreateLivePaperClose.bind(Object(g.a)(i)),i.handleLoadProjectFile=i.handleLoadProjectFile.bind(Object(g.a)(i)),i.handleLoadProjectKG=i.handleLoadProjectKG.bind(Object(g.a)(i)),i.handleLoadProjectKGClose=i.handleLoadProjectKGClose.bind(Object(g.a)(i)),i.onFileSelect=i.onFileSelect.bind(Object(g.a)(i)),i.handleErrorDialogClose=i.handleErrorDialogClose.bind(Object(g.a)(i)),i}return Object(m.a)(n,[{key:"componentDidMount",value:function(){(0,Object(u.a)(this.context.auth,2)[1])(this.props.auth)}},{key:"handleCreateLivePaperOpen",value:function(){this.setState({projectData:{},createLivePaperOpen:!0,loadData:!1})}},{key:"handleCreateLivePaperClose",value:function(){this.inputFileRef.current.value="",this.setState({createLivePaperOpen:!1,projectData:{},loadData:!1})}},{key:"handleLoadProjectFile",value:function(){this.inputFileRef.current.click()}},{key:"handleLoadProjectKG",value:function(){var e=this;this.setState({loading:!0},(function(){var t={cancelToken:e.signal.token,headers:{Authorization:"Bearer "+e.context.auth[0].token}};C.a.get("https://validation-v2.brainsimulation.eu/livepapers/?editable=true",t).then((function(t){e.setState({kg_project_list:t.data,error:null,loading:!1,loadProjectKGOpen:!0})})).catch((function(t){if(C.a.isCancel(t))console.log("error: ",t.message);else{var n="";try{n=t.response.data.detail}catch(a){n=t}e.setState({error:n})}e.setState({loading:!1})}))}))}},{key:"handleLoadProjectKGClose",value:function(e){e?((e=Bt(e)).resources.sort(Nt),e.resources.forEach((function(e,t){var n=JSON.parse(JSON.stringify(e));"section_custom"===e.type&&(e.dataFormatted=n.description,delete e.description)})),e.resources.forEach((function(e,t){if("section_custom"!==e.type){var n=[];e.dataFormatted.forEach((function(e,t){var a=e.label.split("#-#");a.length>1&&(n.push(a[1]||""),e.label=a[0],e.tab_name=a[1])})),n=n.filter((function(e,t,n){return n.indexOf(e)===t})),e.useTabs=n.length>1||""!==n[0]}})),this.setState({loadProjectKGOpen:!1,projectData:e,loadData:!0,createLivePaperOpen:!0})):this.setState({loadProjectKGOpen:!1})}},{key:"onFileSelect",value:function(e){if(1===e.target.files.length){var t="",n=this,a=new FileReader;a.onload=function(e){(t=JSON.parse(a.result)).resources.sort(Nt),t.resources.forEach((function(e,t){if("section_custom"!==e.type){var n=[];e.dataFormatted.forEach((function(e,t){n.push(e.tab_name||"")})),n=n.filter((function(e,t,n){return n.indexOf(e)===t})),e.useTabs=n.length>1||""!==n[0]}})),n.setState({projectData:t,loadData:!0,createLivePaperOpen:!0})},a.readAsText(e.target.files[0])}else this.setState({projectData:{},loadData:!1})}},{key:"handleErrorDialogClose",value:function(){this.setState({error:!1})}},{key:"render",value:function(){var e="";this.state.createLivePaperOpen&&(e=Object(a.jsx)(fa,{open:this.state.createLivePaperOpen,onClose:this.handleCreateLivePaperClose,data:this.state.projectData,loadData:this.state.loadData}));var t="";this.state.error&&(t=Object(a.jsx)(Tt,{open:Boolean(this.state.error),handleErrorDialogClose:this.handleErrorDialogClose,error:this.state.error}));var n="";return this.state.loadProjectKGOpen&&(n=Object(a.jsx)(ma,{kg_project_list:this.state.kg_project_list,open:this.state.loadProjectKGOpen,onClose:this.handleLoadProjectKGClose})),Object(a.jsxs)("div",{className:"container",style:{textAlign:"left"},children:[Object(a.jsx)(ia,{open:this.state.loading}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:"box rounded centered",children:[Object(a.jsx)("a",{href:"../../index.html",className:"waves-effect waves-light",style:{textAlign:"center",color:"black"},children:Object(a.jsx)("table",{children:Object(a.jsx)("tbody",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:Object(a.jsx)("img",{className:"ebrains-icon-small",src:"./imgs/ebrains_logo.png",alt:"EBRAINS logo",style:{width:"25px",height:"25px"}})}),Object(a.jsx)("td",{children:Object(a.jsx)("span",{className:"title-style subtitle",style:{paddingLeft:"5px"},children:"EBRAINS Live Papers"})})]})})})}),Object(a.jsx)("h5",{className:"title-style",children:"Live Paper Builder"})]}),Object(a.jsxs)("div",{style:{paddingLeft:"5%",paddingRight:"5%",textAlign:"justify"},children:[Object(a.jsx)("strong",{children:"Welcome to the EBRAINS live paper builder!"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),"Here you can start building a new live paper linked to your manuscript or published article. The live paper builder allows you to build the live paper without any web development skills. Various functionalities for building a simple to moderately complex live paper is made available via this tool. For more advanced features and customizations, the users can edit the live Papers generated by this tool.",Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),'Live papers are often not produced in one go, and might require revisions over time. Keeping this in mind, we allow users to download "live paper projects" at any point of development. These project files can be loaded later, to continue from where you had left off. Please note, that these project files should not be manually edited as it could render them unreadable by the tool. Alternatively, users also have the option of loading an existing project that was previously saved on the EBRAINS Knowledge Graph.']}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center"},children:[Object(a.jsx)(y.a,{variant:"contained",color:"primary",style:{width:"27.5%",backgroundColor:"#FF9800",color:"#000000",fontWeight:"bold",border:"solid",borderColor:"#000000",borderWidth:"1px"},onClick:this.handleCreateLivePaperOpen,children:"Create New"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)(y.a,{variant:"contained",color:"secondary",style:{width:"27.5%",backgroundColor:"#01579b",fontWeight:"bold",border:"solid",borderColor:"#000000",borderWidth:"1px"},onClick:this.handleLoadProjectFile,children:"Load From File"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)(y.a,{variant:"contained",color:"secondary",style:{width:"27.5%",backgroundColor:"#1D7021",fontWeight:"bold",border:"solid",borderColor:"#000000",borderWidth:"1px"},onClick:this.handleLoadProjectKG,children:"Load From KG"})]}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:"rainbow-row",children:[Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{})]}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{children:e}),Object(a.jsx)("div",{children:Object(a.jsx)("input",{id:"fileInput",type:"file",ref:this.inputFileRef,style:{display:"none"},accept:".lpp",onChange:this.onFileSelect})}),n,t]})}}]),n}(o.a.Component);ga.contextType=f;var Oa=ga,va=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,706)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),a(e),i(e),o(e),s(e)}))};function ya(e){r.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(D.a,{maxSnack:3,children:Object(a.jsx)(j,{children:Object(a.jsx)(Oa,{auth:e})})})}),document.getElementById("root"))}window.addEventListener("DOMContentLoaded",(function(){return h(ya)})),va()}},[[665,1,2]]]);
//# sourceMappingURL=main.b31a05ae.chunk.js.map